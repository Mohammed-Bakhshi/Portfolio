{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { XYSeries } from \"./XYSeries\";\nimport { Percent } from \"../../../core/util/Percent\";\nimport { visualSettings } from \"../../../core/render/Graphics\";\nimport * as $array from \"../../../core/util/Array\";\nimport * as $type from \"../../../core/util/Type\";\n/**\r\n * Base class for all \"column-based\" series\r\n */\nexport class BaseColumnSeries extends XYSeries {\n  constructor() {\n    super(...arguments);\n    Object.defineProperty(this, \"_ph\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(this, \"_pw\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n  }\n  _makeGraphics(listTemplate, dataItem) {\n    return this.makeColumn(dataItem, listTemplate);\n  }\n  _makeFieldNames() {\n    super._makeFieldNames();\n    const xAxis = this.get(\"xAxis\");\n    const yAxis = this.get(\"yAxis\");\n    const categoryAxis = \"CategoryAxis\";\n    const valueAxis = \"ValueAxis\";\n    if (xAxis.isType(categoryAxis)) {\n      if (!this.get(\"openCategoryXField\")) {\n        this._xOpenField = this._xField;\n      }\n    }\n    if (xAxis.isType(valueAxis)) {\n      if (!this.get(\"openValueXField\")) {\n        this._xOpenField = this._xField;\n      }\n    }\n    if (yAxis.isType(categoryAxis)) {\n      if (!this.get(\"openCategoryYField\")) {\n        this._yOpenField = this._yField;\n      }\n    }\n    if (yAxis.isType(valueAxis)) {\n      if (!this.get(\"openValueYField\")) {\n        this._yOpenField = this._yField;\n      }\n    }\n  }\n  _prepareChildren() {\n    super._prepareChildren();\n    const xAxis = this.get(\"xAxis\");\n    const yAxis = this.get(\"yAxis\");\n    const len = this.dataItems.length;\n    const startIndex = Math.max(0, this.startIndex() - 2);\n    const endIndex = Math.min(this.endIndex() + 2, len - 1);\n    if (xAxis.inited && yAxis.inited) {\n      for (let i = startIndex; i <= endIndex; i++) {\n        let dataItem = this.dataItems[i];\n        this._createGraphics(dataItem);\n      }\n    }\n  }\n  _updateChildren() {\n    const chart = this.chart;\n    if (chart) {\n      this._ph = chart.plotContainer.height();\n      this._pw = chart.plotContainer.width();\n    }\n    const xAxis = this.get(\"xAxis\");\n    const yAxis = this.get(\"yAxis\");\n    const baseAxis = this.get(\"baseAxis\");\n    const columnsTemplate = this.columns.template;\n    if (this.isDirty(\"fill\")) {\n      if (columnsTemplate.get(\"fill\") == null) {\n        columnsTemplate.set(\"fill\", this.get(\"fill\"));\n      }\n    }\n    if (this.isDirty(\"fillPattern\")) {\n      if (columnsTemplate.get(\"fillPattern\") == null) {\n        columnsTemplate.set(\"fillPattern\", this.get(\"fillPattern\"));\n      }\n    }\n    if (this.isDirty(\"stroke\")) {\n      if (columnsTemplate.get(\"stroke\") == null) {\n        columnsTemplate.set(\"stroke\", this.get(\"stroke\"));\n      }\n    }\n    let index = 0;\n    let clusterCount = 0;\n    let i = 0;\n    $array.each(baseAxis.series, series => {\n      if (series instanceof BaseColumnSeries) {\n        const stacked = series.get(\"stacked\");\n        if (stacked && i == 0) {\n          clusterCount++;\n        }\n        if (!stacked && series.get(\"clustered\")) {\n          clusterCount++;\n        }\n      }\n      if (series === this) {\n        index = clusterCount - 1;\n      }\n      i++;\n    });\n    if (!this.get(\"clustered\")) {\n      index = 0;\n      clusterCount = 1;\n    }\n    if (clusterCount === 0) {\n      clusterCount = 1;\n      index = 0;\n    }\n    const xRenderer = xAxis.get(\"renderer\");\n    const yRenderer = yAxis.get(\"renderer\");\n    const cellStartLocation = \"cellStartLocation\";\n    const cellEndLocation = \"cellEndLocation\";\n    const cellLocationX0 = xRenderer.get(cellStartLocation, 0);\n    const cellLocationX1 = xRenderer.get(cellEndLocation, 1);\n    const cellLocationY0 = yRenderer.get(cellStartLocation, 0);\n    const cellLocationY1 = yRenderer.get(cellEndLocation, 1);\n    this._aLocationX0 = cellLocationX0 + index / clusterCount * (cellLocationX1 - cellLocationX0);\n    this._aLocationX1 = cellLocationX0 + (index + 1) / clusterCount * (cellLocationX1 - cellLocationX0);\n    ;\n    this._aLocationY0 = cellLocationY0 + index / clusterCount * (cellLocationY1 - cellLocationY0);\n    this._aLocationY1 = cellLocationY0 + (index + 1) / clusterCount * (cellLocationY1 - cellLocationY0);\n    if (xAxis.inited && yAxis.inited) {\n      if (this._axesDirty || this._valuesDirty || this._stackDirty || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this._sizeDirty) {\n        const len = this.dataItems.length;\n        let startIndex = Math.max(0, this.startIndex() - 2);\n        let endIndex = Math.min(this.endIndex() + 2, len - 1);\n        for (let i = 0; i < startIndex; i++) {\n          this._toggleColumn(this.dataItems[i], false);\n        }\n        let previous = this.dataItems[startIndex];\n        for (let i = startIndex; i <= endIndex; i++) {\n          let dataItem = this.dataItems[i];\n          if (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\n            previous = dataItem;\n            if (i > 0 && startIndex > 0) {\n              for (let j = i - 1; j >= 0; j--) {\n                let dataItem = this.dataItems[j];\n                if (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\n                  previous = dataItem;\n                  break;\n                }\n              }\n            }\n            break;\n          } else {\n            this._toggleColumn(dataItem, false);\n          }\n        }\n        for (let i = startIndex; i <= endIndex; i++) {\n          let dataItem = this.dataItems[i];\n          this._updateGraphics(dataItem, previous);\n          if (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\n            previous = dataItem;\n          }\n        }\n        for (let i = endIndex + 1; i < len; i++) {\n          this._toggleColumn(this.dataItems[i], false);\n        }\n      }\n    } else {\n      this._skipped = true;\n    }\n    this.updateLegendMarker(this.get(\"tooltipDataItem\"));\n    super._updateChildren();\n  }\n  _createGraphics(dataItem) {\n    let graphics = dataItem.get(\"graphics\");\n    if (!graphics) {\n      graphics = this._makeGraphics(this.columns, dataItem);\n      dataItem.set(\"graphics\", graphics);\n      graphics._setDataItem(dataItem);\n      const legendDataItem = dataItem.get(\"legendDataItem\");\n      if (legendDataItem) {\n        const markerRectangle = legendDataItem.get(\"markerRectangle\");\n        if (markerRectangle) {\n          const ds = markerRectangle.states.lookup(\"default\");\n          $array.each(visualSettings, setting => {\n            const value = graphics.get(setting, this.get(setting));\n            markerRectangle.set(setting, value);\n            ds.set(setting, value);\n          });\n        }\n      }\n      let graphicsArray = dataItem.get(\"rangeGraphics\");\n      if (graphicsArray) {\n        $array.each(graphicsArray, graphics => {\n          graphics.dispose();\n        });\n      }\n      graphicsArray = [];\n      dataItem.setRaw(\"rangeGraphics\", graphicsArray);\n      this.axisRanges.each(axisRange => {\n        const container = axisRange.container;\n        const rangeGraphics = this._makeGraphics(axisRange.columns, dataItem);\n        if (graphicsArray) {\n          graphicsArray.push(rangeGraphics);\n        }\n        rangeGraphics.setPrivate(\"list\", axisRange.columns);\n        container.children.push(rangeGraphics);\n      });\n    }\n  }\n  createAxisRange(axisDataItem) {\n    $array.each(this.dataItems, dataItem => {\n      const graphics = dataItem.get(\"graphics\");\n      if (graphics) {\n        graphics.dispose();\n        dataItem.set(\"graphics\", undefined);\n      }\n    });\n    return super.createAxisRange(axisDataItem);\n  }\n  _updateGraphics(dataItem, previousDataItem) {\n    let graphics = dataItem.get(\"graphics\");\n    //if (!graphics) {\n    //\tthis._createGraphics(dataItem);\n    //\tgraphics = dataItem.get(\"graphics\")!;\n    //}\n    const xField = this._xField;\n    const yField = this._yField;\n    const valueX = dataItem.get(xField);\n    const valueY = dataItem.get(yField);\n    if (valueX != null && valueY != null) {\n      const xOpenField = this._xOpenField;\n      const yOpenField = this._yOpenField;\n      const locationX = this.get(\"locationX\", dataItem.get(\"locationX\", 0.5));\n      const locationY = this.get(\"locationY\", dataItem.get(\"locationY\", 0.5));\n      const openLocationX = this.get(\"openLocationX\", dataItem.get(\"openLocationX\", locationX));\n      const openLocationY = this.get(\"openLocationY\", dataItem.get(\"openLocationY\", locationY));\n      const width = graphics.get(\"width\");\n      const height = graphics.get(\"height\");\n      const stacked = this.get(\"stacked\");\n      const xAxis = this.get(\"xAxis\");\n      const yAxis = this.get(\"yAxis\");\n      const baseAxis = this.get(\"baseAxis\");\n      const xStart = xAxis.get(\"start\");\n      const xEnd = xAxis.get(\"end\");\n      const yStart = yAxis.get(\"start\");\n      const yEnd = yAxis.get(\"end\");\n      let l;\n      let r;\n      let t;\n      let b;\n      let vcy = this.get(\"vcy\", 1);\n      let vcx = this.get(\"vcx\", 1);\n      let fitW = false;\n      let fitH = false;\n      if (yAxis.isType(\"CategoryAxis\") && xAxis.isType(\"CategoryAxis\")) {\n        let startLocation = this._aLocationX0 + openLocationX - 0.5;\n        let endLocation = this._aLocationX1 + locationX - 0.5;\n        if (width instanceof Percent) {\n          let offset = (endLocation - startLocation) * (1 - width.value) / 2;\n          startLocation += offset;\n          endLocation -= offset;\n        }\n        l = xAxis.getDataItemPositionX(dataItem, xOpenField, startLocation, vcx);\n        r = xAxis.getDataItemPositionX(dataItem, xField, endLocation, vcx);\n        startLocation = this._aLocationY0 + openLocationY - 0.5;\n        endLocation = this._aLocationY1 + locationY - 0.5;\n        if (height instanceof Percent) {\n          let offset = (endLocation - startLocation) * (1 - height.value) / 2;\n          startLocation += offset;\n          endLocation -= offset;\n        }\n        t = yAxis.getDataItemPositionY(dataItem, yOpenField, startLocation, vcy);\n        b = yAxis.getDataItemPositionY(dataItem, yField, endLocation, vcy);\n        dataItem.setRaw(\"point\", {\n          x: l + (r - l) / 2,\n          y: t + (b - t) / 2\n        });\n      } else if (xAxis === baseAxis) {\n        let startLocation = this._aLocationX0 + openLocationX - 0.5;\n        let endLocation = this._aLocationX1 + locationX - 0.5;\n        if (width instanceof Percent) {\n          let offset = (endLocation - startLocation) * (1 - width.value) / 2;\n          startLocation += offset;\n          endLocation -= offset;\n        }\n        l = xAxis.getDataItemPositionX(dataItem, xOpenField, startLocation, vcx);\n        r = xAxis.getDataItemPositionX(dataItem, xField, endLocation, vcx);\n        t = yAxis.getDataItemPositionY(dataItem, yField, locationY, vcy);\n        if (this._yOpenField !== this._yField) {\n          b = yAxis.getDataItemPositionY(dataItem, yOpenField, openLocationY, vcy);\n        } else {\n          if (stacked) {\n            let stackToItemY = dataItem.get(\"stackToItemY\");\n            if (stackToItemY) {\n              b = yAxis.getDataItemPositionY(stackToItemY, yField, openLocationY, stackToItemY.component.get(\"vcy\"));\n            } else {\n              b = yAxis.basePosition();\n            }\n          } else {\n            b = yAxis.basePosition();\n          }\n        }\n        dataItem.setRaw(\"point\", {\n          x: l + (r - l) / 2,\n          y: t\n        });\n        fitH = true;\n      } else if (yAxis === baseAxis) {\n        let startLocation = this._aLocationY0 + openLocationY - 0.5;\n        let endLocation = this._aLocationY1 + locationY - 0.5;\n        if (height instanceof Percent) {\n          let offset = (endLocation - startLocation) * (1 - height.value) / 2;\n          startLocation += offset;\n          endLocation -= offset;\n        }\n        t = yAxis.getDataItemPositionY(dataItem, yOpenField, startLocation, vcy);\n        b = yAxis.getDataItemPositionY(dataItem, yField, endLocation, vcy);\n        r = xAxis.getDataItemPositionX(dataItem, xField, locationX, vcx);\n        if (this._xOpenField !== this._xField) {\n          l = xAxis.getDataItemPositionX(dataItem, xOpenField, openLocationX, vcx);\n        } else {\n          if (stacked) {\n            let stackToItemX = dataItem.get(\"stackToItemX\");\n            if (stackToItemX) {\n              l = xAxis.getDataItemPositionX(stackToItemX, xField, openLocationX, stackToItemX.component.get(\"vcx\"));\n            } else {\n              l = xAxis.basePosition();\n            }\n          } else {\n            l = xAxis.basePosition();\n          }\n        }\n        fitW = true;\n        dataItem.setRaw(\"point\", {\n          x: r,\n          y: t + (b - t) / 2\n        });\n      }\n      this._updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH);\n      if (l < xStart && r < xStart || l > xEnd && r > xEnd || t < yStart && b <= yStart || t >= yEnd && b > yEnd || $type.isNaN(l) || $type.isNaN(t)) {\n        this._toggleColumn(dataItem, false);\n      } else {\n        this._toggleColumn(dataItem, true);\n      }\n      let rangeGraphics = dataItem.get(\"rangeGraphics\");\n      if (rangeGraphics) {\n        $array.each(rangeGraphics, graphics => {\n          this._updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH);\n        });\n      }\n      this._applyGraphicsStates(dataItem, previousDataItem);\n    } else {\n      this._toggleColumn(dataItem, false);\n    }\n  }\n  _updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH) {\n    const width = graphics.get(\"width\");\n    const height = graphics.get(\"height\");\n    const maxWidth = graphics.get(\"maxWidth\");\n    const maxHeight = graphics.get(\"maxHeight\");\n    const ptl = this.getPoint(l, t);\n    const pbr = this.getPoint(r, b);\n    const tooltipPoint = dataItem.get(\"point\");\n    if (tooltipPoint) {\n      const point = this.getPoint(tooltipPoint.x, tooltipPoint.y);\n      tooltipPoint.x = point.x + this._x;\n      tooltipPoint.y = point.y + this._y;\n    }\n    l = ptl.x;\n    r = pbr.x;\n    t = ptl.y;\n    b = pbr.y;\n    if ($type.isNumber(width)) {\n      const offset = (r - l - width) / 2;\n      l += offset;\n      r -= offset;\n    }\n    if ($type.isNumber(maxWidth) && maxWidth < Math.abs(r - l)) {\n      const offset = (r - l - maxWidth) / 2;\n      l += offset;\n      r -= offset;\n    }\n    if ($type.isNumber(height)) {\n      const offset = (b - t - height) / 2;\n      t += offset;\n      b -= offset;\n    }\n    if ($type.isNumber(maxHeight) && maxHeight < Math.abs(b - t)) {\n      const offset = (b - t - maxHeight) / 2;\n      t += offset;\n      b -= offset;\n    }\n    if (this.get(\"adjustBulletPosition\")) {\n      if (fitW) {\n        r = Math.min(Math.max(0, r), this._pw);\n        l = Math.min(Math.max(0, l), this._pw);\n      }\n      if (fitH) {\n        t = Math.min(Math.max(0, t), this._ph);\n        b = Math.min(Math.max(0, b), this._ph);\n      }\n    }\n    dataItem.setRaw(\"left\", l);\n    dataItem.setRaw(\"right\", r);\n    dataItem.setRaw(\"top\", t);\n    dataItem.setRaw(\"bottom\", b);\n    graphics.setPrivate(\"width\", r - l);\n    graphics.setPrivate(\"height\", b - t);\n    graphics.set(\"x\", l);\n    graphics.set(\"y\", b - (b - t));\n  }\n  _handleDataSetChange() {\n    super._handleDataSetChange();\n    $array.each(this._dataItems, dataItem => {\n      this._toggleColumn(dataItem, false);\n    });\n  }\n  _applyGraphicsStates(dataItem, previousDataItem) {\n    const graphics = dataItem.get(\"graphics\");\n    const dropFromOpen = graphics.states.lookup(\"dropFromOpen\");\n    const riseFromOpen = graphics.states.lookup(\"riseFromOpen\");\n    const dropFromPrevious = graphics.states.lookup(\"dropFromPrevious\");\n    const riseFromPrevious = graphics.states.lookup(\"riseFromPrevious\");\n    if (dropFromOpen || dropFromPrevious || riseFromOpen || riseFromPrevious) {\n      const xAxis = this.get(\"xAxis\");\n      const yAxis = this.get(\"yAxis\");\n      const baseAxis = this.get(\"baseAxis\");\n      let open;\n      let close;\n      let previousClose;\n      if (baseAxis === xAxis && yAxis.isType(\"ValueAxis\")) {\n        open = dataItem.get(this._yOpenField);\n        close = dataItem.get(this._yField);\n        previousClose = previousDataItem.get(this._yField);\n      } else if (baseAxis === yAxis && xAxis.isType(\"ValueAxis\")) {\n        open = dataItem.get(this._xOpenField);\n        close = dataItem.get(this._xField);\n        previousClose = previousDataItem.get(this._xField);\n      }\n      if ($type.isNumber(open) && $type.isNumber(close)) {\n        if (close < open) {\n          if (dropFromOpen) {\n            dropFromOpen.apply();\n          }\n        } else {\n          if (riseFromOpen) {\n            riseFromOpen.apply();\n          }\n        }\n        if ($type.isNumber(previousClose)) {\n          if (close < previousClose) {\n            if (dropFromPrevious) {\n              dropFromPrevious.apply();\n            }\n          } else {\n            if (riseFromPrevious) {\n              riseFromPrevious.apply();\n            }\n          }\n        }\n      }\n    }\n  }\n  /**\r\n   * @ignore\r\n   */\n  disposeDataItem(dataItem) {\n    super.disposeDataItem(dataItem);\n    const graphics = dataItem.get(\"graphics\");\n    if (graphics) {\n      this.columns.removeValue(graphics);\n      graphics.dispose();\n    }\n    const rangeGraphics = dataItem.get(\"rangeGraphics\");\n    if (rangeGraphics) {\n      $array.each(rangeGraphics, graphics => {\n        const list = graphics.getPrivate(\"list\");\n        if (list) {\n          list.removeValue(graphics);\n        }\n        graphics.dispose();\n      });\n    }\n  }\n  /**\r\n   * Hides series's data item.\r\n   *\r\n   * @param   dataItem  Data item\r\n   * @param   duration  Animation duration in milliseconds\r\n   * @return            Promise\r\n   */\n  hideDataItem(dataItem, duration) {\n    const _super = Object.create(null, {\n      hideDataItem: {\n        get: () => super.hideDataItem\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      const promises = [_super.hideDataItem.call(this, dataItem, duration)];\n      const graphics = dataItem.get(\"graphics\");\n      if (graphics) {\n        promises.push(graphics.hide(duration));\n      }\n      const rangeGraphics = dataItem.get(\"rangeGraphics\");\n      if (rangeGraphics) {\n        $array.each(rangeGraphics, graphics => {\n          promises.push(graphics.hide(duration));\n        });\n      }\n      yield Promise.all(promises);\n    });\n  }\n  _toggleColumn(dataItem, visible) {\n    const graphics = dataItem.get(\"graphics\");\n    if (graphics) {\n      graphics.setPrivate(\"visible\", visible);\n    }\n    const rangeGraphics = dataItem.get(\"rangeGraphics\");\n    if (rangeGraphics) {\n      $array.each(rangeGraphics, graphics => {\n        graphics.setPrivate(\"visible\", visible);\n      });\n    }\n    const bullets = dataItem.bullets;\n    if (bullets) {\n      $array.each(bullets, bullet => {\n        bullet.setPrivate(\"hidden\", !visible);\n      });\n    }\n  }\n  /**\r\n   * Shows series's data item.\r\n   *\r\n   * @param   dataItem  Data item\r\n   * @param   duration  Animation duration in milliseconds\r\n   * @return            Promise\r\n   */\n  showDataItem(dataItem, duration) {\n    const _super = Object.create(null, {\n      showDataItem: {\n        get: () => super.showDataItem\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      const promises = [_super.showDataItem.call(this, dataItem, duration)];\n      const graphics = dataItem.get(\"graphics\");\n      if (graphics) {\n        promises.push(graphics.show(duration));\n      }\n      const rangeGraphics = dataItem.get(\"rangeGraphics\");\n      if (rangeGraphics) {\n        $array.each(rangeGraphics, graphics => {\n          promises.push(graphics.show(duration));\n        });\n      }\n      yield Promise.all(promises);\n    });\n  }\n  /**\r\n   * @ignore\r\n   */\n  updateLegendMarker(dataItem) {\n    let legendDataItem = this.get(\"legendDataItem\");\n    if (this.get(\"useLastColorForLegendMarker\")) {\n      if (!dataItem) {\n        const lastDataItem = this.dataItems[this.endIndex() - 1];\n        if (lastDataItem) {\n          dataItem = lastDataItem;\n        }\n      }\n    }\n    if (legendDataItem) {\n      let graphics = this.columns.template;\n      if (dataItem) {\n        let column = dataItem.get(\"graphics\");\n        if (column) {\n          graphics = column;\n        }\n      }\n      const markerRectangle = legendDataItem.get(\"markerRectangle\");\n      if (markerRectangle) {\n        if (!legendDataItem.get(\"itemContainer\").get(\"disabled\")) {\n          const ds = markerRectangle.states.lookup(\"default\");\n          $array.each(visualSettings, setting => {\n            const value = graphics.get(setting, this.get(setting));\n            markerRectangle.set(setting, value);\n            ds.set(setting, value);\n          });\n        }\n      }\n    }\n  }\n  _getTooltipTarget(dataItem) {\n    if (this.get(\"seriesTooltipTarget\") == \"bullet\") {\n      return super._getTooltipTarget(dataItem);\n    }\n    let column = dataItem.get(\"graphics\");\n    if (column) {\n      return column;\n    }\n    return this;\n  }\n}\nObject.defineProperty(BaseColumnSeries, \"className\", {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value: \"BaseColumnSeries\"\n});\nObject.defineProperty(BaseColumnSeries, \"classNames\", {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value: XYSeries.classNames.concat([BaseColumnSeries.className])\n});","map":{"version":3,"names":["XYSeries","Percent","visualSettings","$array","$type","BaseColumnSeries","constructor","Object","defineProperty","_makeGraphics","listTemplate","dataItem","makeColumn","_makeFieldNames","xAxis","get","yAxis","categoryAxis","valueAxis","isType","_xOpenField","_xField","_yOpenField","_yField","_prepareChildren","len","dataItems","length","startIndex","Math","max","endIndex","min","inited","i","_createGraphics","_updateChildren","chart","_ph","plotContainer","height","_pw","width","baseAxis","columnsTemplate","columns","template","isDirty","set","index","clusterCount","each","series","stacked","xRenderer","yRenderer","cellStartLocation","cellEndLocation","cellLocationX0","cellLocationX1","cellLocationY0","cellLocationY1","_aLocationX0","_aLocationX1","_aLocationY0","_aLocationY1","_axesDirty","_valuesDirty","_stackDirty","_sizeDirty","_toggleColumn","previous","j","_updateGraphics","_skipped","updateLegendMarker","graphics","_setDataItem","legendDataItem","markerRectangle","ds","states","lookup","setting","value","graphicsArray","dispose","setRaw","axisRanges","axisRange","container","rangeGraphics","push","setPrivate","children","createAxisRange","axisDataItem","undefined","previousDataItem","xField","yField","valueX","valueY","xOpenField","yOpenField","locationX","locationY","openLocationX","openLocationY","xStart","xEnd","yStart","yEnd","l","r","t","b","vcy","vcx","fitW","fitH","startLocation","endLocation","offset","getDataItemPositionX","getDataItemPositionY","x","y","stackToItemY","component","basePosition","stackToItemX","_updateSeriesGraphics","isNaN","_applyGraphicsStates","maxWidth","maxHeight","ptl","getPoint","pbr","tooltipPoint","point","_x","_y","isNumber","abs","_handleDataSetChange","_dataItems","dropFromOpen","riseFromOpen","dropFromPrevious","riseFromPrevious","open","close","previousClose","apply","disposeDataItem","removeValue","list","getPrivate","hideDataItem","duration","promises","_super","call","hide","Promise","all","visible","bullets","bullet","showDataItem","show","lastDataItem","column","_getTooltipTarget","classNames","concat","className"],"sources":["C:\\Users\\Moham\\Downloads\\Github projects\\Digital-Portfolio-main\\Frontend\\node_modules\\src\\.internal\\charts\\xy\\series\\BaseColumnSeries.ts"],"sourcesContent":["import type { DataItem } from \"../../../core/render/Component\";\nimport type { Graphics } from \"../../../core/render/Graphics\";\nimport type { Template } from \"../../../core/util/Template\";\nimport type { ListTemplate } from \"../../../core/util/List\";\nimport type { CategoryAxis } from \"../axes/CategoryAxis\";\nimport type { DateAxis } from \"../axes/DateAxis\";\nimport type { ValueAxis } from \"../axes/ValueAxis\";\nimport type { IAxisDataItem } from \"../axes/Axis\";\nimport type { ILegendDataItem } from \"../../../core/render/Legend\";\nimport type { Sprite } from \"../../../core/render/Sprite\";\n\nimport { XYSeries, IXYSeriesPrivate, IXYSeriesSettings, IXYSeriesDataItem, IXYSeriesAxisRange } from \"./XYSeries\";\nimport { Percent } from \"../../../core/util/Percent\";\nimport { visualSettings } from \"../../../core/render/Graphics\";\n\nimport * as $array from \"../../../core/util/Array\";\nimport * as $type from \"../../../core/util/Type\";\n\nexport interface IBaseColumnSeriesDataItem extends IXYSeriesDataItem {\n\n\t/**\n\t * An actual [[Graphics]] element (Column/Slice/Candlestick/OHLC).\n\t */\n\tgraphics?: Graphics;\n\n\t/**\n\t * In case axis ranges are added to the series, it creates a separate\n\t * element ([[Graphics]]) for each axis range. This array holds them all.\n\t */\n\trangeGraphics?: Array<Graphics>;\n\n\t/**\n\t * If data items from this series are used to feed a [[Legend]], this\n\t * will hold a reference to the equivalent Legend data item.\n\t * \n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/legend/#Data_item_list} for more info\n\t */\n\tlegendDataItem?: DataItem<ILegendDataItem>;\n}\n\nexport interface IBaseColumnSeriesSettings extends IXYSeriesSettings {\n\n\t/**\n\t * Indicates if series must divvy up available space with other column\n\t * series (`true`; default) or take up the whole available space (`false`).\n\t *\n\t * @default true\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/column-series/#Clustering} for more info\n\t */\n\tclustered?: boolean;\n\n\t/**\n\t * Whether positions of bullets should be calculated based on portion of\n\t * column currently visual (`true`) or the whole length/height of the\n\t * column (`false`).\n\t *\n\t * @default true\n\t */\n\tadjustBulletPosition?: boolean;\n\n\t/**\n\t * If set to `true` will use color of the last visible column for legend\n\t * marker. Otherwise, series `fill`/`stroke` will be used.\n\t *\n\t * @since 5.1.13\n\t */\n\tuseLastColorForLegendMarker?: boolean\n\n}\n\nexport interface IBaseColumnSeriesPrivate extends IXYSeriesPrivate { }\n\nexport interface IBaseColumnSeriesAxisRange extends IXYSeriesAxisRange {\n\n\t/**\n\t * A list of actual [[Graphics]] elements for an axis range.\n\t *\n\t * Can be used to ajust the look of the axis range columns.\n\t */\n\tcolumns: ListTemplate<Graphics>;\n\n}\n\n/**\n * Base class for all \"column-based\" series\n */\nexport abstract class BaseColumnSeries extends XYSeries {\n\n\tdeclare public _settings: IBaseColumnSeriesSettings;\n\tdeclare public _privateSettings: IBaseColumnSeriesPrivate;\n\tdeclare public _dataItemSettings: IBaseColumnSeriesDataItem;\n\tdeclare public _axisRangeType: IBaseColumnSeriesAxisRange;\n\n\tpublic static className: string = \"BaseColumnSeries\";\n\tpublic static classNames: Array<string> = XYSeries.classNames.concat([BaseColumnSeries.className]);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract makeColumn(dataItem: DataItem<this[\"_dataItemSettings\"]>, listTemplate: ListTemplate<Graphics>): Graphics\n\n\t/**\n\t * ListTemplate of columns in series.\n\t */\n\tpublic abstract columns: ListTemplate<Graphics>;\n\n\tprotected _makeGraphics(listTemplate: ListTemplate<Graphics>, dataItem: DataItem<this[\"_dataItemSettings\"]>): Graphics {\n\t\treturn this.makeColumn(dataItem, listTemplate);\n\t}\n\n\tprotected _ph: number = 0;\n\tprotected _pw: number = 0;\n\n\tpublic _makeFieldNames() {\n\t\tsuper._makeFieldNames();\n\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\n\t\tconst categoryAxis = \"CategoryAxis\";\n\t\tconst valueAxis = \"ValueAxis\";\n\n\t\tif (xAxis.isType<CategoryAxis<any>>(categoryAxis)) {\n\t\t\tif (!this.get(\"openCategoryXField\")) {\n\t\t\t\tthis._xOpenField = this._xField;\n\t\t\t}\n\t\t}\n\n\t\tif (xAxis.isType<DateAxis<any>>(valueAxis)) {\n\t\t\tif (!this.get(\"openValueXField\")) {\n\t\t\t\tthis._xOpenField = this._xField;\n\t\t\t}\n\t\t}\n\n\t\tif (yAxis.isType<CategoryAxis<any>>(categoryAxis)) {\n\t\t\tif (!this.get(\"openCategoryYField\")) {\n\t\t\t\tthis._yOpenField = this._yField;\n\t\t\t}\n\t\t}\n\n\t\tif (yAxis.isType<DateAxis<any>>(valueAxis)) {\n\t\t\tif (!this.get(\"openValueYField\")) {\n\t\t\t\tthis._yOpenField = this._yField;\n\t\t\t}\n\t\t}\n\t}\n\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\n\t\tconst len = this.dataItems.length;\n\t\tconst startIndex = Math.max(0, this.startIndex() - 2);\n\t\tconst endIndex = Math.min(this.endIndex() + 2, len - 1);\n\n\t\tif (xAxis.inited && yAxis.inited) {\n\t\t\tfor (let i = startIndex; i <= endIndex; i++) {\n\t\t\t\tlet dataItem = this.dataItems[i];\n\t\t\t\tthis._createGraphics(dataItem);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _updateChildren() {\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\tthis._ph = chart.plotContainer.height();\n\t\t\tthis._pw = chart.plotContainer.width();\n\t\t}\n\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\t\tconst baseAxis = this.get(\"baseAxis\")!;\n\n\t\tconst columnsTemplate = this.columns.template;\n\t\tif (this.isDirty(\"fill\")) {\n\t\t\tif (columnsTemplate.get(\"fill\") == null) {\n\t\t\t\tcolumnsTemplate.set(\"fill\", this.get(\"fill\"));\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"fillPattern\")) {\n\t\t\tif (columnsTemplate.get(\"fillPattern\") == null) {\n\t\t\t\tcolumnsTemplate.set(\"fillPattern\", this.get(\"fillPattern\"));\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"stroke\")) {\n\t\t\tif (columnsTemplate.get(\"stroke\") == null) {\n\t\t\t\tcolumnsTemplate.set(\"stroke\", this.get(\"stroke\"));\n\t\t\t}\n\t\t}\n\n\t\tlet index = 0;\n\t\tlet clusterCount = 0;\n\t\tlet i = 0;\n\n\t\t$array.each(baseAxis.series, (series) => {\n\t\t\tif (series instanceof BaseColumnSeries) {\n\t\t\t\tconst stacked = series.get(\"stacked\");\n\n\t\t\t\tif (stacked && i == 0) {\n\t\t\t\t\tclusterCount++;\n\t\t\t\t}\n\n\t\t\t\tif (!stacked && series.get(\"clustered\")) {\n\t\t\t\t\tclusterCount++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (series === this) {\n\t\t\t\tindex = clusterCount - 1;\n\t\t\t}\n\t\t\ti++;\n\t\t})\n\n\t\tif (!this.get(\"clustered\")) {\n\t\t\tindex = 0;\n\t\t\tclusterCount = 1;\n\t\t}\n\n\t\tif (clusterCount === 0) {\n\t\t\tclusterCount = 1;\n\t\t\tindex = 0;\n\t\t}\n\n\t\tconst xRenderer = xAxis.get(\"renderer\");\n\t\tconst yRenderer = yAxis.get(\"renderer\");\n\n\t\tconst cellStartLocation = \"cellStartLocation\";\n\t\tconst cellEndLocation = \"cellEndLocation\";\n\n\t\tconst cellLocationX0 = xRenderer.get(cellStartLocation, 0);\n\t\tconst cellLocationX1 = xRenderer.get(cellEndLocation, 1);\n\n\t\tconst cellLocationY0 = yRenderer.get(cellStartLocation, 0);\n\t\tconst cellLocationY1 = yRenderer.get(cellEndLocation, 1);\n\n\t\tthis._aLocationX0 = cellLocationX0 + (index / clusterCount) * (cellLocationX1 - cellLocationX0);\n\t\tthis._aLocationX1 = cellLocationX0 + (index + 1) / clusterCount * (cellLocationX1 - cellLocationX0);;\n\n\t\tthis._aLocationY0 = cellLocationY0 + (index / clusterCount) * (cellLocationY1 - cellLocationY0);\n\t\tthis._aLocationY1 = cellLocationY0 + (index + 1) / clusterCount * (cellLocationY1 - cellLocationY0);\n\n\t\tif (xAxis.inited && yAxis.inited) {\n\t\t\tif (this._axesDirty || this._valuesDirty || this._stackDirty || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this._sizeDirty) {\n\t\t\t\tconst len = this.dataItems.length;\n\n\t\t\t\tlet startIndex = Math.max(0, this.startIndex() - 2);\n\t\t\t\tlet endIndex = Math.min(this.endIndex() + 2, len - 1);\n\n\t\t\t\tfor (let i = 0; i < startIndex; i++) {\n\t\t\t\t\tthis._toggleColumn(this.dataItems[i], false);\n\t\t\t\t}\n\t\t\t\tlet previous = this.dataItems[startIndex];\n\n\t\t\t\tfor (let i = startIndex; i <= endIndex; i++) {\n\t\t\t\t\tlet dataItem = this.dataItems[i];\n\t\t\t\t\tif (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\n\t\t\t\t\t\tprevious = dataItem;\n\t\t\t\t\t\tif (i > 0 && startIndex > 0) {\n\t\t\t\t\t\t\tfor (let j = i - 1; j >= 0; j--) {\n\t\t\t\t\t\t\t\tlet dataItem = this.dataItems[j];\n\t\t\t\t\t\t\t\tif (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\n\t\t\t\t\t\t\t\t\tprevious = dataItem;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis._toggleColumn(dataItem, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let i = startIndex; i <= endIndex; i++) {\n\t\t\t\t\tlet dataItem = this.dataItems[i];\n\t\t\t\t\tthis._updateGraphics(dataItem, previous);\n\t\t\t\t\tif (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\n\t\t\t\t\t\tprevious = dataItem;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (let i = endIndex + 1; i < len; i++) {\n\t\t\t\t\tthis._toggleColumn(this.dataItems[i], false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis._skipped = true;\n\t\t}\n\t\tthis.updateLegendMarker(this.get(\"tooltipDataItem\"));\n\t\tsuper._updateChildren();\n\t}\n\n\n\tprotected _createGraphics(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tlet graphics = dataItem.get(\"graphics\");\n\t\tif (!graphics) {\n\n\t\t\tgraphics = this._makeGraphics(this.columns, dataItem);\n\t\t\tdataItem.set(\"graphics\", graphics);\n\t\t\tgraphics._setDataItem(dataItem);\n\n\t\t\tconst legendDataItem = dataItem.get(\"legendDataItem\");\n\t\t\tif (legendDataItem) {\n\t\t\t\tconst markerRectangle = legendDataItem.get(\"markerRectangle\");\n\t\t\t\tif (markerRectangle) {\n\t\t\t\t\tconst ds = markerRectangle.states.lookup(\"default\")!;\n\t\t\t\t\t$array.each(visualSettings, (setting: any) => {\n\t\t\t\t\t\tconst value = graphics!.get(setting, this.get(setting));\n\t\t\t\t\t\tmarkerRectangle.set(setting, value);\n\t\t\t\t\t\tds.set(setting, value);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet graphicsArray: Array<Graphics> | undefined = dataItem.get(\"rangeGraphics\");\n\t\t\tif (graphicsArray) {\n\t\t\t\t$array.each(graphicsArray, (graphics) => {\n\t\t\t\t\tgraphics.dispose();\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tgraphicsArray = [];\n\t\t\tdataItem.setRaw(\"rangeGraphics\", graphicsArray);\n\n\t\t\tthis.axisRanges.each((axisRange) => {\n\t\t\t\tconst container = axisRange.container!;\n\t\t\t\tconst rangeGraphics = this._makeGraphics(axisRange.columns, dataItem);\n\t\t\t\tif (graphicsArray) {\n\t\t\t\t\tgraphicsArray.push(rangeGraphics);\n\t\t\t\t}\n\t\t\t\trangeGraphics.setPrivate(\"list\", axisRange.columns);\n\t\t\t\tcontainer.children.push(rangeGraphics);\n\t\t\t})\n\t\t}\n\t}\n\n\tpublic createAxisRange(axisDataItem: DataItem<IAxisDataItem>): this[\"_axisRangeType\"] {\n\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\tconst graphics = dataItem.get(\"graphics\");\n\t\t\tif (graphics) {\n\t\t\t\tgraphics.dispose();\n\t\t\t\tdataItem.set(\"graphics\", undefined);\n\t\t\t}\n\t\t})\n\n\t\treturn super.createAxisRange(axisDataItem);\n\t}\n\n\tprotected _updateGraphics(dataItem: DataItem<this[\"_dataItemSettings\"]>, previousDataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tlet graphics = dataItem.get(\"graphics\")!;\n\n\t\t//if (!graphics) {\n\t\t//\tthis._createGraphics(dataItem);\n\t\t//\tgraphics = dataItem.get(\"graphics\")!;\n\t\t//}\n\n\t\tconst xField = this._xField;\n\t\tconst yField = this._yField;\n\n\t\tconst valueX = dataItem.get(xField as any);\n\t\tconst valueY = dataItem.get(yField as any);\n\n\t\tif (valueX != null && valueY != null) {\n\t\t\tconst xOpenField = this._xOpenField;\n\t\t\tconst yOpenField = this._yOpenField;\n\n\t\t\tconst locationX = this.get(\"locationX\", dataItem.get(\"locationX\", 0.5));\n\t\t\tconst locationY = this.get(\"locationY\", dataItem.get(\"locationY\", 0.5));\n\n\t\t\tconst openLocationX = this.get(\"openLocationX\", dataItem.get(\"openLocationX\", locationX));\n\t\t\tconst openLocationY = this.get(\"openLocationY\", dataItem.get(\"openLocationY\", locationY));\n\n\t\t\tconst width = graphics.get(\"width\");\n\t\t\tconst height = graphics.get(\"height\");\n\n\t\t\tconst stacked = this.get(\"stacked\");\n\n\t\t\tconst xAxis = this.get(\"xAxis\");\n\t\t\tconst yAxis = this.get(\"yAxis\");\n\t\t\tconst baseAxis = this.get(\"baseAxis\");\n\n\t\t\tconst xStart = xAxis.get(\"start\");\n\t\t\tconst xEnd = xAxis.get(\"end\");\n\n\t\t\tconst yStart = yAxis.get(\"start\");\n\t\t\tconst yEnd = yAxis.get(\"end\");\n\n\t\t\tlet l!: number;\n\t\t\tlet r!: number;\n\t\t\tlet t!: number;\n\t\t\tlet b!: number;\n\n\t\t\tlet vcy = this.get(\"vcy\", 1);\n\t\t\tlet vcx = this.get(\"vcx\", 1);\n\n\t\t\tlet fitW = false;\n\t\t\tlet fitH = false;\n\n\t\t\tif (yAxis.isType<CategoryAxis<any>>(\"CategoryAxis\") && xAxis.isType<CategoryAxis<any>>(\"CategoryAxis\")) {\n\n\t\t\t\tlet startLocation = this._aLocationX0 + openLocationX - 0.5;\n\t\t\t\tlet endLocation = this._aLocationX1 + locationX - 0.5;\n\n\t\t\t\tif (width instanceof Percent) {\n\t\t\t\t\tlet offset: number = (endLocation - startLocation) * (1 - width.value) / 2;\n\t\t\t\t\tstartLocation += offset;\n\t\t\t\t\tendLocation -= offset;\n\t\t\t\t}\n\n\t\t\t\tl = xAxis.getDataItemPositionX(dataItem, xOpenField, startLocation, vcx);\n\t\t\t\tr = xAxis.getDataItemPositionX(dataItem, xField, endLocation, vcx);\n\n\t\t\t\tstartLocation = this._aLocationY0 + openLocationY - 0.5;\n\t\t\t\tendLocation = this._aLocationY1 + locationY - 0.5;\n\n\t\t\t\tif (height instanceof Percent) {\n\t\t\t\t\tlet offset: number = (endLocation - startLocation) * (1 - height.value) / 2;\n\t\t\t\t\tstartLocation += offset;\n\t\t\t\t\tendLocation -= offset;\n\t\t\t\t}\n\n\t\t\t\tt = yAxis.getDataItemPositionY(dataItem, yOpenField, startLocation, vcy);\n\t\t\t\tb = yAxis.getDataItemPositionY(dataItem, yField, endLocation, vcy);\n\n\t\t\t\tdataItem.setRaw(\"point\", { x: l + (r - l) / 2, y: t + (b - t) / 2 });\n\t\t\t}\n\t\t\telse if (xAxis === baseAxis) {\n\n\t\t\t\tlet startLocation = this._aLocationX0 + openLocationX - 0.5;\n\t\t\t\tlet endLocation = this._aLocationX1 + locationX - 0.5;\n\n\t\t\t\tif (width instanceof Percent) {\n\t\t\t\t\tlet offset: number = (endLocation - startLocation) * (1 - width.value) / 2;\n\t\t\t\t\tstartLocation += offset;\n\t\t\t\t\tendLocation -= offset;\n\t\t\t\t}\n\n\t\t\t\tl = xAxis.getDataItemPositionX(dataItem, xOpenField, startLocation, vcx);\n\t\t\t\tr = xAxis.getDataItemPositionX(dataItem, xField, endLocation, vcx);\n\t\t\t\tt = yAxis.getDataItemPositionY(dataItem, yField, locationY, vcy);\n\n\t\t\t\tif (this._yOpenField !== this._yField) {\n\t\t\t\t\tb = yAxis.getDataItemPositionY(dataItem, yOpenField, openLocationY, vcy);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (stacked) {\n\t\t\t\t\t\tlet stackToItemY = dataItem.get(\"stackToItemY\")!;\n\t\t\t\t\t\tif (stackToItemY) {\n\t\t\t\t\t\t\tb = yAxis.getDataItemPositionY(stackToItemY, yField, openLocationY, (stackToItemY.component as XYSeries).get(\"vcy\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tb = yAxis.basePosition();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tb = yAxis.basePosition();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdataItem.setRaw(\"point\", { x: l + (r - l) / 2, y: t });\n\n\t\t\t\tfitH = true;\n\t\t\t}\n\t\t\telse if (yAxis === baseAxis) {\n\t\t\t\tlet startLocation = this._aLocationY0 + openLocationY - 0.5;\n\t\t\t\tlet endLocation = this._aLocationY1 + locationY - 0.5;\n\n\t\t\t\tif (height instanceof Percent) {\n\t\t\t\t\tlet offset: number = (endLocation - startLocation) * (1 - height.value) / 2;\n\t\t\t\t\tstartLocation += offset;\n\t\t\t\t\tendLocation -= offset;\n\t\t\t\t}\n\n\t\t\t\tt = yAxis.getDataItemPositionY(dataItem, yOpenField, startLocation, vcy);\n\t\t\t\tb = yAxis.getDataItemPositionY(dataItem, yField, endLocation, vcy);\n\t\t\t\tr = xAxis.getDataItemPositionX(dataItem, xField, locationX, vcx);\n\n\t\t\t\tif (this._xOpenField !== this._xField) {\n\t\t\t\t\tl = xAxis.getDataItemPositionX(dataItem, xOpenField, openLocationX, vcx);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (stacked) {\n\t\t\t\t\t\tlet stackToItemX = dataItem.get(\"stackToItemX\")!;\n\t\t\t\t\t\tif (stackToItemX) {\n\t\t\t\t\t\t\tl = xAxis.getDataItemPositionX(stackToItemX, xField, openLocationX, (stackToItemX.component as XYSeries).get(\"vcx\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tl = xAxis.basePosition();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tl = xAxis.basePosition();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfitW = true;\n\n\t\t\t\tdataItem.setRaw(\"point\", { x: r, y: t + (b - t) / 2 });\n\t\t\t}\n\n\t\t\tthis._updateSeriesGraphics(dataItem, graphics!, l, r, t, b, fitW, fitH);\n\n\t\t\tif ((l < xStart && r < xStart) || (l > xEnd && r > xEnd) || (t < yStart && b <= yStart) || (t >= yEnd && b > yEnd) || $type.isNaN(l) || $type.isNaN(t)) {\n\t\t\t\tthis._toggleColumn(dataItem, false);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._toggleColumn(dataItem, true);\n\t\t\t}\n\n\t\t\tlet rangeGraphics = dataItem.get(\"rangeGraphics\")!;\n\t\t\tif (rangeGraphics) {\n\t\t\t\t$array.each(rangeGraphics, (graphics) => {\n\t\t\t\t\tthis._updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH);\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tthis._applyGraphicsStates(dataItem, previousDataItem);\n\t\t}\n\t\telse {\n\t\t\tthis._toggleColumn(dataItem, false);\n\t\t}\n\t}\n\n\tprotected _updateSeriesGraphics(dataItem: DataItem<this[\"_dataItemSettings\"]>, graphics: Graphics, l: number, r: number, t: number, b: number, fitW: boolean, fitH: boolean) {\n\t\tconst width = graphics.get(\"width\");\n\t\tconst height = graphics.get(\"height\");\n\t\tconst maxWidth = graphics.get(\"maxWidth\");\n\t\tconst maxHeight = graphics.get(\"maxHeight\");\n\n\t\tconst ptl = this.getPoint(l, t);\n\t\tconst pbr = this.getPoint(r, b);\n\n\t\tconst tooltipPoint = dataItem.get(\"point\");\n\n\t\tif (tooltipPoint) {\n\t\t\tconst point = this.getPoint(tooltipPoint.x, tooltipPoint.y);\n\t\t\ttooltipPoint.x = point.x + this._x;\n\t\t\ttooltipPoint.y = point.y + this._y;\n\t\t}\n\n\t\tl = ptl.x;\n\t\tr = pbr.x;\n\n\t\tt = ptl.y;\n\t\tb = pbr.y;\n\n\t\tif ($type.isNumber(width)) {\n\t\t\tconst offset: number = ((r - l) - width) / 2;\n\t\t\tl += offset;\n\t\t\tr -= offset;\n\t\t}\n\n\t\tif ($type.isNumber(maxWidth) && maxWidth < Math.abs(r - l)) {\n\t\t\tconst offset: number = ((r - l) - maxWidth) / 2;\n\t\t\tl += offset;\n\t\t\tr -= offset;\n\t\t}\n\n\t\tif ($type.isNumber(height)) {\n\t\t\tconst offset: number = ((b - t) - height) / 2;\n\t\t\tt += offset;\n\t\t\tb -= offset;\n\t\t}\n\n\t\tif ($type.isNumber(maxHeight) && maxHeight < Math.abs(b - t)) {\n\t\t\tconst offset: number = ((b - t) - maxHeight) / 2;\n\t\t\tt += offset;\n\t\t\tb -= offset;\n\t\t}\n\n\t\tif (this.get(\"adjustBulletPosition\")) {\n\t\t\tif (fitW) {\n\t\t\t\tr = Math.min(Math.max(0, r), this._pw);\n\t\t\t\tl = Math.min(Math.max(0, l), this._pw);\n\t\t\t}\n\n\t\t\tif (fitH) {\n\t\t\t\tt = Math.min(Math.max(0, t), this._ph);\n\t\t\t\tb = Math.min(Math.max(0, b), this._ph);\n\t\t\t}\n\t\t}\n\n\t\tdataItem.setRaw(\"left\", l);\n\t\tdataItem.setRaw(\"right\", r);\n\t\tdataItem.setRaw(\"top\", t);\n\t\tdataItem.setRaw(\"bottom\", b);\n\n\t\tgraphics.setPrivate(\"width\", r - l);\n\t\tgraphics.setPrivate(\"height\", b - t);\n\t\tgraphics.set(\"x\", l);\n\t\tgraphics.set(\"y\", b - (b - t));\n\t}\n\n\tprotected _handleDataSetChange() {\n\t\tsuper._handleDataSetChange();\n\t\t$array.each(this._dataItems, (dataItem) => {\n\t\t\tthis._toggleColumn(dataItem, false);\n\t\t})\n\t}\n\n\tpublic _applyGraphicsStates(dataItem: DataItem<this[\"_dataItemSettings\"]>, previousDataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\n\t\tconst graphics = dataItem.get(\"graphics\")!;\n\n\t\tconst dropFromOpen = graphics.states.lookup(\"dropFromOpen\");\n\t\tconst riseFromOpen = graphics.states.lookup(\"riseFromOpen\");\n\n\t\tconst dropFromPrevious = graphics.states.lookup(\"dropFromPrevious\");\n\t\tconst riseFromPrevious = graphics.states.lookup(\"riseFromPrevious\");\n\n\t\tif (dropFromOpen || dropFromPrevious || riseFromOpen || riseFromPrevious) {\n\t\t\tconst xAxis = this.get(\"xAxis\");\n\t\t\tconst yAxis = this.get(\"yAxis\");\n\t\t\tconst baseAxis = this.get(\"baseAxis\");\n\n\t\t\tlet open: number | undefined;\n\t\t\tlet close: number | undefined;\n\t\t\tlet previousClose: number | undefined;\n\n\t\t\tif (baseAxis === xAxis && yAxis.isType<ValueAxis<any>>(\"ValueAxis\")) {\n\t\t\t\topen = dataItem.get(this._yOpenField as any);\n\t\t\t\tclose = dataItem.get(this._yField as any);\n\n\t\t\t\tpreviousClose = previousDataItem.get(this._yField as any);\n\t\t\t}\n\t\t\telse if (baseAxis === yAxis && xAxis.isType<ValueAxis<any>>(\"ValueAxis\")) {\n\t\t\t\topen = dataItem.get(this._xOpenField as any);\n\t\t\t\tclose = dataItem.get(this._xField as any);\n\n\t\t\t\tpreviousClose = previousDataItem.get(this._xField as any);\n\t\t\t}\n\n\t\t\tif ($type.isNumber(open) && $type.isNumber(close)) {\n\t\t\t\tif (close < open) {\n\t\t\t\t\tif (dropFromOpen) {\n\t\t\t\t\t\tdropFromOpen.apply();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (riseFromOpen) {\n\t\t\t\t\t\triseFromOpen.apply();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ($type.isNumber(previousClose)) {\n\t\t\t\t\tif (close < previousClose) {\n\t\t\t\t\t\tif (dropFromPrevious) {\n\t\t\t\t\t\t\tdropFromPrevious.apply();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (riseFromPrevious) {\n\t\t\t\t\t\t\triseFromPrevious.apply();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.disposeDataItem(dataItem);\n\t\tconst graphics = dataItem.get(\"graphics\");\n\t\tif (graphics) {\n\t\t\tthis.columns.removeValue(graphics);\n\t\t\tgraphics.dispose();\n\t\t}\n\n\t\tconst rangeGraphics = dataItem.get(\"rangeGraphics\")!;\n\t\tif (rangeGraphics) {\n\t\t\t$array.each(rangeGraphics, (graphics) => {\n\t\t\t\tconst list = graphics.getPrivate(\"list\");\n\t\t\t\tif (list) {\n\t\t\t\t\tlist.removeValue(graphics);\n\t\t\t\t}\n\t\t\t\tgraphics.dispose();\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * Hides series's data item.\n\t * \n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async hideDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.hideDataItem(dataItem, duration)];\n\t\tconst graphics = dataItem.get(\"graphics\");\n\t\tif (graphics) {\n\t\t\tpromises.push(graphics.hide(duration));\n\t\t}\n\n\t\tconst rangeGraphics = dataItem.get(\"rangeGraphics\")!;\n\t\tif (rangeGraphics) {\n\t\t\t$array.each(rangeGraphics, (graphics) => {\n\t\t\t\tpromises.push(graphics.hide(duration));\n\t\t\t})\n\t\t}\n\n\t\tawait Promise.all(promises);\n\t}\n\n\tprotected _toggleColumn(dataItem: DataItem<this[\"_dataItemSettings\"]>, visible: boolean) {\n\t\tconst graphics = dataItem.get(\"graphics\");\n\t\tif (graphics) {\n\t\t\tgraphics.setPrivate(\"visible\", visible);\n\t\t}\n\n\t\tconst rangeGraphics = dataItem.get(\"rangeGraphics\")!;\n\t\tif (rangeGraphics) {\n\t\t\t$array.each(rangeGraphics, (graphics) => {\n\t\t\t\tgraphics.setPrivate(\"visible\", visible);\n\t\t\t})\n\t\t}\n\n\t\tconst bullets = dataItem.bullets;\n\t\tif (bullets) {\n\t\t\t$array.each(bullets, (bullet) => {\n\t\t\t\tbullet.setPrivate(\"hidden\", !visible);\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * Shows series's data item.\n\t * \n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async showDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.showDataItem(dataItem, duration)];\n\t\tconst graphics = dataItem.get(\"graphics\");\n\t\tif (graphics) {\n\t\t\tpromises.push(graphics.show(duration));\n\t\t}\n\n\t\tconst rangeGraphics = dataItem.get(\"rangeGraphics\")!;\n\t\tif (rangeGraphics) {\n\t\t\t$array.each(rangeGraphics, (graphics) => {\n\t\t\t\tpromises.push(graphics.show(duration));\n\t\t\t})\n\t\t}\n\n\t\tawait Promise.all(promises);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateLegendMarker(dataItem?: DataItem<IBaseColumnSeriesDataItem>) {\n\t\tlet legendDataItem = this.get(\"legendDataItem\");\n\n\t\tif (this.get(\"useLastColorForLegendMarker\")) {\n\t\t\tif (!dataItem) {\n\t\t\t\tconst lastDataItem = this.dataItems[this.endIndex() - 1];\n\t\t\t\tif (lastDataItem) {\n\t\t\t\t\tdataItem = lastDataItem;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (legendDataItem) {\n\n\t\t\tlet graphics: Template<Graphics> | Graphics = this.columns.template;\n\t\t\tif (dataItem) {\n\t\t\t\tlet column = dataItem.get(\"graphics\");\n\t\t\t\tif (column) {\n\t\t\t\t\tgraphics = column;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst markerRectangle = legendDataItem.get(\"markerRectangle\");\n\n\t\t\tif (markerRectangle) {\n\t\t\t\tif (!legendDataItem.get(\"itemContainer\").get(\"disabled\")) {\n\t\t\t\t\tconst ds = markerRectangle.states.lookup(\"default\")!;\n\t\t\t\t\t$array.each(visualSettings, (setting: any) => {\n\t\t\t\t\t\tconst value = graphics.get(setting, this.get(setting));\n\t\t\t\t\t\tmarkerRectangle.set(setting, value);\n\t\t\t\t\t\tds.set(setting, value);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\tprotected _getTooltipTarget(dataItem: DataItem<this[\"_dataItemSettings\"]>): Sprite {\n\t\tif (this.get(\"seriesTooltipTarget\") == \"bullet\") {\n\t\t\treturn super._getTooltipTarget(dataItem);\n\t\t}\n\n\t\tlet column = dataItem.get(\"graphics\");\n\t\tif (column) {\n\t\t\treturn column;\n\t\t}\n\t\treturn this;\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}