{"ast":null,"code":";\nimport { XYChartDefaultTheme } from \"./XYChartDefaultTheme\";\nimport { Container } from \"../../core/render/Container\";\nimport { Rectangle } from \"../../core/render/Rectangle\";\nimport { SerialChart } from \"../../core/render/SerialChart\";\nimport { ListAutoDispose } from \"../../core/util/List\";\nimport { p100 } from \"../../core/util/Percent\";\nimport { Button } from \"../../core/render/Button\";\nimport { Graphics } from \"../../core/render/Graphics\";\nimport { Percent } from \"../../core/util/Percent\";\nimport * as $array from \"../../core/util/Array\";\nimport * as $type from \"../../core/util/Type\";\nimport * as $order from \"../../core/util/Order\";\nimport * as $object from \"../../core/util/Object\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as $math from \"../../core/util/Math\";\n/**\r\n * Creates an XY chart.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/} for more info\r\n * @important\r\n */\nexport class XYChart extends SerialChart {\n  constructor() {\n    super(...arguments);\n    /**\r\n     * A list of horizontal axes.\r\n     */\n    Object.defineProperty(this, \"xAxes\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: new ListAutoDispose()\n    });\n    /**\r\n     * A list of vertical axes.\r\n     */\n    Object.defineProperty(this, \"yAxes\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: new ListAutoDispose()\n    });\n    /**\r\n     * A [[Container]] located on top of the chart, used to store top horizontal\r\n     * axes.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n     * @default Container.new()\r\n     */\n    Object.defineProperty(this, \"topAxesContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: this.chartContainer.children.push(Container.new(this._root, {\n        width: p100,\n        layout: this._root.verticalLayout\n      }))\n    });\n    /**\r\n     * A [[Container]] located in the middle the chart, used to store vertical axes\r\n     * and plot area container.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n     * @default Container.new()\r\n     */\n    Object.defineProperty(this, \"yAxesAndPlotContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: this.chartContainer.children.push(Container.new(this._root, {\n        width: p100,\n        height: p100,\n        layout: this._root.horizontalLayout\n      }))\n    });\n    /**\r\n     * A [[Container]] located on bottom of the chart, used to store bottom\r\n     * horizontal axes.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n     * @default Container.new()\r\n     */\n    Object.defineProperty(this, \"bottomAxesContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: this.chartContainer.children.push(Container.new(this._root, {\n        width: p100,\n        layout: this._root.verticalLayout\n      }))\n    });\n    /**\r\n     * A [[Container]] located on left of the chart, used to store left-hand\r\n     * vertical axes.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n     * @default Container.new()\r\n     */\n    Object.defineProperty(this, \"leftAxesContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: this.yAxesAndPlotContainer.children.push(Container.new(this._root, {\n        height: p100,\n        layout: this._root.horizontalLayout\n      }))\n    });\n    /**\r\n     * A [[Container]] located in the middle of the chart, used to store plotContainer and topPlotContainer\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n     * @default Container.new()\r\n     */\n    Object.defineProperty(this, \"plotsContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: this.yAxesAndPlotContainer.children.push(Container.new(this._root, {\n        width: p100,\n        height: p100,\n        maskContent: false\n      }))\n    });\n    /**\r\n     * A [[Container]] located in the middle of the chart, used to store actual\r\n     * plots (series).\r\n     *\r\n     * NOTE: `plotContainer` will automatically have its `background` preset. If\r\n     * you need to modify background or outline for chart's plot area, you can\r\n     * use `plotContainer.get(\"background\")` for that.*\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n     * @default Container.new()\r\n     */\n    Object.defineProperty(this, \"plotContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: this.plotsContainer.children.push(Container.new(this._root, {\n        width: p100,\n        height: p100\n      }))\n    });\n    /**\r\n     * A [[Container]] used for any elements that need to be displayed over\r\n     * regular `plotContainer`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n     * @default Container.new()\r\n     */\n    Object.defineProperty(this, \"topPlotContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: this.plotsContainer.children.push(Container.new(this._root, {\n        width: p100,\n        height: p100\n      }))\n    });\n    /**\r\n     * A [[Container]] axis grid elements are stored in.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n     * @default Container.new()\r\n     */\n    Object.defineProperty(this, \"gridContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: this.plotContainer.children.push(Container.new(this._root, {\n        width: p100,\n        height: p100,\n        isMeasured: false\n      }))\n    });\n    /**\r\n     * A [[Container]] axis background grid elements are stored in.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n     * @default Container.new()\r\n     */\n    Object.defineProperty(this, \"topGridContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: Container.new(this._root, {\n        width: p100,\n        height: p100,\n        isMeasured: false\n      })\n    });\n    /**\r\n     * A [[Container]] located on right of the chart, used to store right-hand\r\n     * vertical axes.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n     * @default Container.new()\r\n     */\n    Object.defineProperty(this, \"rightAxesContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: this.yAxesAndPlotContainer.children.push(Container.new(this._root, {\n        height: p100,\n        layout: this._root.horizontalLayout\n      }))\n    });\n    /**\r\n     * A [[Container]] axis headers are stored in.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-headers/} for more info\r\n     * @default Container.new()\r\n     */\n    Object.defineProperty(this, \"axisHeadersContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: this.plotContainer.children.push(Container.new(this._root, {}))\n    });\n    /**\r\n     * A button that is shown when chart is not fully zoomed out.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Zoom_out_button} for more info\r\n     * @default Button.new()\r\n     */\n    Object.defineProperty(this, \"zoomOutButton\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: this.topPlotContainer.children.push(Button.new(this._root, {\n        themeTags: [\"zoom\"],\n        icon: Graphics.new(this._root, {\n          themeTags: [\"button\", \"icon\"]\n        })\n      }))\n    });\n    Object.defineProperty(this, \"_movePoint\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: {\n        x: 0,\n        y: 0\n      }\n    });\n    Object.defineProperty(this, \"_wheelDp\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_otherCharts\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_movePoints\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, \"_downStartX\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_downEndX\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_downStartY\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_downEndY\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n  }\n  _afterNew() {\n    this._defaultThemes.push(XYChartDefaultTheme.new(this._root));\n    super._afterNew();\n    this._disposers.push(this.xAxes);\n    this._disposers.push(this.yAxes);\n    const root = this._root;\n    let verticalLayout = this._root.verticalLayout;\n    const zoomOutButton = this.zoomOutButton;\n    zoomOutButton.events.on(\"click\", () => {\n      this.zoomOut();\n    });\n    zoomOutButton.hide(0);\n    zoomOutButton.states.lookup(\"default\").set(\"opacity\", 1);\n    this.chartContainer.set(\"layout\", verticalLayout);\n    const plotContainer = this.plotContainer;\n    plotContainer.children.push(this.seriesContainer);\n    this._disposers.push(this._processAxis(this.xAxes, this.bottomAxesContainer));\n    this._disposers.push(this._processAxis(this.yAxes, this.leftAxesContainer));\n    plotContainer.children.push(this.topGridContainer);\n    plotContainer.children.push(this.bulletsContainer);\n    // Setting trasnparent background so that full body of the plot container\n    // is interactive\n    plotContainer.set(\"interactive\", true);\n    plotContainer.set(\"interactiveChildren\", false);\n    plotContainer.set(\"background\", Rectangle.new(root, {\n      themeTags: [\"plotbackground\", \"xy\", \"background\"]\n    }));\n    this._disposers.push(plotContainer.events.on(\"pointerdown\", event => {\n      this._handlePlotDown(event);\n    }));\n    this._disposers.push(plotContainer.events.on(\"globalpointerup\", event => {\n      this._handlePlotUp(event);\n    }));\n    this._disposers.push(plotContainer.events.on(\"globalpointermove\", event => {\n      this._handlePlotMove(event);\n    }));\n    this._maskGrid();\n    this._setUpTouch();\n  }\n  _beforeChanged() {\n    super._beforeChanged();\n    if (this.isDirty(\"pinchZoomX\") || this.isDirty(\"pinchZoomY\") || this.get(\"panX\") || this.get(\"panY\")) {\n      this._setUpTouch();\n    }\n  }\n  _setUpTouch() {\n    if (!this.plotContainer._display.cancelTouch) {\n      this.plotContainer._display.cancelTouch = this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\") || this.get(\"panX\") || this.get(\"panY\") ? true : false;\n    }\n  }\n  _maskGrid() {\n    this.gridContainer.set(\"maskContent\", true);\n    this.topGridContainer.set(\"maskContent\", true);\n  }\n  _removeSeries(series) {\n    series._unstack();\n    if (series._posXDp) {\n      series._posXDp.dispose();\n    }\n    if (series._posYDp) {\n      series._posYDp.dispose();\n    }\n    series.set(\"baseAxis\", undefined);\n    const xAxis = series.get(\"xAxis\");\n    if (xAxis) {\n      $array.remove(xAxis.series, series);\n      xAxis.markDirtyExtremes();\n    }\n    const yAxis = series.get(\"yAxis\");\n    if (yAxis) {\n      $array.remove(yAxis.series, series);\n      yAxis.markDirtyExtremes();\n    }\n    const cursor = this.get(\"cursor\");\n    if (cursor) {\n      const snapToSeries = cursor.get(\"snapToSeries\");\n      if (snapToSeries) {\n        $array.remove(snapToSeries, series);\n      }\n    }\n    super._removeSeries(series);\n  }\n  /**\r\n   * This method is invoked when mouse wheel is used over chart's plot\r\n   * container, and handles zooming/pan.\r\n   *\r\n   * You can invoke this method manually, if you need to mimic chart's wheel\r\n   * behavior over other elements of the chart.\r\n   */\n  handleWheel(event) {\n    const wheelX = this.get(\"wheelX\");\n    const wheelY = this.get(\"wheelY\");\n    const plotContainer = this.plotContainer;\n    const wheelEvent = event.originalEvent;\n    // Ignore wheel event if it is happening on a non-chart element, e.g. if\n    // some page element is over the chart.\n    let prevent = false;\n    if ($utils.isLocalEvent(wheelEvent, this)) {\n      prevent = true;\n    } else {\n      return;\n    }\n    const plotPoint = plotContainer.toLocal(event.point);\n    const wheelStep = this.get(\"wheelStep\", 0.2);\n    const shiftY = wheelEvent.deltaY / 100;\n    const shiftX = wheelEvent.deltaX / 100;\n    const wheelZoomPositionX = this.get(\"wheelZoomPositionX\");\n    const wheelZoomPositionY = this.get(\"wheelZoomPositionY\");\n    if ((wheelX === \"zoomX\" || wheelX === \"zoomXY\") && shiftX != 0) {\n      this.xAxes.each(axis => {\n        if (axis.get(\"zoomX\")) {\n          let start = axis.get(\"start\");\n          let end = axis.get(\"end\");\n          let position = axis.fixPosition(plotPoint.x / plotContainer.width());\n          if (wheelZoomPositionX != null) {\n            position = wheelZoomPositionX;\n          }\n          let maxDeviation = axis.get(\"maxDeviation\", 0);\n          let newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftX * position));\n          let newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftX * (1 - position)));\n          if (newStart == start && newEnd == end) {\n            prevent = false;\n          }\n          if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\n            this._handleWheelAnimation(axis.zoom(newStart, newEnd));\n          } else {\n            prevent = false;\n          }\n        }\n      });\n    }\n    if ((wheelY === \"zoomX\" || wheelY === \"zoomXY\") && shiftY != 0) {\n      this.xAxes.each(axis => {\n        if (axis.get(\"zoomX\")) {\n          let start = axis.get(\"start\");\n          let end = axis.get(\"end\");\n          let position = axis.fixPosition(plotPoint.x / plotContainer.width());\n          if (wheelZoomPositionX != null) {\n            position = wheelZoomPositionX;\n          }\n          let maxDeviation = axis.get(\"maxDeviation\", 0);\n          let newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftY * position));\n          let newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftY * (1 - position)));\n          if (newStart == start && newEnd == end) {\n            prevent = false;\n          }\n          if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\n            this._handleWheelAnimation(axis.zoom(newStart, newEnd));\n          } else {\n            prevent = false;\n          }\n        }\n      });\n    }\n    if ((wheelX === \"zoomY\" || wheelX === \"zoomXY\") && shiftX != 0) {\n      this.yAxes.each(axis => {\n        if (axis.get(\"zoomY\")) {\n          let start = axis.get(\"start\");\n          let end = axis.get(\"end\");\n          let position = axis.fixPosition(plotPoint.y / plotContainer.height());\n          if (wheelZoomPositionY != null) {\n            position = wheelZoomPositionY;\n          }\n          let maxDeviation = axis.get(\"maxDeviation\", 0);\n          let newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftX * position));\n          let newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftX * (1 - position)));\n          if (newStart == start && newEnd == end) {\n            prevent = false;\n          }\n          if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\n            this._handleWheelAnimation(axis.zoom(newStart, newEnd));\n          } else {\n            prevent = false;\n          }\n        }\n      });\n    }\n    if ((wheelY === \"zoomY\" || wheelY === \"zoomXY\") && shiftY != 0) {\n      this.yAxes.each(axis => {\n        if (axis.get(\"zoomY\")) {\n          let start = axis.get(\"start\");\n          let end = axis.get(\"end\");\n          let position = axis.fixPosition(plotPoint.y / plotContainer.height());\n          if (wheelZoomPositionY != null) {\n            position = wheelZoomPositionY;\n          }\n          let maxDeviation = axis.get(\"maxDeviation\", 0);\n          let newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftY * position));\n          let newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftY * (1 - position)));\n          if (newStart == start && newEnd == end) {\n            prevent = false;\n          }\n          if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\n            this._handleWheelAnimation(axis.zoom(newStart, newEnd));\n          } else {\n            prevent = false;\n          }\n        }\n      });\n    }\n    if ((wheelX === \"panX\" || wheelX === \"panXY\") && shiftX != 0) {\n      this.xAxes.each(axis => {\n        if (axis.get(\"panX\")) {\n          let start = axis.get(\"start\");\n          let end = axis.get(\"end\");\n          let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftX;\n          let newStart = start + delta;\n          let newEnd = end + delta;\n          let se = this._fixWheel(newStart, newEnd);\n          newStart = se[0];\n          newEnd = se[1];\n          if (newStart == start && newEnd == end) {\n            prevent = false;\n          }\n          this._handleWheelAnimation(axis.zoom(newStart, newEnd));\n        }\n      });\n    }\n    if ((wheelY === \"panX\" || wheelY === \"panXY\") && shiftY != 0) {\n      this.xAxes.each(axis => {\n        if (axis.get(\"panX\")) {\n          let start = axis.get(\"start\");\n          let end = axis.get(\"end\");\n          let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftY;\n          let newStart = start + delta;\n          let newEnd = end + delta;\n          let se = this._fixWheel(newStart, newEnd);\n          newStart = se[0];\n          newEnd = se[1];\n          if (newStart == start && newEnd == end) {\n            prevent = false;\n          }\n          this._handleWheelAnimation(axis.zoom(newStart, newEnd));\n        }\n      });\n    }\n    if ((wheelX === \"panY\" || wheelX === \"panXY\") && shiftX != 0) {\n      this.yAxes.each(axis => {\n        if (axis.get(\"panY\")) {\n          let start = axis.get(\"start\");\n          let end = axis.get(\"end\");\n          let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftX;\n          let newStart = start + delta;\n          let newEnd = end + delta;\n          let se = this._fixWheel(newStart, newEnd);\n          newStart = se[0];\n          newEnd = se[1];\n          if (newStart == start && newEnd == end) {\n            prevent = false;\n          }\n          this._handleWheelAnimation(axis.zoom(newStart, newEnd));\n        }\n      });\n    }\n    if ((wheelY === \"panY\" || wheelY === \"panXY\") && shiftY != 0) {\n      this.yAxes.each(axis => {\n        if (axis.get(\"panY\")) {\n          let start = axis.get(\"start\");\n          let end = axis.get(\"end\");\n          let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftY;\n          let newStart = start - delta;\n          let newEnd = end - delta;\n          let se = this._fixWheel(newStart, newEnd);\n          newStart = se[0];\n          newEnd = se[1];\n          if (newStart == start && newEnd == end) {\n            prevent = false;\n          }\n          this._handleWheelAnimation(axis.zoom(newStart, newEnd));\n        }\n      });\n    }\n    if (prevent) {\n      wheelEvent.preventDefault();\n    }\n  }\n  _handleSetWheel() {\n    const wheelX = this.get(\"wheelX\");\n    const wheelY = this.get(\"wheelY\");\n    const plotContainer = this.plotContainer;\n    if (wheelX !== \"none\" || wheelY !== \"none\") {\n      this._wheelDp = plotContainer.events.on(\"wheel\", event => {\n        const wheelEvent = event.originalEvent;\n        if (wheelX !== \"none\" && Math.abs(wheelEvent.deltaX) != 0 || wheelY !== \"none\" && Math.abs(wheelEvent.deltaY) != 0) {\n          this.handleWheel(event);\n        }\n      });\n      this._disposers.push(this._wheelDp);\n    } else {\n      if (this._wheelDp) {\n        this._wheelDp.dispose();\n      }\n    }\n  }\n  _getWheelSign(axis) {\n    let sign = 1;\n    if (axis.get(\"renderer\").get(\"inversed\")) {\n      sign = -1;\n    }\n    return sign;\n  }\n  _fixWheel(start, end) {\n    const diff = end - start;\n    if (start < 0) {\n      start = 0;\n      end = start + diff;\n    }\n    if (end > 1) {\n      end = 1;\n      start = end - diff;\n    }\n    return [start, end];\n  }\n  _handlePlotDown(event) {\n    const originalEvent = event.originalEvent;\n    if (originalEvent.button == 2) {\n      return;\n    }\n    const plotContainer = this.plotContainer;\n    let local = plotContainer.toLocal(event.point);\n    if (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\")) {\n      const pointerId = originalEvent.pointerId;\n      if (pointerId) {\n        if ($object.keys(plotContainer._downPoints).length > 0) {\n          const xAxis = this.xAxes.getIndex(0);\n          const yAxis = this.yAxes.getIndex(0);\n          if (xAxis) {\n            this._downStartX = xAxis.get(\"start\", 0);\n            this._downEndX = xAxis.get(\"end\", 1);\n          }\n          if (yAxis) {\n            this._downStartY = yAxis.get(\"start\", 0);\n            this._downEndY = yAxis.get(\"end\", 1);\n          }\n        }\n      }\n    }\n    if (this.get(\"panX\") || this.get(\"panY\")) {\n      if (local.x >= 0 && local.y >= 0 && local.x <= plotContainer.width() && local.y <= this.height()) {\n        //this._downPoint = local;\n        this._downPoint = {\n          x: originalEvent.clientX,\n          y: originalEvent.clientY\n        };\n        const panX = this.get(\"panX\");\n        const panY = this.get(\"panY\");\n        if (panX) {\n          this.xAxes.each(axis => {\n            axis._panStart = axis.get(\"start\");\n            axis._panEnd = axis.get(\"end\");\n          });\n        }\n        if (panY) {\n          this.yAxes.each(axis => {\n            axis._panStart = axis.get(\"start\");\n            axis._panEnd = axis.get(\"end\");\n          });\n        }\n        const eventType = \"panstarted\";\n        if (this.events.isEnabled(eventType)) {\n          this.events.dispatch(eventType, {\n            type: eventType,\n            target: this,\n            originalEvent: event.originalEvent\n          });\n        }\n      }\n    }\n  }\n  _handleWheelAnimation(animation) {\n    if (animation) {\n      animation.events.on(\"stopped\", () => {\n        this._dispatchWheelAnimation();\n      });\n    } else {\n      this._dispatchWheelAnimation();\n    }\n  }\n  _dispatchWheelAnimation() {\n    const eventType = \"wheelended\";\n    if (this.events.isEnabled(eventType)) {\n      this.events.dispatch(eventType, {\n        type: eventType,\n        target: this\n      });\n    }\n  }\n  _handlePlotUp(event) {\n    const downPoint = this._downPoint;\n    if (downPoint) {\n      if (this.get(\"panX\") || this.get(\"panY\")) {\n        if (event.originalEvent.clientX == downPoint.x && event.originalEvent.clientY == downPoint.y) {\n          const eventType = \"pancancelled\";\n          if (this.events.isEnabled(eventType)) {\n            this.events.dispatch(eventType, {\n              type: eventType,\n              target: this,\n              originalEvent: event.originalEvent\n            });\n          }\n        }\n        const eventType = \"panended\";\n        if (this.events.isEnabled(eventType)) {\n          this.events.dispatch(eventType, {\n            type: eventType,\n            target: this,\n            originalEvent: event.originalEvent\n          });\n        }\n      }\n    }\n    // TODO: handle multitouch\n    this._downPoint = undefined;\n    this.xAxes.each(xAxis => {\n      xAxis._isPanning = false;\n    });\n    this.yAxes.each(yAxis => {\n      yAxis._isPanning = false;\n    });\n  }\n  _handlePlotMove(event) {\n    const plotContainer = this.plotContainer;\n    if (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\")) {\n      const touchEvent = event.originalEvent;\n      const pointerId = touchEvent.pointerId;\n      if (pointerId) {\n        this._movePoints[pointerId] = event.point;\n        if ($object.keys(plotContainer._downPoints).length > 1) {\n          this._handlePinch();\n          return;\n        }\n      }\n    }\n    let downPoint = this._downPoint;\n    if (downPoint) {\n      downPoint = plotContainer.toLocal(this._root.documentPointToRoot(downPoint));\n      let local = plotContainer.toLocal(event.point);\n      const panX = this.get(\"panX\");\n      const panY = this.get(\"panY\");\n      if (panX) {\n        let scrollbarX = this.get(\"scrollbarX\");\n        if (scrollbarX) {\n          scrollbarX.events.disableType(\"rangechanged\");\n        }\n        this.xAxes.each(axis => {\n          if (axis.get(\"panX\")) {\n            axis._isPanning = true;\n            //const maxDeviation = axis.get(\"maxDeviation\", 0);\n            let panStart = axis._panStart;\n            let panEnd = axis._panEnd;\n            let difference = panEnd - panStart;\n            let deltaX = difference * (downPoint.x - local.x) / plotContainer.width();\n            if (axis.get(\"renderer\").get(\"inversed\")) {\n              deltaX *= -1;\n            }\n            let start = panStart + deltaX;\n            let end = panEnd + deltaX;\n            if (end - start < 1 + axis.get(\"maxDeviation\", 1) * 2) {\n              axis.set(\"start\", start);\n              axis.set(\"end\", end);\n            }\n          }\n        });\n        if (scrollbarX) {\n          scrollbarX.events.enableType(\"rangechanged\");\n        }\n      }\n      if (panY) {\n        let scrollbarY = this.get(\"scrollbarY\");\n        if (scrollbarY) {\n          scrollbarY.events.disableType(\"rangechanged\");\n        }\n        this.yAxes.each(axis => {\n          if (axis.get(\"panY\")) {\n            axis._isPanning = true;\n            //const maxDeviation = axis.get(\"maxDeviation\", 0);\n            let panStart = axis._panStart;\n            let panEnd = axis._panEnd;\n            let difference = panEnd - panStart;\n            let deltaY = difference * (downPoint.y - local.y) / plotContainer.height();\n            if (axis.get(\"renderer\").get(\"inversed\")) {\n              deltaY *= -1;\n            }\n            let start = panStart - deltaY;\n            let end = panEnd - deltaY;\n            if (end - start < 1 + axis.get(\"maxDeviation\", 1) * 2) {\n              axis.set(\"start\", start);\n              axis.set(\"end\", end);\n            }\n          }\n        });\n        if (scrollbarY) {\n          scrollbarY.events.enableType(\"rangechanged\");\n        }\n      }\n    }\n  }\n  _handlePinch() {\n    const plotContainer = this.plotContainer;\n    let i = 0;\n    let downPoints = [];\n    let movePoints = [];\n    $object.each(plotContainer._downPoints, (k, point) => {\n      downPoints[i] = point;\n      let movePoint = this._movePoints[k];\n      if (movePoint) {\n        movePoints[i] = movePoint;\n      }\n      i++;\n    });\n    if (downPoints.length > 1 && movePoints.length > 1) {\n      const w = plotContainer.width();\n      const h = plotContainer.height();\n      let downPoint0 = downPoints[0];\n      let downPoint1 = downPoints[1];\n      let movePoint0 = movePoints[0];\n      let movePoint1 = movePoints[1];\n      if (downPoint0 && downPoint1 && movePoint0 && movePoint1) {\n        movePoint0 = plotContainer.toLocal(movePoint0);\n        movePoint1 = plotContainer.toLocal(movePoint1);\n        downPoint0 = plotContainer.toLocal(downPoint0);\n        downPoint1 = plotContainer.toLocal(downPoint1);\n        if (this.get(\"pinchZoomX\")) {\n          const downStartX = this._downStartX;\n          const downEndX = this._downEndX;\n          if (downStartX != null && downEndX != null) {\n            if (downPoint0.x > downPoint1.x) {\n              [downPoint0, downPoint1] = [downPoint1, downPoint0];\n              [movePoint0, movePoint1] = [movePoint1, movePoint0];\n            }\n            let downPos0 = downStartX + downPoint0.x / w * (downEndX - downStartX);\n            let downPos1 = downStartX + downPoint1.x / w * (downEndX - downStartX);\n            let movePos0 = downStartX + movePoint0.x / w * (downEndX - downStartX);\n            let movePos1 = downStartX + movePoint1.x / w * (downEndX - downStartX);\n            let initialDistance = Math.max(0.001, downPos1 - downPos0);\n            let currentDistance = Math.max(0.001, movePos1 - movePos0);\n            let d = initialDistance / currentDistance;\n            let s = downStartX * d + downPos0 - movePos0 * d;\n            let e = downEndX * d + downPos1 - movePos1 * d;\n            this.xAxes.each(xAxis => {\n              let sa = xAxis.fixPosition(s);\n              let ea = xAxis.fixPosition(e);\n              xAxis.zoom(sa, ea, 0);\n            });\n          }\n        }\n        if (this.get(\"pinchZoomY\")) {\n          const downStartY = this._downStartY;\n          const downEndY = this._downEndY;\n          if (downStartY != null && downEndY != null) {\n            if (downPoint0.y < downPoint1.y) {\n              [downPoint0, downPoint1] = [downPoint1, downPoint0];\n              [movePoint0, movePoint1] = [movePoint1, movePoint0];\n            }\n            let downPos0 = downStartY + (1 - downPoint0.y / h) * (downEndY - downStartY);\n            let downPos1 = downStartY + (1 - downPoint1.y / h) * (downEndY - downStartY);\n            let movePos0 = downStartY + (1 - movePoint0.y / h) * (downEndY - downStartY);\n            let movePos1 = downStartY + (1 - movePoint1.y / h) * (downEndY - downStartY);\n            let initialDistance = Math.max(0.001, downPos1 - downPos0);\n            let currentDistance = Math.max(0.001, movePos1 - movePos0);\n            let d = initialDistance / currentDistance;\n            let s = downStartY * d + downPos0 - movePos0 * d;\n            let e = downEndY * d + downPos1 - movePos1 * d;\n            this.yAxes.each(yAxis => {\n              let sa = yAxis.fixPosition(s);\n              let ea = yAxis.fixPosition(e);\n              yAxis.zoom(sa, ea, 0);\n            });\n          }\n        }\n      }\n    }\n  }\n  _handleCursorPosition() {\n    const cursor = this.get(\"cursor\");\n    if (cursor) {\n      const cursorPoint = cursor.getPrivate(\"point\");\n      let snapToSeries = cursor.get(\"snapToSeries\");\n      if (cursor._downPoint) {\n        snapToSeries = undefined;\n      }\n      if (snapToSeries && cursorPoint) {\n        const snapToSeriesBy = cursor.get(\"snapToSeriesBy\");\n        const dataItems = [];\n        $array.each(snapToSeries, series => {\n          if (!series.isHidden() && !series.isHiding()) {\n            if (snapToSeriesBy != \"x!\" && snapToSeriesBy != \"y!\") {\n              const startIndex = series.startIndex();\n              const endIndex = series.endIndex();\n              for (let i = startIndex; i < endIndex; i++) {\n                const dataItem = series.dataItems[i];\n                if (dataItem && !dataItem.isHidden()) {\n                  dataItems.push(dataItem);\n                }\n              }\n            } else {\n              const tooltipDataItem = series.get(\"tooltipDataItem\");\n              if (tooltipDataItem) {\n                dataItems.push(tooltipDataItem);\n              }\n            }\n          }\n        });\n        let minDistance = Infinity;\n        let closestItem;\n        $array.each(dataItems, dataItem => {\n          const point = dataItem.get(\"point\");\n          if (point) {\n            let distance = 0;\n            if (snapToSeriesBy == \"x\" || snapToSeriesBy == \"x!\") {\n              distance = Math.abs(cursorPoint.x - point.x);\n            } else if (snapToSeriesBy == \"y\" || snapToSeriesBy == \"y!\") {\n              distance = Math.abs(cursorPoint.y - point.y);\n            } else {\n              distance = Math.hypot(cursorPoint.x - point.x, cursorPoint.y - point.y);\n            }\n            if (distance < minDistance) {\n              minDistance = distance;\n              closestItem = dataItem;\n            }\n          }\n        });\n        $array.each(snapToSeries, series => {\n          const tooltip = series.get(\"tooltip\");\n          if (tooltip) {\n            tooltip._setDataItem(undefined);\n          }\n        });\n        if (closestItem) {\n          let series = closestItem.component;\n          series.showDataItemTooltip(closestItem);\n          series.setRaw(\"tooltipDataItem\", closestItem);\n          const point = closestItem.get(\"point\");\n          if (point) {\n            // removing x and y to solve #72225\n            cursor.handleMove(series.toGlobal({\n              x: point.x - series.x(),\n              y: point.y - series.y()\n            }), true);\n          }\n        }\n      }\n    }\n  }\n  _updateCursor() {\n    let cursor = this.get(\"cursor\");\n    if (cursor) {\n      cursor.updateCursor();\n    }\n  }\n  _addCursor(cursor) {\n    this.plotContainer.children.push(cursor);\n  }\n  _prepareChildren() {\n    super._prepareChildren();\n    this.series.each(series => {\n      this._colorize(series);\n    });\n    if (this.isDirty(\"wheelX\") || this.isDirty(\"wheelY\")) {\n      this._handleSetWheel();\n    }\n    if (this.isDirty(\"cursor\")) {\n      const previous = this._prevSettings.cursor;\n      const cursor = this.get(\"cursor\");\n      if (cursor !== previous) {\n        this._disposeProperty(\"cursor\");\n        if (previous) {\n          previous.dispose();\n        }\n        if (cursor) {\n          cursor._setChart(this);\n          this._addCursor(cursor);\n          this._pushPropertyDisposer(\"cursor\", cursor.events.on(\"selectended\", () => {\n            this._handleCursorSelectEnd();\n          }));\n        }\n        //this.setRaw(\"cursor\", cursor) // to reset previous value\n        this._prevSettings.cursor = cursor;\n      }\n    }\n    if (this.isDirty(\"scrollbarX\")) {\n      const previous = this._prevSettings.scrollbarX;\n      const scrollbarX = this.get(\"scrollbarX\");\n      if (scrollbarX !== previous) {\n        this._disposeProperty(\"scrollbarX\");\n        if (previous) {\n          previous.dispose();\n        }\n        if (scrollbarX) {\n          if (!scrollbarX.parent) {\n            this.topAxesContainer.children.push(scrollbarX);\n          }\n          this._pushPropertyDisposer(\"scrollbarX\", scrollbarX.events.on(\"rangechanged\", e => {\n            this._handleScrollbar(this.xAxes, e.start, e.end, e.grip);\n          }));\n          this._pushPropertyDisposer(\"scrollbarX\", scrollbarX.events.on(\"released\", () => {\n            this.xAxes.each(axis => {\n              if (axis.get(\"zoomable\")) {\n                this._handleAxisSelection(axis);\n              }\n            });\n          }));\n          // Used to populate `ariaLabel` with meaningful values\n          scrollbarX.setPrivate(\"positionTextFunction\", position => {\n            const axis = this.xAxes.getIndex(0);\n            return axis ? axis.getTooltipText(position, false) || \"\" : \"\";\n          });\n        }\n        this._prevSettings.scrollbarX = scrollbarX;\n      }\n    }\n    if (this.isDirty(\"scrollbarY\")) {\n      const previous = this._prevSettings.scrollbarY;\n      const scrollbarY = this.get(\"scrollbarY\");\n      if (scrollbarY !== previous) {\n        this._disposeProperty(\"scrollbarY\");\n        if (previous) {\n          previous.dispose();\n        }\n        if (scrollbarY) {\n          if (!scrollbarY.parent) {\n            this.rightAxesContainer.children.push(scrollbarY);\n          }\n          this._pushPropertyDisposer(\"scrollbarY\", scrollbarY.events.on(\"rangechanged\", e => {\n            this._handleScrollbar(this.yAxes, e.start, e.end, e.grip);\n          }));\n          this._pushPropertyDisposer(\"scrollbarY\", scrollbarY.events.on(\"released\", () => {\n            this.yAxes.each(axis => {\n              if (axis.get(\"zoomable\")) {\n                this._handleAxisSelection(axis);\n              }\n            });\n          }));\n          // Used to populate `ariaLabel` with meaningful values\n          scrollbarY.setPrivate(\"positionTextFunction\", position => {\n            const axis = this.yAxes.getIndex(0);\n            return axis ? axis.getTooltipText(position, false) || \"\" : \"\";\n          });\n        }\n        this._prevSettings.scrollbarY = scrollbarY;\n      }\n    }\n    this._handleZoomOut();\n  }\n  _processSeries(series) {\n    super._processSeries(series);\n    const xAxis = series.get(\"xAxis\");\n    const yAxis = series.get(\"yAxis\");\n    $array.move(xAxis.series, series);\n    $array.move(yAxis.series, series);\n    series._posXDp = series.addDisposer(xAxis.events.on(\"positionchanged\", () => {\n      series._fixPosition();\n    }));\n    series._posXDp = series.addDisposer(yAxis.events.on(\"positionchanged\", () => {\n      series._fixPosition();\n    }));\n    if (!series.get(\"baseAxis\")) {\n      if (yAxis.isType(\"CategoryAxis\") || yAxis.isType(\"DateAxis\")) {\n        series.set(\"baseAxis\", yAxis);\n      } else {\n        series.set(\"baseAxis\", xAxis);\n      }\n    }\n    if (series.get(\"stacked\")) {\n      series._markDirtyKey(\"stacked\");\n      $array.each(series.dataItems, dataItem => {\n        dataItem.set(\"stackToItemY\", undefined);\n        dataItem.set(\"stackToItemX\", undefined);\n      });\n    }\n    series._markDirtyAxes();\n    yAxis.markDirtyExtremes();\n    xAxis.markDirtyExtremes();\n    xAxis._seriesAdded = true;\n    yAxis._seriesAdded = true;\n    this._colorize(series);\n  }\n  _colorize(series) {\n    const colorSet = this.get(\"colors\");\n    if (colorSet) {\n      if (series.get(\"fill\") == null) {\n        const color = colorSet.next();\n        series._setSoft(\"stroke\", color);\n        series._setSoft(\"fill\", color);\n      }\n    }\n    const patternSet = this.get(\"patterns\");\n    if (patternSet) {\n      if (series.get(\"fillPattern\") == null) {\n        const pattern = patternSet.next();\n        series._setSoft(\"fillPattern\", pattern);\n      }\n    }\n  }\n  _handleCursorSelectEnd() {\n    const cursor = this.get(\"cursor\");\n    const behavior = cursor.get(\"behavior\");\n    const downPositionX = cursor.getPrivate(\"downPositionX\", 0);\n    const downPositionY = cursor.getPrivate(\"downPositionY\", 0);\n    const positionX = Math.min(1, Math.max(0, cursor.getPrivate(\"positionX\", 0.5)));\n    const positionY = Math.min(1, Math.max(0, cursor.getPrivate(\"positionY\", 0.5)));\n    this.xAxes.each(axis => {\n      if (behavior === \"zoomX\" || behavior === \"zoomXY\") {\n        let position0 = axis.toAxisPosition(downPositionX);\n        let position1 = axis.toAxisPosition(positionX);\n        axis.zoom(position0, position1);\n      }\n      axis.setPrivate(\"updateScrollbar\", true);\n    });\n    this.yAxes.each(axis => {\n      if (behavior === \"zoomY\" || behavior === \"zoomXY\") {\n        let position0 = axis.toAxisPosition(downPositionY);\n        let position1 = axis.toAxisPosition(positionY);\n        axis.zoom(position0, position1);\n      }\n      axis.setPrivate(\"updateScrollbar\", true);\n    });\n  }\n  _handleScrollbar(axes, start, end, priority) {\n    axes.each(axis => {\n      let axisStart = axis.fixPosition(start);\n      let axisEnd = axis.fixPosition(end);\n      let zoomAnimation = axis.zoom(axisStart, axisEnd, undefined, priority);\n      const updateScrollbar = \"updateScrollbar\";\n      axis.setPrivateRaw(updateScrollbar, false);\n      if (zoomAnimation) {\n        zoomAnimation.events.on(\"stopped\", () => {\n          axis.setPrivateRaw(updateScrollbar, true);\n        });\n      } else {\n        axis.setPrivateRaw(updateScrollbar, true);\n      }\n    });\n  }\n  _processAxis(axes, container) {\n    return axes.events.onAll(change => {\n      if (change.type === \"clear\") {\n        $array.each(change.oldValues, axis => {\n          this._removeAxis(axis);\n        });\n      } else if (change.type === \"push\") {\n        container.children.push(change.newValue);\n        change.newValue.processChart(this);\n      } else if (change.type === \"setIndex\") {\n        container.children.setIndex(change.index, change.newValue);\n        change.newValue.processChart(this);\n      } else if (change.type === \"insertIndex\") {\n        container.children.insertIndex(change.index, change.newValue);\n        change.newValue.processChart(this);\n      } else if (change.type === \"removeIndex\") {\n        this._removeAxis(change.oldValue);\n      } else if (change.type === \"moveIndex\") {\n        container.children.moveValue(change.value, change.newIndex);\n        change.value.processChart(this);\n      } else {\n        throw new Error(\"Unknown IListEvent type\");\n      }\n    });\n  }\n  _removeAxis(axis) {\n    if (!axis.isDisposed()) {\n      const axisParent = axis.parent;\n      if (axisParent) {\n        axisParent.children.removeValue(axis);\n      }\n      const gridContainer = axis.gridContainer;\n      const gridParent = gridContainer.parent;\n      if (gridParent) {\n        gridParent.children.removeValue(gridContainer);\n      }\n      const topGridContainer = axis.topGridContainer;\n      const topGridParent = topGridContainer.parent;\n      if (topGridParent) {\n        topGridParent.children.removeValue(topGridContainer);\n      }\n    }\n  }\n  _updateChartLayout() {\n    const left = this.leftAxesContainer.width();\n    const right = this.rightAxesContainer.width();\n    const bottomAxesContainer = this.bottomAxesContainer;\n    bottomAxesContainer.set(\"paddingLeft\", left);\n    bottomAxesContainer.set(\"paddingRight\", right);\n    const topAxesContainer = this.topAxesContainer;\n    topAxesContainer.set(\"paddingLeft\", left);\n    topAxesContainer.set(\"paddingRight\", right);\n  }\n  /**\r\n   * @ignore\r\n   */\n  processAxis(axis) {\n    var cursor = this.get(\"cursor\");\n    if (cursor) {\n      this.addDisposer(axis.on(\"start\", () => {\n        this._updateCursor();\n      }));\n      this.addDisposer(axis.on(\"end\", () => {\n        this._updateCursor();\n      }));\n    }\n  }\n  _handleAxisSelection(axis, force) {\n    let start = axis.fixPosition(axis.get(\"start\", 0));\n    let end = axis.fixPosition(axis.get(\"end\", 1));\n    if (start > end) {\n      [start, end] = [end, start];\n    }\n    if (this.xAxes.indexOf(axis) != -1) {\n      if (force || axis.getPrivate(\"updateScrollbar\")) {\n        let scrollbarX = this.get(\"scrollbarX\");\n        if (scrollbarX && (!scrollbarX.getPrivate(\"isBusy\") || force)) {\n          scrollbarX.setRaw(\"start\", start);\n          scrollbarX.setRaw(\"end\", end);\n          scrollbarX.updateGrips();\n        }\n      }\n    } else if (this.yAxes.indexOf(axis) != -1) {\n      if (force || axis.getPrivate(\"updateScrollbar\")) {\n        let scrollbarY = this.get(\"scrollbarY\");\n        if (scrollbarY && (!scrollbarY.getPrivate(\"isBusy\") || force)) {\n          scrollbarY.setRaw(\"start\", start);\n          scrollbarY.setRaw(\"end\", end);\n          scrollbarY.updateGrips();\n        }\n      }\n    }\n    this._handleZoomOut();\n  }\n  _handleZoomOut() {\n    let zoomOutButton = this.zoomOutButton;\n    if (zoomOutButton && zoomOutButton.parent) {\n      let visible = false;\n      this.xAxes.each(axis => {\n        if ($math.round(axis.get(\"start\", 0), 6) != 0 || $math.round(axis.get(\"end\", 1), 6) != 1) {\n          visible = true;\n        }\n      });\n      this.yAxes.each(axis => {\n        if ($math.round(axis.get(\"start\", 0), 6) != 0 || $math.round(axis.get(\"end\", 1), 6) != 1) {\n          visible = true;\n        }\n      });\n      if (visible) {\n        if (zoomOutButton.isHidden()) {\n          zoomOutButton.show();\n        }\n      } else {\n        zoomOutButton.hide();\n      }\n    }\n  }\n  /**\r\n   * Checks if point is within plot area.\r\n   *\r\n   * @param   point  Reference point\r\n   * @return         Is within plot area?\r\n   */\n  inPlot(point) {\n    const plotContainer = this.plotContainer;\n    const otherCharts = this.getPrivate(\"otherCharts\", this._otherCharts);\n    const global = plotContainer.toGlobal(point);\n    if (point.x >= -0.5 && point.y >= -0.5 && point.x <= plotContainer.width() + 0.5 && point.y <= plotContainer.height() + 0.5) {\n      return true;\n    }\n    if (otherCharts) {\n      for (let i = otherCharts.length - 1; i >= 0; i--) {\n        const chart = otherCharts[i];\n        if (chart != this) {\n          const chartPlotContainer = chart.plotContainer;\n          const documentPoint = this._root.rootPointToDocument(global);\n          const chartRoot = chart._root.documentPointToRoot(documentPoint);\n          const local = chartPlotContainer.toLocal(chartRoot);\n          if (local.x >= -0.1 && local.y >= -0.1 && local.x <= chartPlotContainer.width() + 0.1 && local.y <= chartPlotContainer.height() + 0.1) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n  /**\r\n   * @ignore\r\n   */\n  arrangeTooltips() {\n    const plotContainer = this.plotContainer;\n    const w = plotContainer.width();\n    const h = plotContainer.height();\n    const hh = this.height();\n    let plotT = plotContainer._display.toGlobal({\n      x: 0,\n      y: 0\n    });\n    let plotB = plotContainer._display.toGlobal({\n      x: w,\n      y: h\n    });\n    const tooltips = [];\n    let sum = 0;\n    let minDistance = Infinity;\n    let movePoint = this._movePoint;\n    let maxTooltipDistance = this.get(\"maxTooltipDistance\");\n    let maxTooltipDistanceBy = this.get(\"maxTooltipDistanceBy\", \"xy\");\n    let closest;\n    let closestPoint;\n    if ($type.isNumber(maxTooltipDistance)) {\n      this.series.each(series => {\n        if (!series.isHidden()) {\n          const tooltip = series.get(\"tooltip\");\n          if (tooltip) {\n            let point = tooltip.get(\"pointTo\");\n            if (point) {\n              let distance = Math.hypot(movePoint.x - point.x, movePoint.y - point.y);\n              if (maxTooltipDistanceBy == \"x\") {\n                distance = Math.abs(movePoint.x - point.x);\n              } else if (maxTooltipDistanceBy == \"y\") {\n                distance = Math.abs(movePoint.y - point.y);\n              }\n              if (distance < minDistance) {\n                minDistance = distance;\n                closest = series;\n                closestPoint = point;\n              }\n            }\n          }\n        }\n      });\n    }\n    const tooltipSeries = [];\n    this.series.each(series => {\n      const tooltip = series.get(\"tooltip\");\n      if (tooltip && !tooltip.get(\"forceHidden\")) {\n        let hidden = false;\n        let point = tooltip.get(\"pointTo\");\n        if (point) {\n          if (maxTooltipDistance >= 0) {\n            let point = tooltip.get(\"pointTo\");\n            if (point && closestPoint) {\n              if (series != closest) {\n                let distance = Math.hypot(closestPoint.x - point.x, closestPoint.y - point.y);\n                if (maxTooltipDistanceBy == \"x\") {\n                  distance = Math.abs(closestPoint.x - point.x);\n                } else if (maxTooltipDistanceBy == \"y\") {\n                  distance = Math.abs(closestPoint.y - point.y);\n                }\n                if (distance > maxTooltipDistance) {\n                  hidden = true;\n                }\n              }\n            }\n          } else if (maxTooltipDistance == -1) {\n            if (series != closest) {\n              hidden = true;\n            }\n          }\n          if (!this.inPlot(this._tooltipToLocal(point)) || !tooltip.dataItem) {\n            hidden = true;\n          } else {\n            if (!hidden) {\n              sum += point.y;\n            }\n          }\n          if (hidden || series.isHidden() || series.isHiding()) {\n            tooltip.hide(0);\n          } else {\n            tooltip.show();\n            tooltips.push(tooltip);\n            tooltipSeries.push(series);\n          }\n        }\n      }\n    });\n    this.setPrivate(\"tooltipSeries\", tooltipSeries);\n    if (this.get(\"arrangeTooltips\")) {\n      const tooltipContainer = this._root.tooltipContainer;\n      const count = tooltips.length;\n      const average = sum / count;\n      if (average > h / 2 + plotT.y) {\n        tooltips.sort((a, b) => $order.compareNumber(b.get(\"pointTo\").y, a.get(\"pointTo\").y));\n        let prevY = plotB.y;\n        $array.each(tooltips, tooltip => {\n          let height = tooltip.height();\n          let centerY = tooltip.get(\"centerY\");\n          if (centerY instanceof Percent) {\n            height *= centerY.value;\n          }\n          height += tooltip.get(\"marginBottom\", 0);\n          tooltip.set(\"bounds\", {\n            left: plotT.x,\n            top: plotT.y,\n            right: plotB.x,\n            bottom: prevY\n          });\n          tooltip.setPrivate(\"customData\", {\n            left: plotT.x,\n            top: plotT.y,\n            right: plotB.x,\n            bottom: prevY\n          });\n          prevY = Math.min(prevY - height, tooltip._fy - height);\n          if (tooltip.parent == tooltipContainer) {\n            tooltipContainer.children.moveValue(tooltip, 0);\n          }\n        });\n        if (prevY < 0) {\n          tooltips.reverse();\n          let prevBottom = prevY;\n          $array.each(tooltips, tooltip => {\n            let bounds = tooltip.get(\"bounds\");\n            if (bounds) {\n              let top = bounds.top - prevY;\n              let bottom = bounds.bottom - prevY;\n              if (top < prevBottom) {\n                top = prevBottom;\n                bottom = top + tooltip.height();\n              }\n              tooltip.set(\"bounds\", {\n                left: bounds.left,\n                top: top,\n                right: bounds.right,\n                bottom: bottom\n              });\n              prevBottom = bounds.bottom - prevY + tooltip.get(\"marginBottom\", 0);\n            }\n          });\n        }\n      } else {\n        tooltips.reverse();\n        tooltips.sort((a, b) => $order.compareNumber(a.get(\"pointTo\").y, b.get(\"pointTo\").y));\n        let prevY = 0;\n        $array.each(tooltips, tooltip => {\n          let height = tooltip.height();\n          let centerY = tooltip.get(\"centerY\");\n          if (centerY instanceof Percent) {\n            height *= centerY.value;\n          }\n          height += tooltip.get(\"marginBottom\", 0);\n          tooltip.set(\"bounds\", {\n            left: plotT.x,\n            top: prevY,\n            right: plotB.x,\n            bottom: Math.max(plotT.y + hh, prevY + height)\n          });\n          if (tooltip.parent == tooltipContainer) {\n            tooltipContainer.children.moveValue(tooltip, 0);\n          }\n          prevY = Math.max(prevY + height, tooltip._fy + height);\n        });\n        if (prevY > hh) {\n          tooltips.reverse();\n          let prevBottom = hh;\n          $array.each(tooltips, tooltip => {\n            let bounds = tooltip.get(\"bounds\");\n            if (bounds) {\n              let top = bounds.top - (hh - prevY);\n              let bottom = bounds.bottom - (hh - prevY);\n              if (bottom > prevBottom) {\n                bottom = prevBottom;\n                top = bottom - tooltip.height();\n              }\n              tooltip.set(\"bounds\", {\n                left: bounds.left,\n                top: top,\n                right: bounds.right,\n                bottom: bottom\n              });\n              prevBottom = bottom - tooltip.height() - tooltip.get(\"marginBottom\", 0);\n            }\n          });\n        }\n      }\n    }\n  }\n  _tooltipToLocal(point) {\n    return this.plotContainer.toLocal(point);\n  }\n  /**\r\n   * Fully zooms out the chart.\r\n   */\n  zoomOut() {\n    this.xAxes.each(axis => {\n      axis.setPrivate(\"updateScrollbar\", true);\n      axis.zoom(0, 1);\n    });\n    this.yAxes.each(axis => {\n      axis.setPrivate(\"updateScrollbar\", true);\n      axis.zoom(0, 1);\n    });\n  }\n  _dispose() {\n    super._dispose();\n    // Explicitly disposing cursor to avoid memory leak of cursor adding\n    // keyboard events after parent chart has been disposed\n    const cursor = this.get(\"cursor\");\n    if (cursor) {\n      cursor.dispose();\n    }\n  }\n}\nObject.defineProperty(XYChart, \"className\", {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value: \"XYChart\"\n});\nObject.defineProperty(XYChart, \"classNames\", {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value: SerialChart.classNames.concat([XYChart.className])\n});","map":{"version":3,"names":["XYChartDefaultTheme","Container","Rectangle","SerialChart","ListAutoDispose","p100","Button","Graphics","Percent","$array","$type","$order","$object","$utils","$math","XYChart","constructor","Object","defineProperty","chartContainer","children","push","new","_root","width","layout","verticalLayout","height","horizontalLayout","yAxesAndPlotContainer","maskContent","plotsContainer","plotContainer","isMeasured","topPlotContainer","themeTags","icon","x","y","_afterNew","_defaultThemes","_disposers","xAxes","yAxes","root","zoomOutButton","events","on","zoomOut","hide","states","lookup","set","seriesContainer","_processAxis","bottomAxesContainer","leftAxesContainer","topGridContainer","bulletsContainer","event","_handlePlotDown","_handlePlotUp","_handlePlotMove","_maskGrid","_setUpTouch","_beforeChanged","isDirty","get","_display","cancelTouch","gridContainer","_removeSeries","series","_unstack","_posXDp","dispose","_posYDp","undefined","xAxis","remove","markDirtyExtremes","yAxis","cursor","snapToSeries","handleWheel","wheelX","wheelY","wheelEvent","originalEvent","prevent","isLocalEvent","plotPoint","toLocal","point","wheelStep","shiftY","deltaY","shiftX","deltaX","wheelZoomPositionX","wheelZoomPositionY","each","axis","start","end","position","fixPosition","maxDeviation","newStart","Math","min","max","newEnd","getPrivate","Infinity","_handleWheelAnimation","zoom","delta","_getWheelSign","se","_fixWheel","preventDefault","_handleSetWheel","_wheelDp","abs","sign","diff","button","local","pointerId","keys","_downPoints","length","getIndex","_downStartX","_downEndX","_downStartY","_downEndY","_downPoint","clientX","clientY","panX","panY","_panStart","_panEnd","eventType","isEnabled","dispatch","type","target","animation","_dispatchWheelAnimation","downPoint","_isPanning","touchEvent","_movePoints","_handlePinch","documentPointToRoot","scrollbarX","disableType","panStart","panEnd","difference","enableType","scrollbarY","i","downPoints","movePoints","k","movePoint","w","h","downPoint0","downPoint1","movePoint0","movePoint1","downStartX","downEndX","downPos0","downPos1","movePos0","movePos1","initialDistance","currentDistance","d","s","e","sa","ea","downStartY","downEndY","_handleCursorPosition","cursorPoint","snapToSeriesBy","dataItems","isHidden","isHiding","startIndex","endIndex","dataItem","tooltipDataItem","minDistance","closestItem","distance","hypot","tooltip","_setDataItem","component","showDataItemTooltip","setRaw","handleMove","toGlobal","_updateCursor","updateCursor","_addCursor","_prepareChildren","_colorize","previous","_prevSettings","_disposeProperty","_setChart","_pushPropertyDisposer","_handleCursorSelectEnd","parent","topAxesContainer","_handleScrollbar","grip","_handleAxisSelection","setPrivate","getTooltipText","rightAxesContainer","_handleZoomOut","_processSeries","move","addDisposer","_fixPosition","isType","_markDirtyKey","_markDirtyAxes","_seriesAdded","colorSet","color","next","_setSoft","patternSet","pattern","behavior","downPositionX","downPositionY","positionX","positionY","position0","toAxisPosition","position1","axes","priority","axisStart","axisEnd","zoomAnimation","updateScrollbar","setPrivateRaw","container","onAll","change","oldValues","_removeAxis","newValue","processChart","setIndex","index","insertIndex","oldValue","moveValue","value","newIndex","Error","isDisposed","axisParent","removeValue","gridParent","topGridParent","_updateChartLayout","left","right","processAxis","force","indexOf","updateGrips","visible","round","show","inPlot","otherCharts","_otherCharts","global","chart","chartPlotContainer","documentPoint","rootPointToDocument","chartRoot","arrangeTooltips","hh","plotT","plotB","tooltips","sum","_movePoint","maxTooltipDistance","maxTooltipDistanceBy","closest","closestPoint","isNumber","tooltipSeries","hidden","_tooltipToLocal","tooltipContainer","count","average","sort","a","b","compareNumber","prevY","centerY","top","bottom","_fy","reverse","prevBottom","bounds","_dispose","classNames","concat","className"],"sources":["C:\\Users\\Moham\\Downloads\\Github projects\\Digital-Portfolio-main\\Frontend\\node_modules\\src\\.internal\\charts\\xy\\XYChart.ts"],"sourcesContent":["import type { Axis } from \"./axes/Axis\";\nimport type { XYCursor } from \"./XYCursor\";\nimport type { AxisRenderer } from \"./axes/AxisRenderer\";\nimport type { DataItem } from \"../../core/render/Component\";\nimport type { IDisposer } from \"../../core/util/Disposer\";\nimport type { XYSeries, IXYSeriesDataItem } from \"./series/XYSeries\";\nimport type { IPointerEvent } from \"../../core/render/backend/Renderer\";;\nimport type { Scrollbar } from \"../../core/render/Scrollbar\";\nimport type { Tooltip } from \"../../core/render/Tooltip\";\nimport type { IPoint } from \"../../core/util/IPoint\";\nimport type { ISpritePointerEvent } from \"../../core/render/Sprite\";\nimport type { Animation } from \"../../core/util/Entity\";\nimport type { CategoryAxis } from \"./axes/CategoryAxis\";\nimport type { DateAxis } from \"./axes/DateAxis\";\n\nimport { XYChartDefaultTheme } from \"./XYChartDefaultTheme\";\nimport { Container } from \"../../core/render/Container\";\nimport { Rectangle } from \"../../core/render/Rectangle\";\nimport { SerialChart, ISerialChartPrivate, ISerialChartSettings, ISerialChartEvents } from \"../../core/render/SerialChart\";\nimport { ListAutoDispose } from \"../../core/util/List\";\nimport { p100 } from \"../../core/util/Percent\";\nimport { Button } from \"../../core/render/Button\";\nimport { Graphics } from \"../../core/render/Graphics\";\nimport { Percent } from \"../../core/util/Percent\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $type from \"../../core/util/Type\";\nimport * as $order from \"../../core/util/Order\";\nimport * as $object from \"../../core/util/Object\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as $math from \"../../core/util/Math\";\n\nexport interface IXYChartSettings extends ISerialChartSettings {\n\n\t/**\n\t * horizontal scrollbar.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/scrollbars/} for more info\n\t */\n\tscrollbarX?: Scrollbar;\n\n\t/**\n\t * Vertical scrollbar.\n\t *\n\t */\n\tscrollbarY?: Scrollbar;\n\n\t/**\n\t * If this is set to `true`, users will be able to pan the chart horizontally\n\t * by dragging plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Panning} for more info\n\t */\n\tpanX?: boolean;\n\n\t/**\n\t * If this is set to `true`, users will be able to pan the chart vertically\n\t * by dragging plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Panning} for more info\n\t */\n\tpanY?: boolean;\n\n\t/**\n\t * Indicates what happens when mouse wheel is spinned horizontally while over\n\t * plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Mouse_wheel_behavior} for more info\n\t */\n\twheelX?: \"zoomX\" | \"zoomY\" | \"zoomXY\" | \"panX\" | \"panY\" | \"panXY\" | \"none\";\n\n\t/**\n\t * Indicates what happens when mouse wheel is spinned vertically while over\n\t * plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Mouse_wheel_behavior} for more info\n\t */\n\twheelY?: \"zoomX\" | \"zoomY\" | \"zoomXY\" | \"panX\" | \"panY\" | \"panXY\" | \"none\";\n\n\t/**\n\t * Indicates the relative \"speed\" of the mouse wheel.\n\t *\n\t * @default 0.25\n\t */\n\twheelStep?: number;\n\n\t/**\n\t * Chart's cursor.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/} for more info\n\t */\n\tcursor?: XYCursor;\n\n\t/**\n\t * If not set (default), cursor will show tooltips for all data items in the\n\t * same category/date.\n\t *\n\t * If set, cursor will select closest data item to pointer (mouse or touch) and\n\t * show tooltip for it.\n\t *\n\t * It will also show tooltips for all data items that are within X pixels\n\t * range (as set in `maxTooltipDistance`).\n\t *\n\t * Tooltips for data items farther then X pixels, will not be shown.\n\t *\n\t * NOTE: set it to `-1` to ensure only one tooltip is displayed, even if there\n\t * are multiple data items in the same place.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/#tooltips} for more info\n\t */\n\tmaxTooltipDistance?: number;\n\n\t/**\n\t * Indicates how the distance should be measured when assessing distance\n\t * between tooltips as set in `maxTooltipDistance`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/#tooltips} for more info\n\t * @since 5.2.6\n\t */\n\tmaxTooltipDistanceBy?: \"xy\" | \"x\" | \"y\";\n\n\t/**\n\t * If set to `false` the chart will not check for overlapping of multiple\n\t * tooltips, and will not arrange them to not overlap.\n\t *\n\t * Will work only if chart has an `XYCursor` enabled.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/#ooltips} for more info\n\t * @default true\n\t */\n\tarrangeTooltips?: boolean\n\n\t/**\n\t * If set to `true`, using pinch gesture on the chart's plot area will zoom\n\t * chart horizontally.\n\t *\n\t * NOTE: this setting is not supported in a [[RadarChart]].\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Pinch_zoom} for more info\n\t * @since 5.1.8\n\t * @default false\n\t */\n\tpinchZoomX?: boolean;\n\n\t/**\n\t * If set to `true`, using pinch gesture on the chart's plot area will zoom\n\t * chart vertically.\n\t *\n\t * NOTE: this setting is not supported in a [[RadarChart]].\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Pinch_zoom} for more info\n\t * @since 5.1.8\n\t * @default false\n\t */\n\tpinchZoomY?: boolean;\n\n\t/**\n\t * If set, will use this relative position as a \"center\" for mouse wheel\n\t * horizontal zooming instead of actual cursor position.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Mouse_wheel_behavior} for more info\n\t * @since 5.2.11\n\t */\n\twheelZoomPositionX?: number;\n\n\t/**\n\t * If set, will use this relative position as a \"center\" for mouse wheel\n\t * vertical zooming instead of actual cursor position.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Mouse_wheel_behavior} for more info\n\t * @since 5.2.11\n\t */\n\twheelZoomPositionY?: number;\n\n}\n\nexport interface IXYChartPrivate extends ISerialChartPrivate {\n\n\t/**\n\t * A list of [[Series]] that currently have their tooltip being displayed.\n\t */\n\ttooltipSeries?: Array<XYSeries>\n\n\t/**\n\t * Array of other [[XYChart]] objects that cursors should be synced with.\n\t *\n\t * Note: cursors will be synced across the vertically stacked charts only.\n\t */\n\totherCharts?: Array<XYChart>\n\n}\n\n\nexport interface IXYChartEvents extends ISerialChartEvents {\n\n\t/**\n\t * Invoked when panning starts.\n\t *\n\t * @since 5.0.4\n\t */\n\tpanstarted: {\n\t\toriginalEvent: IPointerEvent\n\t};\n\n\t/**\n\t * Invoked when panning ends.\n\t *\n\t * @since 5.0.4\n\t */\n\tpanended: {\n\t\toriginalEvent: IPointerEvent\n\t};\n\n\t/**\n\t * Invoked if pointer is pressed down on a chart and released without moving.\n\t *\n\t * `panended` event will still kick in after that.\n\t *\n\t * @since 5.2.19\n\t */\n\tpancancelled: {\n\t\toriginalEvent: IPointerEvent\n\t};\n\n\t/**\n\t * Invoked when wheel caused zoom ends.\n\t *\n\t * @since 5.0.4\n\t */\n\twheelended: {};\n\n}\n\n/**\n * Creates an XY chart.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/} for more info\n * @important\n */\nexport class XYChart extends SerialChart {\n\n\tpublic static className: string = \"XYChart\";\n\tpublic static classNames: Array<string> = SerialChart.classNames.concat([XYChart.className]);\n\n\tdeclare public _settings: IXYChartSettings;\n\tdeclare public _privateSettings: IXYChartPrivate;\n\tdeclare public _seriesType: XYSeries;\n\tdeclare public _events: IXYChartEvents;\n\n\t/**\n\t * A list of horizontal axes.\n\t */\n\tpublic readonly xAxes: ListAutoDispose<Axis<AxisRenderer>> = new ListAutoDispose();\n\n\t/**\n\t * A list of vertical axes.\n\t */\n\tpublic readonly yAxes: ListAutoDispose<Axis<AxisRenderer>> = new ListAutoDispose();\n\n\t/**\n\t * A [[Container]] located on top of the chart, used to store top horizontal\n\t * axes.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly topAxesContainer: Container = this.chartContainer.children.push(Container.new(this._root, { width: p100, layout: this._root.verticalLayout }));\n\n\t/**\n\t * A [[Container]] located in the middle the chart, used to store vertical axes\n\t * and plot area container.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly yAxesAndPlotContainer: Container = this.chartContainer.children.push(Container.new(this._root, { width: p100, height: p100, layout: this._root.horizontalLayout }));\n\n\t/**\n\t * A [[Container]] located on bottom of the chart, used to store bottom\n\t * horizontal axes.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly bottomAxesContainer: Container = this.chartContainer.children.push(Container.new(this._root, { width: p100, layout: this._root.verticalLayout }));\n\n\t/**\n\t * A [[Container]] located on left of the chart, used to store left-hand\n\t * vertical axes.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly leftAxesContainer: Container = this.yAxesAndPlotContainer.children.push(Container.new(this._root, { height: p100, layout: this._root.horizontalLayout }));\n\n\t/**\n\t * A [[Container]] located in the middle of the chart, used to store plotContainer and topPlotContainer\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly plotsContainer: Container = this.yAxesAndPlotContainer.children.push(Container.new(this._root, { width: p100, height: p100, maskContent: false }));\n\n\t/**\n\t * A [[Container]] located in the middle of the chart, used to store actual\n\t * plots (series).\n\t *\n\t * NOTE: `plotContainer` will automatically have its `background` preset. If\n\t * you need to modify background or outline for chart's plot area, you can\n\t * use `plotContainer.get(\"background\")` for that.*\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly plotContainer: Container = this.plotsContainer.children.push(Container.new(this._root, { width: p100, height: p100 }));\n\n\t/**\n\t * A [[Container]] used for any elements that need to be displayed over\n\t * regular `plotContainer`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly topPlotContainer: Container = this.plotsContainer.children.push(Container.new(this._root, { width: p100, height: p100 }));\n\n\t/**\n\t * A [[Container]] axis grid elements are stored in.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly gridContainer: Container = this.plotContainer.children.push(Container.new(this._root, { width: p100, height: p100, isMeasured: false }));\n\n\t/**\n\t * A [[Container]] axis background grid elements are stored in.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly topGridContainer: Container = Container.new(this._root, { width: p100, height: p100, isMeasured: false });\n\n\t/**\n\t * A [[Container]] located on right of the chart, used to store right-hand\n\t * vertical axes.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly rightAxesContainer: Container = this.yAxesAndPlotContainer.children.push(Container.new(this._root, { height: p100, layout: this._root.horizontalLayout }));\n\n\t/**\n\t * A [[Container]] axis headers are stored in.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-headers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly axisHeadersContainer: Container = this.plotContainer.children.push(Container.new(this._root, {}));\n\n\t/**\n\t * A button that is shown when chart is not fully zoomed out.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Zoom_out_button} for more info\n\t * @default Button.new()\n\t */\n\tpublic readonly zoomOutButton: Button = this.topPlotContainer.children.push(Button.new(this._root, {\n\t\tthemeTags: [\"zoom\"],\n\t\ticon: Graphics.new(this._root, {\n\t\t\tthemeTags: [\"button\", \"icon\"]\n\t\t})\n\t}));\n\n\tpublic _movePoint: IPoint = { x: 0, y: 0 };\n\n\tprotected _wheelDp: IDisposer | undefined;\n\n\tpublic _otherCharts?: Array<XYChart>;\n\n\tprotected _movePoints: { [index: number]: IPoint } = {};\n\n\tprotected _downStartX?: number;\n\tprotected _downEndX?: number;\n\n\tprotected _downStartY?: number;\n\tprotected _downEndY?: number;\n\n\tprotected _afterNew() {\n\t\tthis._defaultThemes.push(XYChartDefaultTheme.new(this._root));\n\n\t\tsuper._afterNew();\n\n\t\tthis._disposers.push(this.xAxes);\n\t\tthis._disposers.push(this.yAxes);\n\n\t\tconst root = this._root;\n\n\t\tlet verticalLayout = this._root.verticalLayout;\n\n\t\tconst zoomOutButton = this.zoomOutButton;\n\t\tzoomOutButton.events.on(\"click\", () => {\n\t\t\tthis.zoomOut();\n\t\t})\n\t\tzoomOutButton.hide(0);\n\t\tzoomOutButton.states.lookup(\"default\")!.set(\"opacity\", 1);\n\n\t\tthis.chartContainer.set(\"layout\", verticalLayout);\n\n\t\tconst plotContainer = this.plotContainer;\n\t\tplotContainer.children.push(this.seriesContainer);\n\n\t\tthis._disposers.push(this._processAxis(this.xAxes, this.bottomAxesContainer));\n\t\tthis._disposers.push(this._processAxis(this.yAxes, this.leftAxesContainer));\n\n\n\t\tplotContainer.children.push(this.topGridContainer);\n\t\tplotContainer.children.push(this.bulletsContainer);\n\n\t\t// Setting trasnparent background so that full body of the plot container\n\t\t// is interactive\n\t\tplotContainer.set(\"interactive\", true);\n\t\tplotContainer.set(\"interactiveChildren\", false);\n\t\tplotContainer.set(\"background\", Rectangle.new(root, {\n\t\t\tthemeTags: [\"plotbackground\", \"xy\", \"background\"]\n\t\t}));\n\n\t\tthis._disposers.push(plotContainer.events.on(\"pointerdown\", (event) => {\n\t\t\tthis._handlePlotDown(event);\n\t\t}));\n\n\t\tthis._disposers.push(plotContainer.events.on(\"globalpointerup\", (event) => {\n\t\t\tthis._handlePlotUp(event);\n\t\t}));\n\n\t\tthis._disposers.push(plotContainer.events.on(\"globalpointermove\", (event) => {\n\t\t\tthis._handlePlotMove(event);\n\t\t}));\n\n\t\tthis._maskGrid();\n\t\tthis._setUpTouch();\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"pinchZoomX\") || this.isDirty(\"pinchZoomY\") || this.get(\"panX\") || this.get(\"panY\")) {\n\t\t\tthis._setUpTouch();\n\t\t}\n\n\t}\n\n\tprotected _setUpTouch(): void {\n\t\tif (!this.plotContainer._display.cancelTouch) {\n\t\t\tthis.plotContainer._display.cancelTouch = (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\") || this.get(\"panX\") || this.get(\"panY\")) ? true : false;\n\t\t}\n\t}\n\n\tprotected _maskGrid() {\n\t\tthis.gridContainer.set(\"maskContent\", true);\n\t\tthis.topGridContainer.set(\"maskContent\", true);\n\t}\n\n\tprotected _removeSeries(series: this[\"_seriesType\"]) {\n\t\tseries._unstack();\n\n\t\tif (series._posXDp) {\n\t\t\tseries._posXDp.dispose();\n\t\t}\n\n\t\tif (series._posYDp) {\n\t\t\tseries._posYDp.dispose();\n\t\t}\n\n\t\tseries.set(\"baseAxis\", undefined);\n\n\t\tconst xAxis = series.get(\"xAxis\");\n\t\tif (xAxis) {\n\t\t\t$array.remove(xAxis.series, series);\n\t\t\txAxis.markDirtyExtremes();\n\t\t}\n\t\tconst yAxis = series.get(\"yAxis\");\n\t\tif (yAxis) {\n\t\t\t$array.remove(yAxis.series, series);\n\t\t\tyAxis.markDirtyExtremes();\n\t\t}\n\n\t\tconst cursor = this.get(\"cursor\");\n\t\tif (cursor) {\n\t\t\tconst snapToSeries = cursor.get(\"snapToSeries\");\n\t\t\tif (snapToSeries) {\n\t\t\t\t$array.remove(snapToSeries, series);\n\t\t\t}\n\t\t}\n\n\t\tsuper._removeSeries(series);\n\t}\n\n\t/**\n\t * This method is invoked when mouse wheel is used over chart's plot\n\t * container, and handles zooming/pan.\n\t *\n\t * You can invoke this method manually, if you need to mimic chart's wheel\n\t * behavior over other elements of the chart.\n\t */\n\tpublic handleWheel(event: { originalEvent: WheelEvent, point: IPoint, target: Container }) {\n\t\tconst wheelX = this.get(\"wheelX\");\n\t\tconst wheelY = this.get(\"wheelY\");\n\t\tconst plotContainer = this.plotContainer;\n\n\t\tconst wheelEvent = event.originalEvent;\n\n\t\t// Ignore wheel event if it is happening on a non-chart element, e.g. if\n\t\t// some page element is over the chart.\n\t\tlet prevent = false;\n\t\tif ($utils.isLocalEvent(wheelEvent, this)) {\n\t\t\tprevent = true;\n\t\t}\n\t\telse {\n\t\t\treturn;\n\t\t}\n\n\t\tconst plotPoint = plotContainer.toLocal(event.point);\n\t\tconst wheelStep = this.get(\"wheelStep\", 0.2);\n\n\t\tconst shiftY = wheelEvent.deltaY / 100;\n\t\tconst shiftX = wheelEvent.deltaX / 100;\n\n\t\tconst wheelZoomPositionX = this.get(\"wheelZoomPositionX\");\n\t\tconst wheelZoomPositionY = this.get(\"wheelZoomPositionY\");\n\n\n\t\tif ((wheelX === \"zoomX\" || wheelX === \"zoomXY\") && shiftX != 0) {\n\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"zoomX\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet position = axis.fixPosition(plotPoint.x / plotContainer.width());\n\n\t\t\t\t\tif (wheelZoomPositionX != null) {\n\t\t\t\t\t\tposition = wheelZoomPositionX;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet maxDeviation = axis.get(\"maxDeviation\", 0);\n\n\t\t\t\t\tlet newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftX * position));\n\t\t\t\t\tlet newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftX * (1 - position)));\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\n\t\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif ((wheelY === \"zoomX\" || wheelY === \"zoomXY\") && shiftY != 0) {\n\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"zoomX\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet position = axis.fixPosition(plotPoint.x / plotContainer.width());\n\n\t\t\t\t\tif (wheelZoomPositionX != null) {\n\t\t\t\t\t\tposition = wheelZoomPositionX;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet maxDeviation = axis.get(\"maxDeviation\", 0);\n\n\t\t\t\t\tlet newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftY * position));\n\t\t\t\t\tlet newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftY * (1 - position)));\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\n\t\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\n\t\tif ((wheelX === \"zoomY\" || wheelX === \"zoomXY\") && shiftX != 0) {\n\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"zoomY\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet position = axis.fixPosition(plotPoint.y / plotContainer.height());\n\n\t\t\t\t\tif (wheelZoomPositionY != null) {\n\t\t\t\t\t\tposition = wheelZoomPositionY;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet maxDeviation = axis.get(\"maxDeviation\", 0);\n\n\t\t\t\t\tlet newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftX * position));\n\t\t\t\t\tlet newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftX * (1 - position)));\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\n\t\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif ((wheelY === \"zoomY\" || wheelY === \"zoomXY\") && shiftY != 0) {\n\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"zoomY\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet position = axis.fixPosition(plotPoint.y / plotContainer.height());\n\n\t\t\t\t\tif (wheelZoomPositionY != null) {\n\t\t\t\t\t\tposition = wheelZoomPositionY;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet maxDeviation = axis.get(\"maxDeviation\", 0);\n\n\t\t\t\t\tlet newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftY * position));\n\t\t\t\t\tlet newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftY * (1 - position)));\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\n\t\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\n\t\tif ((wheelX === \"panX\" || wheelX === \"panXY\") && shiftX != 0) {\n\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"panX\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftX;\n\t\t\t\t\tlet newStart = start + delta;\n\t\t\t\t\tlet newEnd = end + delta;\n\n\t\t\t\t\tlet se = this._fixWheel(newStart, newEnd);\n\t\t\t\t\tnewStart = se[0];\n\t\t\t\t\tnewEnd = se[1];\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif ((wheelY === \"panX\" || wheelY === \"panXY\") && shiftY != 0) {\n\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"panX\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftY;\n\t\t\t\t\tlet newStart = start + delta;\n\t\t\t\t\tlet newEnd = end + delta;\n\n\t\t\t\t\tlet se = this._fixWheel(newStart, newEnd);\n\t\t\t\t\tnewStart = se[0];\n\t\t\t\t\tnewEnd = se[1];\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif ((wheelX === \"panY\" || wheelX === \"panXY\") && shiftX != 0) {\n\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"panY\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftX;\n\t\t\t\t\tlet newStart = start + delta;\n\t\t\t\t\tlet newEnd = end + delta;\n\n\t\t\t\t\tlet se = this._fixWheel(newStart, newEnd);\n\t\t\t\t\tnewStart = se[0];\n\t\t\t\t\tnewEnd = se[1];\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif ((wheelY === \"panY\" || wheelY === \"panXY\") && shiftY != 0) {\n\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"panY\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftY;\n\t\t\t\t\tlet newStart = start - delta;\n\t\t\t\t\tlet newEnd = end - delta;\n\n\t\t\t\t\tlet se = this._fixWheel(newStart, newEnd);\n\t\t\t\t\tnewStart = se[0];\n\t\t\t\t\tnewEnd = se[1];\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif (prevent) {\n\t\t\twheelEvent.preventDefault();\n\t\t}\n\t}\n\n\tprotected _handleSetWheel() {\n\t\tconst wheelX = this.get(\"wheelX\");\n\t\tconst wheelY = this.get(\"wheelY\");\n\t\tconst plotContainer = this.plotContainer;\n\n\t\tif (wheelX !== \"none\" || wheelY !== \"none\") {\n\t\t\tthis._wheelDp = plotContainer.events.on(\"wheel\", (event) => {\n\t\t\t\tconst wheelEvent = event.originalEvent;\n\t\t\t\tif ((wheelX !== \"none\" && Math.abs(wheelEvent.deltaX) != 0) || (wheelY !== \"none\" && Math.abs(wheelEvent.deltaY) != 0)) {\n\t\t\t\t\tthis.handleWheel(event);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._disposers.push(this._wheelDp);\n\t\t}\n\t\telse {\n\t\t\tif (this._wheelDp) {\n\t\t\t\tthis._wheelDp.dispose();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _getWheelSign(axis: Axis<AxisRenderer>) {\n\t\tlet sign = 1;\n\t\tif (axis.get(\"renderer\").get(\"inversed\")) {\n\t\t\tsign = -1;\n\t\t}\n\n\t\treturn sign\n\t}\n\n\tprotected _fixWheel(start: number, end: number): [number, number] {\n\t\tconst diff = end - start;\n\t\tif (start < 0) {\n\t\t\tstart = 0;\n\t\t\tend = start + diff;\n\t\t}\n\t\tif (end > 1) {\n\t\t\tend = 1;\n\t\t\tstart = end - diff;\n\t\t}\n\n\t\treturn [start, end];\n\t}\n\n\tprotected _handlePlotDown(event: ISpritePointerEvent) {\n\t\tconst originalEvent = event.originalEvent as any;\n\n\t\tif (originalEvent.button == 2) {\n\t\t\treturn;\n\t\t}\n\t\tconst plotContainer = this.plotContainer;\n\t\tlet local = plotContainer.toLocal(event.point);\n\n\t\tif (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\")) {\n\t\t\tconst pointerId = originalEvent.pointerId;\n\n\t\t\tif (pointerId) {\n\n\t\t\t\tif ($object.keys(plotContainer._downPoints).length > 0) {\n\t\t\t\t\tconst xAxis = this.xAxes.getIndex(0);\n\t\t\t\t\tconst yAxis = this.yAxes.getIndex(0);\n\n\n\t\t\t\t\tif (xAxis) {\n\t\t\t\t\t\tthis._downStartX = xAxis.get(\"start\", 0);\n\t\t\t\t\t\tthis._downEndX = xAxis.get(\"end\", 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (yAxis) {\n\t\t\t\t\t\tthis._downStartY = yAxis.get(\"start\", 0);\n\t\t\t\t\t\tthis._downEndY = yAxis.get(\"end\", 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.get(\"panX\") || this.get(\"panY\")) {\n\n\t\t\tif (local.x >= 0 && local.y >= 0 && local.x <= plotContainer.width() && local.y <= this.height()) {\n\t\t\t\t//this._downPoint = local;\n\t\t\t\tthis._downPoint = { x: originalEvent.clientX, y: originalEvent.clientY };\n\n\t\t\t\tconst panX = this.get(\"panX\");\n\t\t\t\tconst panY = this.get(\"panY\");\n\n\t\t\t\tif (panX) {\n\t\t\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\t\t\taxis._panStart = axis.get(\"start\")!;\n\t\t\t\t\t\taxis._panEnd = axis.get(\"end\")!;\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (panY) {\n\t\t\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\t\t\taxis._panStart = axis.get(\"start\")!;\n\t\t\t\t\t\taxis._panEnd = axis.get(\"end\")!;\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tconst eventType = \"panstarted\";\n\t\t\t\tif (this.events.isEnabled(eventType)) {\n\t\t\t\t\tthis.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _handleWheelAnimation(animation?: Animation<any>) {\n\t\tif (animation) {\n\t\t\tanimation.events.on(\"stopped\", () => {\n\t\t\t\tthis._dispatchWheelAnimation();\n\t\t\t})\n\t\t}\n\t\telse {\n\t\t\tthis._dispatchWheelAnimation();\n\t\t}\n\t}\n\n\tprotected _dispatchWheelAnimation() {\n\t\tconst eventType = \"wheelended\";\n\t\tif (this.events.isEnabled(eventType)) {\n\t\t\tthis.events.dispatch(eventType, { type: eventType, target: this });\n\t\t}\n\t}\n\n\tprotected _handlePlotUp(event: ISpritePointerEvent) {\n\t\tconst downPoint = this._downPoint;\n\t\tif (downPoint) {\n\t\t\tif (this.get(\"panX\") || this.get(\"panY\")) {\n\t\t\t\tif (event.originalEvent.clientX == downPoint.x && event.originalEvent.clientY == downPoint.y) {\n\t\t\t\t\tconst eventType = \"pancancelled\";\n\t\t\t\t\tif (this.events.isEnabled(eventType)) {\n\t\t\t\t\t\tthis.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst eventType = \"panended\";\n\t\t\t\tif (this.events.isEnabled(eventType)) {\n\t\t\t\t\tthis.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// TODO: handle multitouch\n\t\tthis._downPoint = undefined;\n\t\tthis.xAxes.each((xAxis) => {\n\t\t\txAxis._isPanning = false;\n\t\t})\n\t\tthis.yAxes.each((yAxis) => {\n\t\t\tyAxis._isPanning = false;\n\t\t})\n\t}\n\n\tprotected _handlePlotMove(event: ISpritePointerEvent) {\n\t\tconst plotContainer = this.plotContainer;\n\n\t\tif (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\")) {\n\t\t\tconst touchEvent = event.originalEvent as any;\n\t\t\tconst pointerId = touchEvent.pointerId;\n\n\t\t\tif (pointerId) {\n\t\t\t\tthis._movePoints[pointerId] = event.point;\n\n\t\t\t\tif ($object.keys(plotContainer._downPoints).length > 1) {\n\t\t\t\t\tthis._handlePinch();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet downPoint = this._downPoint!;\n\n\t\tif (downPoint) {\n\n\t\t\tdownPoint = plotContainer.toLocal(this._root.documentPointToRoot(downPoint));\n\t\t\tlet local = plotContainer.toLocal(event.point);\n\n\t\t\tconst panX = this.get(\"panX\");\n\t\t\tconst panY = this.get(\"panY\");\n\n\t\t\tif (panX) {\n\n\t\t\t\tlet scrollbarX = this.get(\"scrollbarX\");\n\t\t\t\tif (scrollbarX) {\n\t\t\t\t\tscrollbarX.events.disableType(\"rangechanged\");\n\t\t\t\t}\n\n\t\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\t\tif (axis.get(\"panX\")) {\n\t\t\t\t\t\taxis._isPanning = true;\n\t\t\t\t\t\t//const maxDeviation = axis.get(\"maxDeviation\", 0);\n\t\t\t\t\t\tlet panStart = axis._panStart;\n\t\t\t\t\t\tlet panEnd = axis._panEnd;\n\t\t\t\t\t\tlet difference = (panEnd - panStart);\n\t\t\t\t\t\tlet deltaX = difference * (downPoint.x - local.x) / plotContainer.width();\n\n\t\t\t\t\t\tif (axis.get(\"renderer\").get(\"inversed\")) {\n\t\t\t\t\t\t\tdeltaX *= -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet start = panStart + deltaX;\n\t\t\t\t\t\tlet end = panEnd + deltaX;\n\n\t\t\t\t\t\tif (end - start < 1 + axis.get(\"maxDeviation\", 1) * 2) {\n\t\t\t\t\t\t\taxis.set(\"start\", start);\n\t\t\t\t\t\t\taxis.set(\"end\", end);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tif (scrollbarX) {\n\t\t\t\t\tscrollbarX.events.enableType(\"rangechanged\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (panY) {\n\n\t\t\t\tlet scrollbarY = this.get(\"scrollbarY\");\n\t\t\t\tif (scrollbarY) {\n\t\t\t\t\tscrollbarY.events.disableType(\"rangechanged\");\n\t\t\t\t}\n\n\t\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\t\tif (axis.get(\"panY\")) {\n\t\t\t\t\t\taxis._isPanning = true;\n\t\t\t\t\t\t//const maxDeviation = axis.get(\"maxDeviation\", 0);\n\n\t\t\t\t\t\tlet panStart = axis._panStart;\n\t\t\t\t\t\tlet panEnd = axis._panEnd;\n\t\t\t\t\t\tlet difference = (panEnd - panStart);\n\t\t\t\t\t\tlet deltaY = difference * (downPoint.y - local.y) / plotContainer.height();\n\t\t\t\t\t\tif (axis.get(\"renderer\").get(\"inversed\")) {\n\t\t\t\t\t\t\tdeltaY *= -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet start = panStart - deltaY;\n\t\t\t\t\t\tlet end = panEnd - deltaY;\n\n\t\t\t\t\t\tif (end - start < 1 + axis.get(\"maxDeviation\", 1) * 2) {\n\t\t\t\t\t\t\taxis.set(\"start\", start);\n\t\t\t\t\t\t\taxis.set(\"end\", end);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tif (scrollbarY) {\n\t\t\t\t\tscrollbarY.events.enableType(\"rangechanged\");\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t}\n\t}\n\n\tprotected _handlePinch() {\n\t\tconst plotContainer = this.plotContainer;\n\t\tlet i = 0;\n\t\tlet downPoints: Array<IPoint> = [];\n\t\tlet movePoints: Array<IPoint> = [];\n\n\t\t$object.each(plotContainer._downPoints, (k, point) => {\n\t\t\tdownPoints[i] = point;\n\t\t\tlet movePoint = this._movePoints[k];\n\t\t\tif (movePoint) {\n\t\t\t\tmovePoints[i] = movePoint;\n\t\t\t}\n\t\t\ti++;\n\t\t});\n\n\t\tif (downPoints.length > 1 && movePoints.length > 1) {\n\t\t\tconst w = plotContainer.width();\n\t\t\tconst h = plotContainer.height();\n\n\t\t\tlet downPoint0 = downPoints[0];\n\t\t\tlet downPoint1 = downPoints[1];\n\n\t\t\tlet movePoint0 = movePoints[0];\n\t\t\tlet movePoint1 = movePoints[1];\n\n\t\t\tif (downPoint0 && downPoint1 && movePoint0 && movePoint1) {\n\n\t\t\t\tmovePoint0 = plotContainer.toLocal(movePoint0)\n\t\t\t\tmovePoint1 = plotContainer.toLocal(movePoint1)\n\n\t\t\t\tdownPoint0 = plotContainer.toLocal(downPoint0)\n\t\t\t\tdownPoint1 = plotContainer.toLocal(downPoint1)\n\n\t\t\t\tif (this.get(\"pinchZoomX\")) {\n\t\t\t\t\tconst downStartX = this._downStartX;\n\t\t\t\t\tconst downEndX = this._downEndX;\n\n\t\t\t\t\tif (downStartX != null && downEndX != null) {\n\n\t\t\t\t\t\tif (downPoint0.x > downPoint1.x) {\n\t\t\t\t\t\t\t[downPoint0, downPoint1] = [downPoint1, downPoint0];\n\t\t\t\t\t\t\t[movePoint0, movePoint1] = [movePoint1, movePoint0];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet downPos0 = downStartX + (downPoint0.x / w) * (downEndX - downStartX);\n\t\t\t\t\t\tlet downPos1 = downStartX + (downPoint1.x / w) * (downEndX - downStartX);\n\n\t\t\t\t\t\tlet movePos0 = downStartX + (movePoint0.x / w) * (downEndX - downStartX);\n\t\t\t\t\t\tlet movePos1 = downStartX + (movePoint1.x / w) * (downEndX - downStartX);\n\n\t\t\t\t\t\tlet initialDistance = Math.max(0.001, downPos1 - downPos0);\n\t\t\t\t\t\tlet currentDistance = Math.max(0.001, movePos1 - movePos0);\n\n\n\t\t\t\t\t\tlet d = initialDistance / currentDistance;\n\n\t\t\t\t\t\tlet s = downStartX * d + downPos0 - movePos0 * d;\n\t\t\t\t\t\tlet e = downEndX * d + downPos1 - movePos1 * d;\n\n\t\t\t\t\t\tthis.xAxes.each((xAxis) => {\n\t\t\t\t\t\t\tlet sa = xAxis.fixPosition(s);\n\t\t\t\t\t\t\tlet ea = xAxis.fixPosition(e);\n\n\t\t\t\t\t\t\txAxis.zoom(sa, ea, 0);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.get(\"pinchZoomY\")) {\n\t\t\t\t\tconst downStartY = this._downStartY;\n\t\t\t\t\tconst downEndY = this._downEndY;\n\n\t\t\t\t\tif (downStartY != null && downEndY != null) {\n\n\t\t\t\t\t\tif (downPoint0.y < downPoint1.y) {\n\t\t\t\t\t\t\t[downPoint0, downPoint1] = [downPoint1, downPoint0];\n\t\t\t\t\t\t\t[movePoint0, movePoint1] = [movePoint1, movePoint0];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet downPos0 = downStartY + (1 - downPoint0.y / h) * (downEndY - downStartY);\n\t\t\t\t\t\tlet downPos1 = downStartY + (1 - downPoint1.y / h) * (downEndY - downStartY);\n\n\t\t\t\t\t\tlet movePos0 = downStartY + (1 - movePoint0.y / h) * (downEndY - downStartY);\n\t\t\t\t\t\tlet movePos1 = downStartY + (1 - movePoint1.y / h) * (downEndY - downStartY);\n\n\t\t\t\t\t\tlet initialDistance = Math.max(0.001, downPos1 - downPos0);\n\t\t\t\t\t\tlet currentDistance = Math.max(0.001, movePos1 - movePos0);\n\n\t\t\t\t\t\tlet d = initialDistance / currentDistance;\n\n\t\t\t\t\t\tlet s = downStartY * d + downPos0 - movePos0 * d;\n\t\t\t\t\t\tlet e = downEndY * d + downPos1 - movePos1 * d;\n\n\t\t\t\t\t\tthis.yAxes.each((yAxis) => {\n\n\t\t\t\t\t\t\tlet sa = yAxis.fixPosition(s);\n\t\t\t\t\t\t\tlet ea = yAxis.fixPosition(e);\n\n\t\t\t\t\t\t\tyAxis.zoom(sa, ea, 0);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _handleCursorPosition() {\n\t\tconst cursor = this.get(\"cursor\");\n\t\tif (cursor) {\n\t\t\tconst cursorPoint = cursor.getPrivate(\"point\");\n\n\t\t\tlet snapToSeries = cursor.get(\"snapToSeries\");\n\n\t\t\tif (cursor._downPoint) {\n\t\t\t\tsnapToSeries = undefined;\n\t\t\t}\n\n\t\t\tif (snapToSeries && cursorPoint) {\n\t\t\t\tconst snapToSeriesBy = cursor.get(\"snapToSeriesBy\");\n\t\t\t\tconst dataItems: Array<DataItem<IXYSeriesDataItem>> = [];\n\t\t\t\t$array.each(snapToSeries, (series) => {\n\t\t\t\t\tif (!series.isHidden() && !series.isHiding()) {\n\t\t\t\t\t\tif (snapToSeriesBy != \"x!\" && snapToSeriesBy != \"y!\") {\n\t\t\t\t\t\t\tconst startIndex = series.startIndex();\n\t\t\t\t\t\t\tconst endIndex = series.endIndex();\n\t\t\t\t\t\t\tfor (let i = startIndex; i < endIndex; i++) {\n\t\t\t\t\t\t\t\tconst dataItem = series.dataItems[i];\n\t\t\t\t\t\t\t\tif (dataItem && !dataItem.isHidden()) {\n\t\t\t\t\t\t\t\t\tdataItems.push(dataItem);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst tooltipDataItem = series.get(\"tooltipDataItem\");\n\t\t\t\t\t\t\tif (tooltipDataItem) {\n\t\t\t\t\t\t\t\tdataItems.push(tooltipDataItem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tlet minDistance = Infinity;\n\t\t\t\tlet closestItem: DataItem<IXYSeriesDataItem> | undefined;\n\n\t\t\t\t$array.each(dataItems, (dataItem) => {\n\t\t\t\t\tconst point = dataItem.get(\"point\");\n\n\t\t\t\t\tif (point) {\n\t\t\t\t\t\tlet distance = 0;\n\t\t\t\t\t\tif (snapToSeriesBy == \"x\" || snapToSeriesBy == \"x!\") {\n\t\t\t\t\t\t\tdistance = Math.abs(cursorPoint.x - point.x);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (snapToSeriesBy == \"y\" || snapToSeriesBy == \"y!\") {\n\t\t\t\t\t\t\tdistance = Math.abs(cursorPoint.y - point.y);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tdistance = Math.hypot(cursorPoint.x - point.x, cursorPoint.y - point.y);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (distance < minDistance) {\n\t\t\t\t\t\t\tminDistance = distance;\n\t\t\t\t\t\t\tclosestItem = dataItem;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t$array.each(snapToSeries, (series) => {\n\t\t\t\t\tconst tooltip = series.get(\"tooltip\");\n\t\t\t\t\tif (tooltip) {\n\t\t\t\t\t\ttooltip._setDataItem(undefined);\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tif (closestItem) {\n\t\t\t\t\tlet series = closestItem.component as XYSeries;\n\t\t\t\t\tseries.showDataItemTooltip(closestItem);\n\t\t\t\t\tseries.setRaw(\"tooltipDataItem\", closestItem);\n\n\t\t\t\t\tconst point = closestItem.get(\"point\");\n\t\t\t\t\tif (point) {\n\n\t\t\t\t\t\t// removing x and y to solve #72225\n\t\t\t\t\t\tcursor.handleMove(series.toGlobal({ x: point.x - series.x(), y: point.y - series.y() }), true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _updateCursor() {\n\t\tlet cursor = this.get(\"cursor\");\n\t\tif (cursor) {\n\t\t\tcursor.updateCursor();\n\t\t}\n\t}\n\n\tprotected _addCursor(cursor: XYCursor) {\n\t\tthis.plotContainer.children.push(cursor);\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tthis.series.each((series) => {\n\t\t\tthis._colorize(series);\n\t\t})\n\n\t\tif (this.isDirty(\"wheelX\") || this.isDirty(\"wheelY\")) {\n\t\t\tthis._handleSetWheel();\n\t\t}\n\n\t\tif (this.isDirty(\"cursor\")) {\n\t\t\tconst previous = this._prevSettings.cursor;\n\t\t\tconst cursor = this.get(\"cursor\")!;\n\t\t\tif (cursor !== previous) {\n\t\t\t\tthis._disposeProperty(\"cursor\");\n\t\t\t\tif (previous) {\n\t\t\t\t\tprevious.dispose();\n\t\t\t\t}\n\t\t\t\tif (cursor) {\n\t\t\t\t\tcursor._setChart(this);\n\t\t\t\t\tthis._addCursor(cursor);\n\n\t\t\t\t\tthis._pushPropertyDisposer(\"cursor\", cursor.events.on(\"selectended\", () => {\n\t\t\t\t\t\tthis._handleCursorSelectEnd();\n\t\t\t\t\t}))\n\t\t\t\t}\n\n\t\t\t\t//this.setRaw(\"cursor\", cursor) // to reset previous value\n\t\t\t\tthis._prevSettings.cursor = cursor;\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"scrollbarX\")) {\n\t\t\tconst previous = this._prevSettings.scrollbarX;\n\t\t\tconst scrollbarX = this.get(\"scrollbarX\")!;\n\t\t\tif (scrollbarX !== previous) {\n\t\t\t\tthis._disposeProperty(\"scrollbarX\");\n\t\t\t\tif (previous) {\n\t\t\t\t\tprevious.dispose();\n\t\t\t\t}\n\t\t\t\tif (scrollbarX) {\n\t\t\t\t\tif (!scrollbarX.parent) {\n\t\t\t\t\t\tthis.topAxesContainer.children.push(scrollbarX);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._pushPropertyDisposer(\"scrollbarX\", scrollbarX.events.on(\"rangechanged\", (e) => {\n\t\t\t\t\t\tthis._handleScrollbar(this.xAxes, e.start, e.end, e.grip);\n\t\t\t\t\t}))\n\n\t\t\t\t\tthis._pushPropertyDisposer(\"scrollbarX\", scrollbarX.events.on(\"released\", () => {\n\t\t\t\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\t\t\t\tif (axis.get(\"zoomable\")) {\n\t\t\t\t\t\t\t\tthis._handleAxisSelection(axis);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}))\n\n\t\t\t\t\t// Used to populate `ariaLabel` with meaningful values\n\t\t\t\t\tscrollbarX.setPrivate(\"positionTextFunction\", (position: number) => {\n\t\t\t\t\t\tconst axis = this.xAxes.getIndex(0);\n\t\t\t\t\t\treturn axis ? axis.getTooltipText(position, false) || \"\" : \"\";\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t\tthis._prevSettings.scrollbarX = scrollbarX;\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"scrollbarY\")) {\n\t\t\tconst previous = this._prevSettings.scrollbarY;\n\t\t\tconst scrollbarY = this.get(\"scrollbarY\")!;\n\t\t\tif (scrollbarY !== previous) {\n\t\t\t\tthis._disposeProperty(\"scrollbarY\");\n\t\t\t\tif (previous) {\n\t\t\t\t\tprevious.dispose();\n\t\t\t\t}\n\t\t\t\tif (scrollbarY) {\n\t\t\t\t\tif (!scrollbarY.parent) {\n\t\t\t\t\t\tthis.rightAxesContainer.children.push(scrollbarY);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._pushPropertyDisposer(\"scrollbarY\", scrollbarY.events.on(\"rangechanged\", (e) => {\n\t\t\t\t\t\tthis._handleScrollbar(this.yAxes, e.start, e.end, e.grip);\n\t\t\t\t\t}))\n\n\t\t\t\t\tthis._pushPropertyDisposer(\"scrollbarY\", scrollbarY.events.on(\"released\", () => {\n\t\t\t\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\t\t\t\tif (axis.get(\"zoomable\")) {\n\t\t\t\t\t\t\t\tthis._handleAxisSelection(axis);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}))\n\n\t\t\t\t\t// Used to populate `ariaLabel` with meaningful values\n\t\t\t\t\tscrollbarY.setPrivate(\"positionTextFunction\", (position: number) => {\n\t\t\t\t\t\tconst axis = this.yAxes.getIndex(0);\n\t\t\t\t\t\treturn axis ? axis.getTooltipText(position, false) || \"\" : \"\";\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\tthis._prevSettings.scrollbarY = scrollbarY;\n\t\t\t}\n\t\t}\n\n\t\tthis._handleZoomOut();\n\t}\n\n\tprotected _processSeries(series: this[\"_seriesType\"]) {\n\t\tsuper._processSeries(series);\n\n\t\tconst xAxis = series.get(\"xAxis\");\n\t\tconst yAxis = series.get(\"yAxis\");\n\n\t\t$array.move(xAxis.series, series);\n\t\t$array.move(yAxis.series, series);\n\n\t\tseries._posXDp = series.addDisposer(xAxis.events.on(\"positionchanged\", () => {\n\t\t\tseries._fixPosition();\n\t\t}))\n\n\t\tseries._posXDp = series.addDisposer(yAxis.events.on(\"positionchanged\", () => {\n\t\t\tseries._fixPosition();\n\t\t}))\n\n\t\tif (!series.get(\"baseAxis\")) {\n\t\t\tif (yAxis.isType<CategoryAxis<any>>(\"CategoryAxis\") || yAxis.isType<DateAxis<any>>(\"DateAxis\")) {\n\t\t\t\tseries.set(\"baseAxis\", yAxis);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tseries.set(\"baseAxis\", xAxis);\n\t\t\t}\n\t\t}\n\n\t\tif (series.get(\"stacked\")) {\n\t\t\tseries._markDirtyKey(\"stacked\");\n\t\t\t$array.each(series.dataItems, (dataItem) => {\n\t\t\t\tdataItem.set(\"stackToItemY\", undefined);\n\t\t\t\tdataItem.set(\"stackToItemX\", undefined);\n\t\t\t})\n\t\t}\n\t\tseries._markDirtyAxes();\n\t\tyAxis.markDirtyExtremes();\n\t\txAxis.markDirtyExtremes();\n\t\txAxis._seriesAdded = true;\n\t\tyAxis._seriesAdded = true;\n\n\t\tthis._colorize(series);\n\t}\n\n\tprotected _colorize(series: this[\"_seriesType\"]) {\n\t\tconst colorSet = this.get(\"colors\")!;\n\t\tif (colorSet) {\n\t\t\tif (series.get(\"fill\") == null) {\n\t\t\t\tconst color = colorSet.next();\n\n\t\t\t\tseries._setSoft(\"stroke\", color);\n\t\t\t\tseries._setSoft(\"fill\", color);\n\t\t\t}\n\t\t}\n\t\tconst patternSet = this.get(\"patterns\")!;\n\t\tif (patternSet) {\n\t\t\tif (series.get(\"fillPattern\") == null) {\n\t\t\t\tconst pattern = patternSet.next();\n\n\t\t\t\tseries._setSoft(\"fillPattern\", pattern);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _handleCursorSelectEnd() {\n\t\tconst cursor = this.get(\"cursor\")!;\n\t\tconst behavior = cursor.get(\"behavior\");\n\n\t\tconst downPositionX = cursor.getPrivate(\"downPositionX\", 0);\n\t\tconst downPositionY = cursor.getPrivate(\"downPositionY\", 0);\n\n\t\tconst positionX = Math.min(1, Math.max(0, cursor.getPrivate(\"positionX\", 0.5)));\n\t\tconst positionY = Math.min(1, Math.max(0, cursor.getPrivate(\"positionY\", 0.5)));\n\n\t\tthis.xAxes.each((axis) => {\n\t\t\tif (behavior === \"zoomX\" || behavior === \"zoomXY\") {\n\t\t\t\tlet position0 = axis.toAxisPosition(downPositionX);\n\t\t\t\tlet position1 = axis.toAxisPosition(positionX);\n\t\t\t\taxis.zoom(position0, position1);\n\t\t\t}\n\t\t\taxis.setPrivate(\"updateScrollbar\", true);\n\t\t})\n\n\t\tthis.yAxes.each((axis) => {\n\t\t\tif (behavior === \"zoomY\" || behavior === \"zoomXY\") {\n\t\t\t\tlet position0 = axis.toAxisPosition(downPositionY);\n\t\t\t\tlet position1 = axis.toAxisPosition(positionY);\n\t\t\t\taxis.zoom(position0, position1);\n\t\t\t}\n\t\t\taxis.setPrivate(\"updateScrollbar\", true);\n\t\t})\n\t}\n\n\tprotected _handleScrollbar(axes: ListAutoDispose<Axis<any>>, start: number, end: number, priority?: \"start\" | \"end\") {\n\n\t\taxes.each((axis) => {\n\n\t\t\tlet axisStart = axis.fixPosition(start);\n\t\t\tlet axisEnd = axis.fixPosition(end);\n\n\t\t\tlet zoomAnimation = axis.zoom(axisStart, axisEnd, undefined, priority);\n\n\t\t\tconst updateScrollbar = \"updateScrollbar\";\n\t\t\taxis.setPrivateRaw(updateScrollbar, false);\n\n\t\t\tif (zoomAnimation) {\n\t\t\t\tzoomAnimation.events.on(\"stopped\", () => {\n\t\t\t\t\taxis.setPrivateRaw(updateScrollbar, true);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\taxis.setPrivateRaw(updateScrollbar, true);\n\t\t\t}\n\t\t})\n\t}\n\n\n\tprotected _processAxis<R extends AxisRenderer>(axes: ListAutoDispose<Axis<R>>, container: Container): IDisposer {\n\t\treturn axes.events.onAll((change) => {\n\t\t\tif (change.type === \"clear\") {\n\t\t\t\t$array.each(change.oldValues, (axis) => {\n\t\t\t\t\tthis._removeAxis(axis);\n\t\t\t\t})\n\t\t\t} else if (change.type === \"push\") {\n\t\t\t\tcontainer.children.push(change.newValue);\n\t\t\t\tchange.newValue.processChart(this);\n\t\t\t} else if (change.type === \"setIndex\") {\n\t\t\t\tcontainer.children.setIndex(change.index, change.newValue);\n\t\t\t\tchange.newValue.processChart(this);\n\t\t\t} else if (change.type === \"insertIndex\") {\n\t\t\t\tcontainer.children.insertIndex(change.index, change.newValue);\n\t\t\t\tchange.newValue.processChart(this);\n\t\t\t} else if (change.type === \"removeIndex\") {\n\t\t\t\tthis._removeAxis(change.oldValue);\n\t\t\t} else if (change.type === \"moveIndex\") {\n\t\t\t\tcontainer.children.moveValue(change.value, change.newIndex);\n\t\t\t\tchange.value.processChart(this);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Unknown IListEvent type\");\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected _removeAxis(axis: Axis<AxisRenderer>) {\n\t\tif (!axis.isDisposed()) {\n\t\t\tconst axisParent = axis.parent\n\t\t\tif (axisParent) {\n\t\t\t\taxisParent.children.removeValue(axis);\n\t\t\t}\n\n\t\t\tconst gridContainer = axis.gridContainer;\n\t\t\tconst gridParent = gridContainer.parent;\n\t\t\tif (gridParent) {\n\t\t\t\tgridParent.children.removeValue(gridContainer);\n\t\t\t}\n\n\t\t\tconst topGridContainer = axis.topGridContainer;\n\t\t\tconst topGridParent = topGridContainer.parent;\n\t\t\tif (topGridParent) {\n\t\t\t\ttopGridParent.children.removeValue(topGridContainer);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _updateChartLayout() {\n\t\tconst left = this.leftAxesContainer.width();\n\t\tconst right = this.rightAxesContainer.width();\n\n\t\tconst bottomAxesContainer = this.bottomAxesContainer;\n\t\tbottomAxesContainer.set(\"paddingLeft\", left);\n\t\tbottomAxesContainer.set(\"paddingRight\", right);\n\n\t\tconst topAxesContainer = this.topAxesContainer;\n\t\ttopAxesContainer.set(\"paddingLeft\", left);\n\t\ttopAxesContainer.set(\"paddingRight\", right);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic processAxis(axis: Axis<AxisRenderer>) {\n\t\tvar cursor = this.get(\"cursor\");\n\t\tif (cursor) {\n\t\t\tthis.addDisposer(axis.on(\"start\", () => {\n\t\t\t\tthis._updateCursor();\n\t\t\t}))\n\n\t\t\tthis.addDisposer(axis.on(\"end\", () => {\n\t\t\t\tthis._updateCursor();\n\t\t\t}))\n\t\t}\n\t}\n\n\n\tpublic _handleAxisSelection(axis: Axis<any>, force?: boolean) {\n\n\t\tlet start = axis.fixPosition(axis.get(\"start\", 0));\n\t\tlet end = axis.fixPosition(axis.get(\"end\", 1));\n\n\t\tif (start > end) {\n\t\t\t[start, end] = [end, start];\n\t\t}\n\n\t\tif (this.xAxes.indexOf(axis) != -1) {\n\t\t\tif (force || axis.getPrivate(\"updateScrollbar\")) {\n\t\t\t\tlet scrollbarX = this.get(\"scrollbarX\");\n\n\t\t\t\tif (scrollbarX && (!scrollbarX.getPrivate(\"isBusy\") || force)) {\n\t\t\t\t\tscrollbarX.setRaw(\"start\", start);\n\t\t\t\t\tscrollbarX.setRaw(\"end\", end);\n\t\t\t\t\tscrollbarX.updateGrips();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (this.yAxes.indexOf(axis) != -1) {\n\t\t\tif (force || axis.getPrivate(\"updateScrollbar\")) {\n\t\t\t\tlet scrollbarY = this.get(\"scrollbarY\");\n\n\t\t\t\tif (scrollbarY && (!scrollbarY.getPrivate(\"isBusy\") || force)) {\n\t\t\t\t\tscrollbarY.setRaw(\"start\", start);\n\t\t\t\t\tscrollbarY.setRaw(\"end\", end);\n\t\t\t\t\tscrollbarY.updateGrips();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._handleZoomOut();\n\t}\n\n\tprotected _handleZoomOut() {\n\t\tlet zoomOutButton = this.zoomOutButton;\n\t\tif (zoomOutButton && zoomOutButton.parent) {\n\t\t\tlet visible = false;\n\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\tif ($math.round(axis.get(\"start\", 0), 6) != 0 || $math.round(axis.get(\"end\", 1), 6) != 1) {\n\t\t\t\t\tvisible = true;\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\tif ($math.round(axis.get(\"start\", 0), 6) != 0 || $math.round(axis.get(\"end\", 1), 6) != 1) {\n\t\t\t\t\tvisible = true;\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif (visible) {\n\t\t\t\tif (zoomOutButton.isHidden()) {\n\t\t\t\t\tzoomOutButton.show();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tzoomOutButton.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if point is within plot area.\n\t *\n\t * @param   point  Reference point\n\t * @return         Is within plot area?\n\t */\n\tpublic inPlot(point: IPoint): boolean {\n\t\tconst plotContainer = this.plotContainer;\n\t\tconst otherCharts = this.getPrivate(\"otherCharts\", this._otherCharts);\n\t\tconst global = plotContainer.toGlobal(point);\n\n\t\tif (point.x >= -0.5 && point.y >= -0.5 && point.x <= plotContainer.width() + 0.5 && point.y <= plotContainer.height() + 0.5) {\n\t\t\treturn true;\n\t\t}\n\t\tif (otherCharts) {\n\n\t\t\tfor (let i = otherCharts.length - 1; i >= 0; i--) {\n\t\t\t\tconst chart = otherCharts[i];\n\n\t\t\t\tif (chart != this) {\n\t\t\t\t\tconst chartPlotContainer = chart.plotContainer;\n\t\t\t\t\tconst documentPoint = this._root.rootPointToDocument(global);\n\t\t\t\t\tconst chartRoot = chart._root.documentPointToRoot(documentPoint);\n\t\t\t\t\tconst local = chartPlotContainer.toLocal(chartRoot);\n\t\t\t\t\tif (local.x >= -0.1 && local.y >= -0.1 && local.x <= chartPlotContainer.width() + 0.1 && local.y <= chartPlotContainer.height() + 0.1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic arrangeTooltips() {\n\t\tconst plotContainer = this.plotContainer;\n\n\t\tconst w = plotContainer.width();\n\t\tconst h = plotContainer.height();\n\n\t\tconst hh = this.height();\n\n\t\tlet plotT = plotContainer._display.toGlobal({ x: 0, y: 0 });\n\t\tlet plotB = plotContainer._display.toGlobal({ x: w, y: h });\n\n\t\tconst tooltips: Array<Tooltip> = [];\n\t\tlet sum = 0;\n\n\t\tlet minDistance = Infinity;\n\t\tlet movePoint = this._movePoint;\n\t\tlet maxTooltipDistance = this.get(\"maxTooltipDistance\");\n\t\tlet maxTooltipDistanceBy = this.get(\"maxTooltipDistanceBy\", \"xy\");\n\t\tlet closest: XYSeries;\n\t\tlet closestPoint: IPoint;\n\n\t\tif ($type.isNumber(maxTooltipDistance)) {\n\t\t\tthis.series.each((series) => {\n\t\t\t\tif (!series.isHidden()) {\n\t\t\t\t\tconst tooltip = series.get(\"tooltip\");\n\t\t\t\t\tif (tooltip) {\n\t\t\t\t\t\tlet point = tooltip.get(\"pointTo\")!;\n\t\t\t\t\t\tif (point) {\n\t\t\t\t\t\t\tlet distance = Math.hypot(movePoint.x - point.x, movePoint.y - point.y);\n\t\t\t\t\t\t\tif (maxTooltipDistanceBy == \"x\") {\n\t\t\t\t\t\t\t\tdistance = Math.abs(movePoint.x - point.x);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (maxTooltipDistanceBy == \"y\") {\n\t\t\t\t\t\t\t\tdistance = Math.abs(movePoint.y - point.y);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (distance < minDistance) {\n\t\t\t\t\t\t\t\tminDistance = distance;\n\t\t\t\t\t\t\t\tclosest = series;\n\t\t\t\t\t\t\t\tclosestPoint = point;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\tconst tooltipSeries: Array<XYSeries> = [];\n\n\t\tthis.series.each((series) => {\n\t\t\tconst tooltip = series.get(\"tooltip\")!;\n\n\t\t\tif (tooltip && !tooltip.get(\"forceHidden\")) {\n\t\t\t\tlet hidden = false;\n\t\t\t\tlet point = tooltip.get(\"pointTo\")!;\n\t\t\t\tif (point) {\n\t\t\t\t\tif (maxTooltipDistance >= 0) {\n\t\t\t\t\t\tlet point = tooltip.get(\"pointTo\")!;\n\t\t\t\t\t\tif (point && closestPoint) {\n\t\t\t\t\t\t\tif (series != closest) {\n\t\t\t\t\t\t\t\tlet distance = Math.hypot(closestPoint.x - point.x, closestPoint.y - point.y);\n\t\t\t\t\t\t\t\tif (maxTooltipDistanceBy == \"x\") {\n\t\t\t\t\t\t\t\t\tdistance = Math.abs(closestPoint.x - point.x);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if (maxTooltipDistanceBy == \"y\") {\n\t\t\t\t\t\t\t\t\tdistance = Math.abs(closestPoint.y - point.y);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (distance > maxTooltipDistance) {\n\t\t\t\t\t\t\t\t\thidden = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (maxTooltipDistance == -1) {\n\t\t\t\t\t\tif (series != closest) {\n\t\t\t\t\t\t\thidden = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.inPlot(this._tooltipToLocal(point)) || !tooltip.dataItem) {\n\t\t\t\t\t\thidden = true;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (!hidden) {\n\t\t\t\t\t\t\tsum += point.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (hidden || series.isHidden() || series.isHiding()) {\n\t\t\t\t\t\ttooltip.hide(0);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ttooltip.show();\n\t\t\t\t\t\ttooltips.push(tooltip);\n\n\t\t\t\t\t\ttooltipSeries.push(series);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tthis.setPrivate(\"tooltipSeries\", tooltipSeries);\n\n\t\tif (this.get(\"arrangeTooltips\")) {\n\n\t\t\tconst tooltipContainer = this._root.tooltipContainer;\n\n\t\t\tconst count = tooltips.length;\n\t\t\tconst average = sum / count;\n\n\t\t\tif (average > h / 2 + plotT.y) {\n\t\t\t\ttooltips.sort((a, b) => $order.compareNumber(b.get(\"pointTo\")!.y, a.get(\"pointTo\")!.y));\n\n\t\t\t\tlet prevY = plotB.y;\n\n\t\t\t\t$array.each(tooltips, (tooltip) => {\n\t\t\t\t\tlet height = tooltip.height();\n\t\t\t\t\tlet centerY = tooltip.get(\"centerY\");\n\t\t\t\t\tif (centerY instanceof Percent) {\n\t\t\t\t\t\theight *= centerY.value;\n\t\t\t\t\t}\n\t\t\t\t\theight += tooltip.get(\"marginBottom\", 0);\n\n\t\t\t\t\ttooltip.set(\"bounds\", { left: plotT.x, top: plotT.y, right: plotB.x, bottom: prevY })\n\t\t\t\t\ttooltip.setPrivate(\"customData\", { left: plotT.x, top: plotT.y, right: plotB.x, bottom: prevY })\n\t\t\t\t\tprevY = Math.min(prevY - height, tooltip._fy - height);\n\t\t\t\t\tif (tooltip.parent == tooltipContainer) {\n\t\t\t\t\t\ttooltipContainer.children.moveValue(tooltip, 0);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tif (prevY < 0) {\n\n\t\t\t\t\ttooltips.reverse();\n\t\t\t\t\tlet prevBottom = prevY;\n\n\t\t\t\t\t$array.each(tooltips, (tooltip) => {\n\t\t\t\t\t\tlet bounds = tooltip.get(\"bounds\");\n\t\t\t\t\t\tif (bounds) {\n\t\t\t\t\t\t\tlet top = bounds.top - prevY;\n\t\t\t\t\t\t\tlet bottom = bounds.bottom - prevY;\n\t\t\t\t\t\t\tif (top < prevBottom) {\n\t\t\t\t\t\t\t\ttop = prevBottom;\n\t\t\t\t\t\t\t\tbottom = top + tooltip.height();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttooltip.set(\"bounds\", { left: bounds.left, top: top, right: bounds.right, bottom: bottom })\n\t\t\t\t\t\t\tprevBottom = bounds.bottom - prevY + tooltip.get(\"marginBottom\", 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttooltips.reverse();\n\t\t\t\ttooltips.sort((a, b) => $order.compareNumber(a.get(\"pointTo\")!.y, b.get(\"pointTo\")!.y));\n\n\t\t\t\tlet prevY = 0;\n\t\t\t\t$array.each(tooltips, (tooltip) => {\n\t\t\t\t\tlet height = tooltip.height();\n\t\t\t\t\tlet centerY = tooltip.get(\"centerY\");\n\t\t\t\t\tif (centerY instanceof Percent) {\n\t\t\t\t\t\theight *= centerY.value;\n\t\t\t\t\t}\n\t\t\t\t\theight += tooltip.get(\"marginBottom\", 0);\n\n\t\t\t\t\ttooltip.set(\"bounds\", { left: plotT.x, top: prevY, right: plotB.x, bottom: Math.max(plotT.y + hh, prevY + height) })\n\t\t\t\t\tif (tooltip.parent == tooltipContainer) {\n\t\t\t\t\t\ttooltipContainer.children.moveValue(tooltip, 0);\n\t\t\t\t\t}\n\t\t\t\t\tprevY = Math.max(prevY + height, tooltip._fy + height);\n\t\t\t\t})\n\n\t\t\t\tif (prevY > hh) {\n\t\t\t\t\ttooltips.reverse();\n\t\t\t\t\tlet prevBottom = hh;\n\n\t\t\t\t\t$array.each(tooltips, (tooltip) => {\n\t\t\t\t\t\tlet bounds = tooltip.get(\"bounds\");\n\t\t\t\t\t\tif (bounds) {\n\t\t\t\t\t\t\tlet top = bounds.top - (hh - prevY);\n\t\t\t\t\t\t\tlet bottom = bounds.bottom - (hh - prevY);\n\t\t\t\t\t\t\tif (bottom > prevBottom) {\n\t\t\t\t\t\t\t\tbottom = prevBottom\n\t\t\t\t\t\t\t\ttop = bottom - tooltip.height();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttooltip.set(\"bounds\", { left: bounds.left, top: top, right: bounds.right, bottom: bottom })\n\t\t\t\t\t\t\tprevBottom = bottom - tooltip.height() - tooltip.get(\"marginBottom\", 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _tooltipToLocal(point: IPoint): IPoint {\n\t\treturn this.plotContainer.toLocal(point);\n\t}\n\n\t/**\n\t * Fully zooms out the chart.\n\t */\n\tpublic zoomOut() {\n\t\tthis.xAxes.each((axis) => {\n\t\t\taxis.setPrivate(\"updateScrollbar\", true);\n\t\t\taxis.zoom(0, 1);\n\t\t})\n\n\t\tthis.yAxes.each((axis) => {\n\t\t\taxis.setPrivate(\"updateScrollbar\", true);\n\t\t\taxis.zoom(0, 1);\n\t\t})\n\t}\n\n\tprotected _dispose() {\n\t\tsuper._dispose();\n\n\t\t// Explicitly disposing cursor to avoid memory leak of cursor adding\n\t\t// keyboard events after parent chart has been disposed\n\t\tconst cursor = this.get(\"cursor\");\n\t\tif (cursor) {\n\t\t\tcursor.dispose();\n\t\t}\n\t}\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}