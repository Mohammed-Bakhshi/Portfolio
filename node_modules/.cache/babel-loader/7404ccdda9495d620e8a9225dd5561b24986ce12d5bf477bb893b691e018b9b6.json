{"ast":null,"code":"import { AnimationState } from \"./util/Animation\";\nimport { Container } from \"./render/Container\";\nimport { Text } from \"./render/Text\";\nimport { HorizontalLayout } from \"./render/HorizontalLayout\";\nimport { VerticalLayout } from \"./render/VerticalLayout\";\nimport { GridLayout } from \"./render/GridLayout\";\nimport { Disposer } from \"./util/Disposer\";\nimport { ResizeSensor } from \"./util/ResizeSensor\";\nimport { InterfaceColors } from \"./util/InterfaceColors\";\nimport { Graphics } from \"./render/Graphics\";\nimport { Rectangle } from \"./render/Rectangle\";\nimport { Tooltip } from \"./render/Tooltip\";\nimport { NumberFormatter } from \"./util/NumberFormatter\";\nimport { DateFormatter } from \"./util/DateFormatter\";\nimport { DurationFormatter } from \"./util/DurationFormatter\";\nimport { Language } from \"./util/Language\";\nimport { EventDispatcher } from \"./util/EventDispatcher\";\nimport { DefaultTheme } from \"../themes/DefaultTheme\";\nimport { CanvasRenderer } from \"./render/backend/CanvasRenderer\";\nimport { p100, percent, isPercent, Percent } from \"./util/Percent\";\nimport { color } from \"./util/Color\";\nimport { populateString } from \"./util/PopulateString\";\nimport { registry } from \"./Registry\";\nimport * as $order from \"./util/Order\";\nimport * as $array from \"./util/Array\";\nimport * as $object from \"./util/Object\";\nimport * as $utils from \"./util/Utils\";\nimport * as $type from \"./util/Type\";\nimport en from \"../../locales/en\";\nfunction rAF(fps, callback) {\n  if (fps == null) {\n    requestAnimationFrame(callback);\n  } else {\n    setTimeout(() => {\n      requestAnimationFrame(callback);\n    }, 1000 / fps);\n  }\n}\n// TODO implement Disposer\n/**\r\n * Root element of the chart.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/getting-started/#Root_element} for more info\r\n */\nexport class Root {\n  constructor(id) {\n    let settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let isReal = arguments.length > 2 ? arguments[2] : undefined;\n    /**\r\n     * A reference to original chart container (div element).\r\n     */\n    Object.defineProperty(this, \"dom\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_inner\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_settings\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_isDirty\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, \"_isDirtyParents\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, \"_isDirtyAnimation\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, \"_dirty\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, \"_dirtyParents\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, \"_dirtyBounds\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, \"_dirtyPositions\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, \"_ticker\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: null\n    });\n    Object.defineProperty(this, \"_tickers\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, \"_updateTick\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: true\n    });\n    /**\r\n     * Root's event dispatcher.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n     */\n    Object.defineProperty(this, \"events\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: new EventDispatcher()\n    });\n    /**\r\n     * @ignore\r\n     * @todo needs description\r\n     */\n    Object.defineProperty(this, \"animationTime\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: null\n    });\n    Object.defineProperty(this, \"_animations\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, \"_renderer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_rootContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * Main content container.\r\n     */\n    Object.defineProperty(this, \"container\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * A [[Container]] used to display tooltips in.\r\n     */\n    Object.defineProperty(this, \"tooltipContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_tooltipContainerSettings\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_tooltip\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    // Locale-related\n    /**\r\n     * @ignore\r\n     */\n    Object.defineProperty(this, \"language\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: Language.new(this, {})\n    });\n    /**\r\n     * Locale used by the chart.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/}\r\n     */\n    Object.defineProperty(this, \"locale\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: en\n    });\n    // Date-time related\n    /**\r\n     * Use UTC when formatting date/time.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#utc-and-time-zones} for more info\r\n     */\n    Object.defineProperty(this, \"utc\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    /**\r\n     * If set, will format date/time in specific time zone.\r\n     *\r\n     * The value should be named time zone, e.g.:\r\n     * `\"America/Vancouver\"`, `\"Australia/Sydney\"`, `\"UTC\"`.\r\n     *\r\n     * NOTE: Using time zone feature may noticeable affect performance of the\r\n     * chart, especially with large data sets, since every single date will need\r\n     * to be recalculated.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#time-zone} for more info\r\n     * @since 5.1.0\r\n     */\n    Object.defineProperty(this, \"timezone\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * The maximum FPS that the Root will run at.\r\n     *\r\n     * If `undefined` it will run at the highest FPS.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Performance} for more info\r\n     */\n    Object.defineProperty(this, \"fps\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * Number formatter.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\r\n     */\n    Object.defineProperty(this, \"numberFormatter\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: NumberFormatter.new(this, {})\n    });\n    /**\r\n     * Date/time formatter.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n     */\n    Object.defineProperty(this, \"dateFormatter\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: DateFormatter.new(this, {})\n    });\n    /**\r\n     * Duration formatter.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n     */\n    Object.defineProperty(this, \"durationFormatter\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: DurationFormatter.new(this, {})\n    });\n    // Accessibility\n    /**\r\n     * Global tab index for using for the whole chart\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\r\n     */\n    Object.defineProperty(this, \"tabindex\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    //@todo maybe make this better\n    Object.defineProperty(this, \"_tabindexes\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, \"_a11yD\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, \"_focusElementDirty\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, \"_focusElementContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_focusedSprite\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_isShift\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_keyboardDragPoint\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_tooltipElementContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_readerAlertElement\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_logo\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_tooltipDiv\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * Used for dynamically-created CSS and JavaScript with strict source policies.\r\n     */\n    Object.defineProperty(this, \"nonce\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * Special color set to be used for various controls.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Interface_colors} for more info\r\n     */\n    Object.defineProperty(this, \"interfaceColors\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * An instance of vertical layout object that can be used to set `layout` setting\r\n     * of a [[Container]].\r\n     *\r\n     * @default VerticalLayout.new()\r\n     */\n    Object.defineProperty(this, \"verticalLayout\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: VerticalLayout.new(this, {})\n    });\n    /**\r\n     * An instance of horizontal layout object that can be used to set `layout` setting\r\n     * of a [[Container]].\r\n     *\r\n     * @default HorizontalLayout.new()\r\n     */\n    Object.defineProperty(this, \"horizontalLayout\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: HorizontalLayout.new(this, {})\n    });\n    /**\r\n     * An instance of grid layout object that can be used to set `layout` setting\r\n     * of a [[Container]].\r\n     *\r\n     * @default VerticalLayout.new()\r\n     */\n    Object.defineProperty(this, \"gridLayout\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: GridLayout.new(this, {})\n    });\n    Object.defineProperty(this, \"_paused\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    /**\r\n     * Indicates whether chart should resized automatically when parent container\r\n     * width and/or height changes.\r\n     *\r\n     * If disabled (`autoResize = false`) you can make the chart resize manually\r\n     * by calling root element's `resize()` method.\r\n     */\n    Object.defineProperty(this, \"autoResize\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: true\n    });\n    Object.defineProperty(this, \"_fontHash\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: \"\"\n    });\n    Object.defineProperty(this, \"_isDisposed\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, \"_disposers\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, \"_resizeSensorDisposer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_tooltips\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, \"_htmlElementContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_htmlEnabledContainers\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    if (!isReal) {\n      throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\n    }\n    this._settings = settings;\n    if (settings.accessible == false) {\n      this._a11yD = true;\n    }\n    if (settings.useSafeResolution == null) {\n      settings.useSafeResolution = true;\n    }\n    let resolution;\n    if (settings.useSafeResolution) {\n      resolution = $utils.getSafeResolution();\n    }\n    this._renderer = new CanvasRenderer(resolution);\n    let dom;\n    if (id instanceof HTMLElement) {\n      dom = id;\n    } else {\n      dom = document.getElementById(id);\n    }\n    $array.each(registry.rootElements, root => {\n      if (root.dom === dom) {\n        throw new Error(\"You cannot have multiple Roots on the same DOM node\");\n      }\n    });\n    this.interfaceColors = InterfaceColors.new(this, {});\n    if (dom === null) {\n      throw new Error(\"Could not find HTML element with id `\" + id + \"`\");\n    }\n    this.dom = dom;\n    let inner = document.createElement(\"div\");\n    inner.style.position = \"relative\";\n    inner.style.width = \"100%\";\n    inner.style.height = \"100%\";\n    dom.appendChild(inner);\n    const tooltipContainerBounds = settings.tooltipContainerBounds;\n    if (tooltipContainerBounds) {\n      this._tooltipContainerSettings = tooltipContainerBounds;\n    }\n    this._inner = inner;\n    this._updateComputedStyles();\n    registry.rootElements.push(this);\n  }\n  static new(id, settings) {\n    const root = new Root(id, settings, true);\n    root._init();\n    return root;\n  }\n  moveDOM(id) {\n    let dom;\n    if (id instanceof HTMLElement) {\n      dom = id;\n    } else {\n      dom = document.getElementById(id);\n    }\n    if (dom) {\n      while (this.dom.childNodes.length > 0) {\n        dom.appendChild(this.dom.childNodes[0]);\n      }\n      this.dom = dom;\n      this._initResizeSensor();\n      this.resize();\n    }\n  }\n  _handleLogo() {\n    if (this._logo) {\n      const w = this.dom.offsetWidth;\n      const h = this.dom.offsetHeight;\n      if (w <= 150 || h <= 60) {\n        this._logo.hide();\n      } else {\n        this._logo.show();\n      }\n    }\n  }\n  _showBranding() {\n    if (!this._logo) {\n      const logo = this.tooltipContainer.children.push(Container.new(this, {\n        interactive: true,\n        interactiveChildren: false,\n        position: \"absolute\",\n        setStateOnChildren: true,\n        paddingTop: 9,\n        paddingRight: 9,\n        paddingBottom: 9,\n        paddingLeft: 9,\n        scale: .6,\n        y: percent(100),\n        centerY: p100,\n        tooltipText: \"Created using amCharts 5\",\n        tooltipX: p100,\n        cursorOverStyle: \"pointer\",\n        background: Rectangle.new(this, {\n          fill: color(0x474758),\n          fillOpacity: 0,\n          tooltipY: 5\n        })\n      }));\n      const tooltip = Tooltip.new(this, {\n        pointerOrientation: \"horizontal\",\n        paddingTop: 4,\n        paddingRight: 7,\n        paddingBottom: 4,\n        paddingLeft: 7\n      });\n      tooltip.label.setAll({\n        fontSize: 12\n      });\n      tooltip.get(\"background\").setAll({\n        fill: this.interfaceColors.get(\"background\"),\n        stroke: this.interfaceColors.get(\"grid\"),\n        strokeOpacity: 0.3\n      });\n      logo.set(\"tooltip\", tooltip);\n      logo.events.on(\"click\", () => {\n        window.open(\"https://www.amcharts.com/\", \"_blank\");\n      });\n      logo.states.create(\"hover\", {});\n      const m = logo.children.push(Graphics.new(this, {\n        stroke: color(0xcccccc),\n        strokeWidth: 3,\n        svgPath: \"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6\"\n      }));\n      m.states.create(\"hover\", {\n        stroke: color(0x3CABFF)\n      });\n      const a = logo.children.push(Graphics.new(this, {\n        stroke: color(0x888888),\n        strokeWidth: 3,\n        svgPath: \"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0\"\n      }));\n      a.states.create(\"hover\", {\n        stroke: color(0x474758)\n      });\n      //logo.set(\"tooltip\", this._tooltip);\n      //logo.setPrivate(\"tooltipTarget\", logo.get(\"background\"));\n      this._logo = logo;\n      this._handleLogo();\n    }\n  }\n  _getRealSize() {\n    return this.dom.getBoundingClientRect();\n  }\n  _getCalculatedSize(rect) {\n    if (this._settings.calculateSize) {\n      return this._settings.calculateSize(rect);\n    } else {\n      return {\n        width: rect.width,\n        height: rect.height\n      };\n    }\n  }\n  _init() {\n    const settings = this._settings;\n    if (settings.accessible !== false) {\n      if (settings.focusable) {\n        this._inner.setAttribute(\"focusable\", \"true\");\n        this._inner.setAttribute(\"tabindex\", this.tabindex + \"\");\n      }\n      if (settings.ariaLabel) {\n        this._inner.setAttribute(\"aria-label\", settings.ariaLabel);\n      }\n      if (settings.role) {\n        this._inner.setAttribute(\"role\", settings.role);\n      }\n    }\n    const renderer = this._renderer;\n    const rect = this._getRealSize();\n    const size = this._getCalculatedSize(rect);\n    const width = Math.floor(size.width);\n    const height = Math.floor(size.height);\n    const realWidth = Math.floor(rect.width);\n    const realHeight = Math.floor(rect.height);\n    const rootContainer = Container.new(this, {\n      visible: true,\n      width: width,\n      height: height\n    });\n    this._rootContainer = rootContainer;\n    this._rootContainer._defaultThemes.push(DefaultTheme.new(this));\n    const container = rootContainer.children.push(Container.new(this, {\n      visible: true,\n      width: p100,\n      height: p100\n    }));\n    this.container = container;\n    renderer.resize(realWidth, realHeight, width, height);\n    //@todo: better appendChild - refer\n    this._inner.appendChild(renderer.view);\n    // TODO: TMP TMP TMP for testing only, remove\n    //renderer.debugGhostView = true;\n    this._initResizeSensor();\n    // HTML content holder\n    const htmlElementContainer = document.createElement(\"div\");\n    this._htmlElementContainer = htmlElementContainer;\n    htmlElementContainer.className = \"am5-html-container\";\n    htmlElementContainer.style.position = \"absolute\";\n    htmlElementContainer.style.pointerEvents = \"none\";\n    if (!this._tooltipContainerSettings) {\n      htmlElementContainer.style.overflow = \"hidden\";\n    }\n    this._inner.appendChild(htmlElementContainer);\n    if (this._a11yD !== true) {\n      // Create element which is used to make announcements to screen reader\n      const readerAlertElement = document.createElement(\"div\");\n      readerAlertElement.className = \"am5-reader-container\";\n      readerAlertElement.setAttribute(\"role\", \"alert\");\n      // readerAlertElement.style.zIndex = \"-100000\";\n      // readerAlertElement.style.opacity = \"0\";\n      // readerAlertElement.style.top = \"0\";\n      readerAlertElement.style.position = \"absolute\";\n      readerAlertElement.style.width = \"1px\";\n      readerAlertElement.style.height = \"1px\";\n      readerAlertElement.style.overflow = \"hidden\";\n      readerAlertElement.style.clip = \"rect(1px, 1px, 1px, 1px)\";\n      this._readerAlertElement = readerAlertElement;\n      this._inner.appendChild(this._readerAlertElement);\n      const focusElementContainer = document.createElement(\"div\");\n      focusElementContainer.className = \"am5-focus-container\";\n      focusElementContainer.style.position = \"absolute\";\n      focusElementContainer.style.pointerEvents = \"none\";\n      focusElementContainer.style.top = \"0px\";\n      focusElementContainer.style.left = \"0px\";\n      focusElementContainer.style.overflow = \"hidden\";\n      focusElementContainer.style.width = width + \"px\";\n      focusElementContainer.style.height = height + \"px\";\n      focusElementContainer.setAttribute(\"role\", \"graphics-document\");\n      $utils.setInteractive(focusElementContainer, false);\n      this._focusElementContainer = focusElementContainer;\n      this._inner.appendChild(this._focusElementContainer);\n      const tooltipElementContainer = document.createElement(\"div\");\n      this._tooltipElementContainer = tooltipElementContainer;\n      tooltipElementContainer.className = \"am5-tooltip-container\";\n      this._inner.appendChild(tooltipElementContainer);\n      // Add keyboard events for accessibility, e.g. simulating drag with arrow\n      // keys and click with ENTER\n      if ($utils.supports(\"keyboardevents\")) {\n        this._disposers.push($utils.addEventListener(window, \"keydown\", ev => {\n          const eventKey = $utils.getEventKey(ev);\n          if (eventKey == \"Shift\") {\n            this._isShift = true;\n          } else if (eventKey == \"Tab\") {\n            this._isShift = ev.shiftKey;\n          }\n        }));\n        this._disposers.push($utils.addEventListener(window, \"keyup\", ev => {\n          const eventKey = $utils.getEventKey(ev);\n          if (eventKey == \"Shift\") {\n            this._isShift = false;\n          }\n        }));\n        this._disposers.push($utils.addEventListener(focusElementContainer, \"click\", () => {\n          // Some screen readers convert ENTER (and some SPACE) press whil on\n          // focused element to a \"click\" event, preventing actual \"keydown\"\n          // event from firing. We're using this \"click\" event to still\n          // generate internal click events.\n          const focusedSprite = this._focusedSprite;\n          if (focusedSprite) {\n            const announceText = focusedSprite.get(\"clickAnnounceText\", \"\");\n            if (announceText !== \"\") {\n              this.readerAlert(announceText);\n            }\n            const downEvent = renderer.getEvent(new MouseEvent(\"click\"));\n            focusedSprite.events.dispatch(\"click\", {\n              type: \"click\",\n              originalEvent: downEvent.event,\n              point: downEvent.point,\n              simulated: true,\n              target: focusedSprite\n            });\n          }\n        }));\n        this._disposers.push($utils.addEventListener(focusElementContainer, \"keydown\", ev => {\n          const focusedSprite = this._focusedSprite;\n          if (focusedSprite) {\n            if (ev.key == \"Escape\") {\n              // ESC pressed - lose current focus\n              $utils.blur();\n              this._focusedSprite = undefined;\n            }\n            let dragOffsetX = 0;\n            let dragOffsetY = 0;\n            // TODO: figure out if using bogus MouseEvent is fine, or it will\n            // fail on some platforms\n            const eventKey = $utils.getEventKey(ev);\n            switch (eventKey) {\n              case \"Enter\":\n              case \" \":\n                const announceText = focusedSprite.get(\"clickAnnounceText\", \"\");\n                if (announceText !== \"\") {\n                  this.readerAlert(announceText);\n                }\n                if (eventKey == \" \" && focusedSprite.get(\"role\") != \"checkbox\") {\n                  return;\n                }\n                ev.preventDefault();\n                const downEvent = renderer.getEvent(new MouseEvent(\"mouse\"));\n                focusedSprite.events.dispatch(\"click\", {\n                  type: \"click\",\n                  originalEvent: downEvent.event,\n                  point: downEvent.point,\n                  simulated: true,\n                  target: focusedSprite\n                });\n                return;\n              case \"ArrowLeft\":\n                dragOffsetX = -6;\n                break;\n              case \"ArrowRight\":\n                dragOffsetX = 6;\n                break;\n              case \"ArrowUp\":\n                dragOffsetY = -6;\n                break;\n              case \"ArrowDown\":\n                dragOffsetY = 6;\n                break;\n              default:\n                return;\n            }\n            if (dragOffsetX != 0 || dragOffsetY != 0) {\n              ev.preventDefault();\n              if (!focusedSprite.isDragging()) {\n                // Start dragging\n                this._keyboardDragPoint = {\n                  x: 0,\n                  y: 0\n                };\n                const downEvent = renderer.getEvent(new MouseEvent(\"mousedown\", {\n                  clientX: 0,\n                  clientY: 0\n                }));\n                downEvent.point = {\n                  x: 0,\n                  y: 0\n                };\n                if (focusedSprite.events.isEnabled(\"pointerdown\")) {\n                  focusedSprite.events.dispatch(\"pointerdown\", {\n                    type: \"pointerdown\",\n                    originalEvent: downEvent.event,\n                    point: downEvent.point,\n                    simulated: true,\n                    target: focusedSprite\n                  });\n                }\n              } else {\n                // Move focus marker\n                //this._positionFocusElement(focusedSprite);\n              }\n              // Move incrementally\n              const dragPoint = this._keyboardDragPoint;\n              dragPoint.x += dragOffsetX;\n              dragPoint.y += dragOffsetY;\n              const moveEvent = renderer.getEvent(new MouseEvent(\"mousemove\", {\n                clientX: dragPoint.x,\n                clientY: dragPoint.y\n              }), false);\n              if (focusedSprite.events.isEnabled(\"globalpointermove\")) {\n                focusedSprite.events.dispatch(\"globalpointermove\", {\n                  type: \"globalpointermove\",\n                  originalEvent: moveEvent.event,\n                  point: moveEvent.point,\n                  simulated: true,\n                  target: focusedSprite\n                });\n              }\n            }\n          }\n        }));\n        this._disposers.push($utils.addEventListener(focusElementContainer, \"keyup\", ev => {\n          if (this._focusedSprite) {\n            const focusedSprite = this._focusedSprite;\n            const eventKey = $utils.getEventKey(ev);\n            switch (eventKey) {\n              case \"ArrowLeft\":\n              case \"ArrowRight\":\n              case \"ArrowUp\":\n              case \"ArrowDown\":\n                if (focusedSprite.isDragging()) {\n                  // Simulate drag stop\n                  const dragPoint = this._keyboardDragPoint;\n                  const upEvent = renderer.getEvent(new MouseEvent(\"mouseup\", {\n                    clientX: dragPoint.x,\n                    clientY: dragPoint.y\n                  }));\n                  if (focusedSprite.events.isEnabled(\"globalpointerup\")) {\n                    focusedSprite.events.dispatch(\"globalpointerup\", {\n                      type: \"globalpointerup\",\n                      originalEvent: upEvent.event,\n                      point: upEvent.point,\n                      simulated: true,\n                      target: focusedSprite\n                    });\n                  }\n                  //this._positionFocusElement(focusedSprite);\n                  this._keyboardDragPoint = undefined;\n                  // @todo dispatch mouseup event instead of calling dragStop?\n                  // this._dispatchEvent(\"globalpointerup\", target, upEvent);\n                  return;\n                } else if (focusedSprite.get(\"focusableGroup\")) {\n                  // Find next item in focusable group\n                  const group = focusedSprite.get(\"focusableGroup\");\n                  const items = this._tabindexes.filter(item => {\n                    return item.get(\"focusableGroup\") == group && item.getPrivate(\"focusable\") !== false && item.isVisibleDeep() ? true : false;\n                  });\n                  let index = items.indexOf(focusedSprite);\n                  const lastIndex = items.length - 1;\n                  index += eventKey == \"ArrowRight\" || eventKey == \"ArrowDown\" ? 1 : -1;\n                  if (index < 0) {\n                    index = lastIndex;\n                  } else if (index > lastIndex) {\n                    index = 0;\n                  }\n                  $utils.focus(items[index].getPrivate(\"focusElement\").dom);\n                }\n                break;\n              case \"Tab\":\n                const group = focusedSprite.get(\"focusableGroup\");\n                if (group && this._isShift) {\n                  this._focusNext(focusedSprite.getPrivate(\"focusElement\").dom, -1, group);\n                  return;\n                }\n                break;\n            }\n          }\n        }));\n      }\n    }\n    this._startTicker();\n    this.setThemes([]);\n    this._addTooltip();\n    if (!this._hasLicense()) {\n      this._showBranding();\n    }\n  }\n  _initResizeSensor() {\n    if (this._resizeSensorDisposer) {\n      this._resizeSensorDisposer.dispose();\n    }\n    this._resizeSensorDisposer = new ResizeSensor(this.dom, () => {\n      if (this.autoResize) {\n        this.resize();\n      }\n    });\n    this._disposers.push(this._resizeSensorDisposer);\n  }\n  /**\r\n   * If automatic resizing of char is disabled (`root.autoResize = false`), it\r\n   * can be resized manually by calling this method.\r\n   */\n  resize() {\n    const rect = this._getRealSize();\n    const size = this._getCalculatedSize(rect);\n    const w = Math.floor(size.width);\n    const h = Math.floor(size.height);\n    if (w > 0 && h > 0) {\n      const realWidth = Math.floor(rect.width);\n      const realHeight = Math.floor(rect.height);\n      const htmlElementContainer = this._htmlElementContainer;\n      htmlElementContainer.style.width = w + \"px\";\n      htmlElementContainer.style.height = h + \"px\";\n      if (this._a11yD !== true) {\n        const focusElementContainer = this._focusElementContainer;\n        focusElementContainer.style.width = w + \"px\";\n        focusElementContainer.style.height = h + \"px\";\n      }\n      this._renderer.resize(realWidth, realHeight, w, h);\n      const rootContainer = this._rootContainer;\n      rootContainer.setPrivate(\"width\", w);\n      rootContainer.setPrivate(\"height\", h);\n      this._render();\n      this._handleLogo();\n    }\n  }\n  _render() {\n    this._renderer.render(this._rootContainer._display);\n    if (this._focusElementDirty) {\n      this._updateCurrentFocus();\n      this._focusElementDirty = false;\n    }\n  }\n  _runTickers(currentTime) {\n    $array.each(this._tickers, f => {\n      f(currentTime);\n    });\n  }\n  _runAnimations(currentTime) {\n    let running = 0;\n    $array.keepIf(this._animations, animation => {\n      const state = animation._runAnimation(currentTime);\n      if (state === AnimationState.Stopped) {\n        return false;\n      } else if (state === AnimationState.Playing) {\n        ++running;\n        return true;\n      } else {\n        return true;\n      }\n    });\n    this._isDirtyAnimation = false;\n    return running === 0;\n  }\n  _runDirties() {\n    //console.log(\"tick **************************************************************\");\n    let allParents = {};\n    while (this._isDirtyParents) {\n      // This must be before calling _prepareChildren\n      this._isDirtyParents = false;\n      $object.keys(this._dirtyParents).forEach(key => {\n        const parent = this._dirtyParents[key];\n        delete this._dirtyParents[key];\n        if (!parent.isDisposed()) {\n          allParents[parent.uid] = parent;\n          parent._prepareChildren();\n        }\n      });\n    }\n    $object.keys(allParents).forEach(key => {\n      allParents[key]._updateChildren();\n    });\n    const objects = [];\n    //\t\tconsole.log(\"_beforeChanged\")\n    $object.keys(this._dirty).forEach(key => {\n      const entity = this._dirty[key];\n      if (entity.isDisposed()) {\n        delete this._dirty[entity.uid];\n      } else {\n        objects.push(entity);\n        entity._beforeChanged();\n      }\n    });\n    //\t\tconsole.log(\"_changed\")\n    objects.forEach(entity => {\n      entity._changed();\n      delete this._dirty[entity.uid];\n      entity._clearDirty();\n    });\n    this._isDirty = false;\n    const depths = {};\n    const bounds = [];\n    $object.keys(this._dirtyBounds).forEach(key => {\n      const entity = this._dirtyBounds[key];\n      delete this._dirtyBounds[key];\n      if (!entity.isDisposed()) {\n        depths[entity.uid] = entity.depth();\n        bounds.push(entity);\n      }\n    });\n    this._positionHTMLElements();\n    // High depth -> low depth\n    bounds.sort((x, y) => {\n      return $order.compare(depths[y.uid], depths[x.uid]);\n    });\n    //\t\tconsole.log(\"_updateBounds\")\n    bounds.forEach(entity => {\n      entity._updateBounds();\n    });\n    //\t\tconsole.log(\"_updatePosition\")\n    const dirtyPositions = this._dirtyPositions;\n    $object.keys(dirtyPositions).forEach(key => {\n      const sprite = dirtyPositions[key];\n      delete dirtyPositions[key];\n      if (!sprite.isDisposed()) {\n        sprite._updatePosition();\n      }\n    });\n    //\t\tconsole.log(\"_afterChanged\")\n    objects.forEach(entity => {\n      entity._afterChanged();\n    });\n  }\n  _renderFrame(currentTime) {\n    if (this._updateTick) {\n      if (this.events.isEnabled(\"framestarted\")) {\n        this.events.dispatch(\"framestarted\", {\n          type: \"framestarted\",\n          target: this,\n          timestamp: currentTime\n        });\n      }\n      this._checkComputedStyles();\n      this._runTickers(currentTime);\n      const animationDone = this._runAnimations(currentTime);\n      this._runDirties();\n      this._render();\n      this._renderer.resetImageArray();\n      this._positionHTMLElements();\n      if (this.events.isEnabled(\"frameended\")) {\n        this.events.dispatch(\"frameended\", {\n          type: \"frameended\",\n          target: this,\n          timestamp: currentTime\n        });\n      }\n      return this._tickers.length === 0 && animationDone && !this._isDirtyAnimation && !this._isDirty;\n    } else {\n      return true;\n    }\n  }\n  _runTicker(currentTime, now) {\n    if (!this.isDisposed()) {\n      this.animationTime = currentTime;\n      const done = this._renderFrame(currentTime);\n      // No more work to do\n      if (done) {\n        this._ticker = null;\n        this.animationTime = null;\n      } else {\n        if (!this._paused) {\n          if (now) {\n            this._ticker;\n          } else {\n            rAF(this.fps, this._ticker);\n          }\n        }\n      }\n    }\n  }\n  _runTickerNow() {\n    let timeout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10000;\n    if (!this.isDisposed()) {\n      const endTime = performance.now() + timeout;\n      for (;;) {\n        const currentTime = performance.now();\n        if (currentTime >= endTime) {\n          this.animationTime = null;\n          break;\n        }\n        this.animationTime = currentTime;\n        const done = this._renderFrame(currentTime);\n        if (done) {\n          this.animationTime = null;\n          break;\n        }\n      }\n    }\n  }\n  _startTicker() {\n    if (this._ticker === null) {\n      this.animationTime = null;\n      this._ticker = currentTime => {\n        this._runTicker(currentTime);\n      };\n      rAF(this.fps, this._ticker);\n    }\n  }\n  /**\r\n   * Returns whether the root is updating or not.\r\n   */\n  get updateTick() {\n    return this._updateTick;\n  }\n  /**\r\n   * Enables or disables the root updating.\r\n   */\n  set updateTick(value) {\n    this._updateTick = value;\n    if (value) {\n      this._startTicker();\n    }\n  }\n  _addDirtyEntity(entity) {\n    this._isDirty = true;\n    if (this._dirty[entity.uid] === undefined) {\n      this._dirty[entity.uid] = entity;\n    }\n    this._startTicker();\n  }\n  _addDirtyParent(parent) {\n    this._isDirty = true;\n    this._isDirtyParents = true;\n    if (this._dirtyParents[parent.uid] === undefined) {\n      this._dirtyParents[parent.uid] = parent;\n    }\n    this._startTicker();\n  }\n  _addDirtyBounds(entity) {\n    this._isDirty = true;\n    if (this._dirtyBounds[entity.uid] === undefined) {\n      this._dirtyBounds[entity.uid] = entity;\n    }\n    this._startTicker();\n  }\n  _addDirtyPosition(sprite) {\n    this._isDirty = true;\n    if (this._dirtyPositions[sprite.uid] === undefined) {\n      this._dirtyPositions[sprite.uid] = sprite;\n    }\n    this._startTicker();\n  }\n  _addAnimation(animation) {\n    this._isDirtyAnimation = true;\n    // TODO use numeric id instead\n    if (this._animations.indexOf(animation) === -1) {\n      this._animations.push(animation);\n    }\n    this._startTicker();\n  }\n  _markDirty() {\n    this._isDirty = true;\n  }\n  _markDirtyRedraw() {\n    this.events.once(\"frameended\", () => {\n      this._isDirty = true;\n      this._startTicker();\n    });\n  }\n  eachFrame(f) {\n    this._tickers.push(f);\n    this._startTicker();\n    return new Disposer(() => {\n      $array.removeFirst(this._tickers, f);\n    });\n  }\n  markDirtyGlobal(container) {\n    if (!container) {\n      container = this.container;\n    }\n    container.walkChildren(child => {\n      if (child instanceof Container) {\n        this.markDirtyGlobal(child);\n      }\n      child.markDirty();\n      child.markDirtyBounds();\n    });\n  }\n  /**\r\n   * Returns width of the target container, in pixels.\r\n   *\r\n   * @return Width\r\n   */\n  width() {\n    // TODO make this more efficient, maybe just return the renderer's width ?\n    return Math.floor(this._getCalculatedSize(this._getRealSize()).width);\n  }\n  /**\r\n   * Returns height of the target container, in pixels.\r\n   *\r\n   * @return Height\r\n   */\n  height() {\n    // TODO make this more efficient, maybe just return the renderer's height ?\n    return Math.floor(this._getCalculatedSize(this._getRealSize()).height);\n  }\n  /**\r\n   * Disposes root and all the content in it.\r\n   */\n  dispose() {\n    if (!this._isDisposed) {\n      this._isDisposed = true;\n      this._rootContainer.dispose();\n      this._renderer.dispose();\n      this.horizontalLayout.dispose();\n      this.verticalLayout.dispose();\n      this.interfaceColors.dispose();\n      $array.each(this._disposers, x => {\n        x.dispose();\n      });\n      if (this._inner) {\n        $utils.removeElement(this._inner);\n      }\n      $array.remove(registry.rootElements, this);\n    }\n  }\n  /**\r\n   * Returns `true` if root element is disposed.\r\n   *\r\n   * @return Disposed?\r\n   */\n  isDisposed() {\n    return this._isDisposed;\n  }\n  /**\r\n   * Triggers screen reader read out a message.\r\n   *\r\n   * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\r\n   * @param  text  Alert text\r\n   */\n  readerAlert(text) {\n    if (this._a11yD !== true) {\n      this._readerAlertElement.innerHTML = $utils.stripTags(text);\n    }\n  }\n  /**\r\n   * Sets themes to be used for the chart.\r\n   *\r\n   * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\r\n   * @param  themes  A list of themes\r\n   */\n  setThemes(themes) {\n    this._rootContainer.set(\"themes\", themes);\n    // otherwise new themes are not applied\n    const tooltipContainer = this.tooltipContainer;\n    if (tooltipContainer) {\n      tooltipContainer._applyThemes();\n    }\n    // @todo review this\n    const interfaceColors = this.interfaceColors;\n    if (interfaceColors) {\n      interfaceColors._applyThemes();\n    }\n  }\n  _addTooltip() {\n    if (!this.tooltipContainer) {\n      const tooltipContainerSettings = this._tooltipContainerSettings;\n      const tooltipContainer = this._rootContainer.children.push(Container.new(this, {\n        position: \"absolute\",\n        isMeasured: false,\n        width: p100,\n        height: p100,\n        layer: tooltipContainerSettings ? 35 : 30,\n        layerMargin: tooltipContainerSettings ? tooltipContainerSettings : undefined\n      }));\n      this.tooltipContainer = tooltipContainer;\n      const tooltip = Tooltip.new(this, {});\n      this.container.set(\"tooltip\", tooltip);\n      tooltip.hide(0);\n      this._tooltip = tooltip;\n    }\n  }\n  /**\r\n   * Accesibility\r\n   */\n  _registerTabindexOrder(target) {\n    if (this._a11yD == true) {\n      return;\n    }\n    if (target.get(\"focusable\")) {\n      $array.pushOne(this._tabindexes, target);\n    } else {\n      $array.remove(this._tabindexes, target);\n    }\n    this._invalidateTabindexes();\n  }\n  _unregisterTabindexOrder(target) {\n    if (this._a11yD == true) {\n      return;\n    }\n    $array.remove(this._tabindexes, target);\n    this._invalidateTabindexes();\n  }\n  _invalidateTabindexes() {\n    if (this._a11yD == true) {\n      return;\n    }\n    this._tabindexes.sort((a, b) => {\n      const aindex = a.get(\"tabindexOrder\", 0);\n      const bindex = b.get(\"tabindexOrder\", 0);\n      if (aindex == bindex) {\n        return 0;\n      } else if (aindex > bindex) {\n        return 1;\n      } else {\n        return -1;\n      }\n    });\n    const groups = [];\n    $array.each(this._tabindexes, (item, index) => {\n      if (!item.getPrivate(\"focusElement\")) {\n        this._makeFocusElement(index, item);\n      } else {\n        this._moveFocusElement(index, item);\n      }\n      const group = item.get(\"focusableGroup\");\n      if (group && item.getPrivate(\"focusable\") !== false) {\n        if (groups.indexOf(group) !== -1) {\n          // Non-first element in the group, make it not directly focusable\n          item.getPrivate(\"focusElement\").dom.setAttribute(\"tabindex\", \"-1\");\n        } else {\n          groups.push(group);\n        }\n      }\n    });\n  }\n  _updateCurrentFocus() {\n    if (this._a11yD == true) {\n      return;\n    }\n    if (this._focusedSprite) {\n      this._decorateFocusElement(this._focusedSprite);\n      this._positionFocusElement(this._focusedSprite);\n    }\n  }\n  _decorateFocusElement(target, focusElement) {\n    if (this._a11yD == true) {\n      return;\n    }\n    // Decorate with proper accessibility attributes\n    if (!focusElement) {\n      focusElement = target.getPrivate(\"focusElement\").dom;\n    }\n    if (!focusElement) {\n      return;\n    }\n    const role = target.get(\"role\");\n    if (role) {\n      focusElement.setAttribute(\"role\", role);\n    } else {\n      focusElement.removeAttribute(\"role\");\n    }\n    const ariaLabel = target.get(\"ariaLabel\");\n    if (ariaLabel) {\n      const label = populateString(target, ariaLabel);\n      focusElement.setAttribute(\"aria-label\", label);\n    } else {\n      focusElement.removeAttribute(\"aria-label\");\n    }\n    const ariaLive = target.get(\"ariaLive\");\n    if (ariaLive) {\n      focusElement.setAttribute(\"aria-live\", ariaLive);\n    } else {\n      focusElement.removeAttribute(\"aria-live\");\n    }\n    const ariaChecked = target.get(\"ariaChecked\");\n    if (ariaChecked != null && role && [\"checkbox\", \"option\", \"radio\", \"menuitemcheckbox\", \"menuitemradio\", \"treeitem\"].indexOf(role) !== -1) {\n      focusElement.setAttribute(\"aria-checked\", ariaChecked ? \"true\" : \"false\");\n    } else {\n      focusElement.removeAttribute(\"aria-checked\");\n    }\n    const ariaCurrent = target.get(\"ariaCurrent\");\n    if (ariaCurrent != null) {\n      focusElement.setAttribute(\"aria-current\", ariaCurrent);\n    } else {\n      focusElement.removeAttribute(\"aria-current\");\n    }\n    const ariaSelected = target.get(\"ariaSelected\");\n    if (ariaSelected != null && role && [\"gridcell\", \"option\", \"row\", \"tab\", \"columnheader\", \"rowheader\", \"treeitem\"].indexOf(role) !== -1) {\n      focusElement.setAttribute(\"aria-selected\", ariaSelected ? \"true\" : \"false\");\n    } else {\n      focusElement.removeAttribute(\"aria-selected\");\n    }\n    if (target.get(\"ariaHidden\")) {\n      focusElement.setAttribute(\"aria-hidden\", \"true\");\n    } else {\n      focusElement.removeAttribute(\"aria-hidden\");\n    }\n    const ariaOrientation = target.get(\"ariaOrientation\");\n    if (ariaOrientation) {\n      focusElement.setAttribute(\"aria-orientation\", ariaOrientation);\n    } else {\n      focusElement.removeAttribute(\"aria-orientation\");\n    }\n    const ariaValueNow = target.get(\"ariaValueNow\");\n    if (ariaValueNow) {\n      focusElement.setAttribute(\"aria-valuenow\", ariaValueNow);\n    } else {\n      focusElement.removeAttribute(\"aria-valuenow\");\n    }\n    const ariaValueMin = target.get(\"ariaValueMin\");\n    if (ariaValueMin) {\n      focusElement.setAttribute(\"aria-valuemin\", ariaValueMin);\n    } else {\n      focusElement.removeAttribute(\"aria-valuemin\");\n    }\n    const ariaValueMax = target.get(\"ariaValueMax\");\n    if (ariaValueMax) {\n      focusElement.setAttribute(\"aria-valuemax\", ariaValueMax);\n    } else {\n      focusElement.removeAttribute(\"aria-valuemax\");\n    }\n    const ariaValueText = target.get(\"ariaValueText\");\n    if (ariaValueText) {\n      focusElement.setAttribute(\"aria-valuetext\", ariaValueText);\n    } else {\n      focusElement.removeAttribute(\"aria-valuetext\");\n    }\n    const ariaControls = target.get(\"ariaControls\");\n    if (ariaControls) {\n      focusElement.setAttribute(\"aria-controls\", ariaControls);\n    } else {\n      focusElement.removeAttribute(\"aria-controls\");\n    }\n    if (target.get(\"visible\") && target.get(\"opacity\") !== 0 && target.get(\"role\") != \"tooltip\" && !target.isHidden() && target.getPrivate(\"focusable\") !== false) {\n      if (focusElement.getAttribute(\"tabindex\") != \"-1\") {\n        focusElement.setAttribute(\"tabindex\", \"\" + this.tabindex);\n      }\n      focusElement.removeAttribute(\"aria-hidden\");\n    } else {\n      focusElement.removeAttribute(\"tabindex\");\n      focusElement.setAttribute(\"aria-hidden\", \"true\");\n    }\n  }\n  _makeFocusElement(index, target) {\n    if (target.getPrivate(\"focusElement\") || this._a11yD == true) {\n      return;\n    }\n    // Init\n    const focusElement = document.createElement(\"div\");\n    if (target.get(\"role\") != \"tooltip\") {\n      focusElement.tabIndex = this.tabindex;\n    }\n    focusElement.style.position = \"absolute\";\n    $utils.setInteractive(focusElement, false);\n    const disposers = [];\n    target.setPrivate(\"focusElement\", {\n      dom: focusElement,\n      disposers\n    });\n    this._decorateFocusElement(target);\n    disposers.push($utils.addEventListener(focusElement, \"focus\", ev => {\n      this._handleFocus(ev);\n    }));\n    disposers.push($utils.addEventListener(focusElement, \"blur\", ev => {\n      this._handleBlur(ev);\n    }));\n    this._moveFocusElement(index, target);\n  }\n  _removeFocusElement(target) {\n    if (this._a11yD == true) {\n      return;\n    }\n    $array.remove(this._tabindexes, target);\n    const focusElement = target.getPrivate(\"focusElement\");\n    if (focusElement) {\n      const container = this._focusElementContainer;\n      container.removeChild(focusElement.dom);\n      $array.each(focusElement.disposers, x => {\n        x.dispose();\n      });\n    }\n  }\n  _hideFocusElement(target) {\n    if (this._a11yD == true) {\n      return;\n    }\n    const focusElement = target.getPrivate(\"focusElement\");\n    focusElement.dom.style.display = \"none\";\n  }\n  _moveFocusElement(index, target) {\n    if (this._a11yD == true) {\n      return;\n    }\n    // Get container\n    const container = this._focusElementContainer;\n    const focusElement = target.getPrivate(\"focusElement\").dom;\n    if (focusElement === this._focusElementContainer.children[index]) {\n      // Nothing to do\n      return;\n    }\n    const next = this._focusElementContainer.children[index + 1];\n    if (next) {\n      container.insertBefore(focusElement, next);\n    } else {\n      container.append(focusElement);\n    }\n  }\n  _positionFocusElement(target) {\n    if (this._a11yD == true || target == undefined) {\n      return;\n    }\n    const bounds = target.globalBounds();\n    let width = bounds.right == bounds.left ? target.width() : bounds.right - bounds.left;\n    let height = bounds.top == bounds.bottom ? target.height() : bounds.bottom - bounds.top;\n    const padding = this._settings.focusPadding !== undefined ? this._settings.focusPadding : 2;\n    let x = bounds.left - padding;\n    let y = bounds.top - padding;\n    if (width < 0) {\n      x += width;\n      width = Math.abs(width);\n    }\n    if (height < 0) {\n      y += height;\n      height = Math.abs(height);\n    }\n    const focusElement = target.getPrivate(\"focusElement\").dom;\n    focusElement.style.top = y + \"px\";\n    focusElement.style.left = x + \"px\";\n    focusElement.style.width = width + padding * 2 + \"px\";\n    focusElement.style.height = height + padding * 2 + \"px\";\n  }\n  _getSpriteByFocusElement(target) {\n    let found;\n    $array.eachContinue(this._tabindexes, (item, _index) => {\n      if (item.getPrivate(\"focusElement\").dom === target) {\n        found = item;\n        return false;\n      }\n      return true;\n    });\n    return found;\n  }\n  _handleFocus(ev) {\n    if (this._a11yD == true) {\n      return;\n    }\n    // Get element\n    //const focused = this._tabindexes[index];\n    const focused = this._getSpriteByFocusElement(ev.target);\n    if (!focused) {\n      return;\n    }\n    // Jump over hidden elements\n    if (!focused.isVisibleDeep()) {\n      this._focusNext(ev.target, this._isShift ? -1 : 1);\n      return;\n    }\n    // Size and position\n    this._positionFocusElement(focused);\n    //this._decorateFocusElement(focused);\n    this._focusedSprite = focused;\n    if (focused.events.isEnabled(\"focus\")) {\n      focused.events.dispatch(\"focus\", {\n        type: \"focus\",\n        originalEvent: ev,\n        target: focused\n      });\n    }\n  }\n  _focusNext(el, direction, group) {\n    if (this._a11yD == true) {\n      return;\n    }\n    const focusableElements = Array.from(document.querySelectorAll(['a[href]', 'area[href]', 'button:not([disabled])', 'details', 'input:not([disabled])', 'iframe:not([disabled])', 'select:not([disabled])', 'textarea:not([disabled])', '[contentEditable=\"\"]', '[contentEditable=\"true\"]', '[contentEditable=\"TRUE\"]', '[tabindex]:not([tabindex^=\"-\"])'\n    //':not([disabled])'\n    ].join(',')));\n    let index = focusableElements.indexOf(el) + direction;\n    if (index < 0) {\n      index = focusableElements.length - 1;\n    } else if (index >= focusableElements.length) {\n      index = 0;\n    }\n    const targetElement = focusableElements[index];\n    if (group && direction == -1) {\n      const target = this._getSpriteByFocusElement(targetElement);\n      if (target && target.get(\"focusableGroup\") == group) {\n        this._focusNext(targetElement, direction);\n        return;\n      }\n    }\n    targetElement.focus();\n  }\n  _handleBlur(ev) {\n    if (this._a11yD == true) {\n      return;\n    }\n    const focused = this._focusedSprite;\n    if (focused && !focused.isDisposed() && focused.events.isEnabled(\"blur\")) {\n      focused.events.dispatch(\"blur\", {\n        type: \"blur\",\n        originalEvent: ev,\n        target: focused\n      });\n    }\n    this._focusedSprite = undefined;\n  }\n  /**\r\n   * @ignore\r\n   */\n  updateTooltip(target) {\n    if (this._a11yD == true) {\n      return;\n    }\n    const text = $utils.stripTags(target._getText());\n    let tooltipElement = target.getPrivate(\"tooltipElement\");\n    if (target.get(\"role\") == \"tooltip\" && text != \"\") {\n      if (!tooltipElement) {\n        tooltipElement = this._makeTooltipElement(target);\n      }\n      if (tooltipElement.innerHTML != text) {\n        tooltipElement.innerHTML = text;\n      }\n      tooltipElement.setAttribute(\"aria-hidden\", target.isVisibleDeep() ? \"false\" : \"true\");\n    } else if (tooltipElement) {\n      tooltipElement.remove();\n      target.removePrivate(\"tooltipElement\");\n    }\n  }\n  _makeTooltipElement(target) {\n    const container = this._tooltipElementContainer;\n    const tooltipElement = document.createElement(\"div\");\n    tooltipElement.style.position = \"absolute\";\n    tooltipElement.style.width = \"1px\";\n    tooltipElement.style.height = \"1px\";\n    tooltipElement.style.overflow = \"hidden\";\n    tooltipElement.style.clip = \"rect(1px, 1px, 1px, 1px)\";\n    $utils.setInteractive(tooltipElement, false);\n    this._decorateFocusElement(target, tooltipElement);\n    container.append(tooltipElement);\n    target.setPrivate(\"tooltipElement\", tooltipElement);\n    return tooltipElement;\n  }\n  _removeTooltipElement(target) {\n    if (this._a11yD == true) {\n      return;\n    }\n    const tooltipElement = target.getPrivate(\"tooltipElement\");\n    if (tooltipElement) {\n      const parent = tooltipElement.parentElement;\n      if (parent) {\n        parent.removeChild(tooltipElement);\n      }\n    }\n  }\n  _invalidateAccessibility(target) {\n    if (this._a11yD == true) {\n      return;\n    }\n    this._focusElementDirty = true;\n    const focusElement = target.getPrivate(\"focusElement\");\n    if (target.get(\"focusable\")) {\n      if (focusElement) {\n        this._decorateFocusElement(target);\n        this._positionFocusElement(target);\n      }\n      // else {\n      // \tthis._renderer._makeFocusElement(0, this);\n      // }\n    } else if (focusElement) {\n      this._removeFocusElement(target);\n    }\n    //this.updateCurrentFocus();\n  }\n  /**\r\n   * Returns `true` if `target` is currently focused.\r\n   *\r\n   * @param   target  Target\r\n   * @return          Focused?\r\n   */\n  focused(target) {\n    return this._focusedSprite === target;\n  }\n  /**\r\n   * Converts document coordinates to coordinates withing root element.\r\n   *\r\n   * @param   point  Document point\r\n   * @return         Root point\r\n   */\n  documentPointToRoot(point) {\n    const rect = this._getRealSize();\n    const size = this._getCalculatedSize(rect);\n    const scaleWidth = size.width / rect.width;\n    const scaleHeight = size.height / rect.height;\n    return {\n      x: (point.x - rect.left) * scaleWidth,\n      y: (point.y - rect.top) * scaleHeight\n    };\n  }\n  /**\r\n   * Converts root coordinates to document\r\n   *\r\n   * @param   point  Document point\r\n   * @return         Root point\r\n   */\n  rootPointToDocument(point) {\n    const rect = this._getRealSize();\n    const size = this._getCalculatedSize(rect);\n    const scaleWidth = size.width / rect.width;\n    const scaleHeight = size.height / rect.height;\n    return {\n      x: point.x / scaleWidth + rect.left,\n      y: point.y / scaleHeight + rect.top\n    };\n  }\n  /**\r\n   * @ignore\r\n   */\n  addDisposer(disposer) {\n    this._disposers.push(disposer);\n    return disposer;\n  }\n  _updateComputedStyles() {\n    const styles = window.getComputedStyle(this.dom);\n    let fontHash = \"\";\n    $object.each(styles, (key, val) => {\n      if ($type.isString(key) && key.match(/^font/)) {\n        fontHash += val;\n      }\n    });\n    const changed = fontHash != this._fontHash;\n    if (changed) {\n      this._fontHash = fontHash;\n    }\n    return changed;\n  }\n  _checkComputedStyles() {\n    if (this._updateComputedStyles()) {\n      this._invalidateLabelBounds(this.container);\n    }\n  }\n  _invalidateLabelBounds(target) {\n    if (target instanceof Container) {\n      target.children.each(child => {\n        this._invalidateLabelBounds(child);\n      });\n    } else if (target instanceof Text) {\n      target.markDirtyBounds();\n    }\n  }\n  /**\r\n   * To all the clever heads out there. Yes, we did not make any attempts to\r\n   * scramble this.\r\n   *\r\n   * This is a part of a tool meant for our users to manage their commercial\r\n   * licenses for removal of amCharts branding from charts.\r\n   *\r\n   * The only legit way to do so is to purchase a commercial license for amCharts:\r\n   * https://www.amcharts.com/online-store/\r\n   *\r\n   * Removing or altering this code, or disabling amCharts branding in any other\r\n   * way is against the license and thus illegal.\r\n   */\n  _hasLicense() {\n    for (let i = 0; i < registry.licenses.length; i++) {\n      if (registry.licenses[i].match(/^AM5C.{5,}/i)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  _licenseApplied() {\n    if (this._logo) {\n      this._logo.set(\"forceHidden\", true);\n    }\n  }\n  /**\r\n   * @ignore\r\n   */\n  get debugGhostView() {\n    return this._renderer.debugGhostView;\n  }\n  /**\r\n   * @ignore\r\n   */\n  set debugGhostView(value) {\n    this._renderer.debugGhostView = value;\n  }\n  /**\r\n   * Set this to `true` if you need chart to require first a tap onto it before\r\n   * touch gesture related functionality like zoom/pan is turned on.\r\n   *\r\n   * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\r\n   * @default false\r\n   * @since 5.2.9\r\n   * @param  value  Needs a tap to activate touch functions\r\n   */\n  set tapToActivate(value) {\n    this._renderer.tapToActivate = value;\n  }\n  /**\r\n   * @return Needs a tap to activate touch functions\r\n   */\n  get tapToActivate() {\n    return this._renderer.tapToActivate;\n  }\n  /**\r\n   * If `tapToActivate` is set to `true`, this setting will determine number\r\n   * of milliseconds the chart will stay \"active\", before releasing the\r\n   * controls back to the page.\r\n   *\r\n   * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\r\n   * @default 3000\r\n   * @since 5.2.9\r\n   * @param  value  Timeout\r\n   */\n  set tapToActivateTimeout(value) {\n    this._renderer.tapToActivateTimeout = value;\n  }\n  /**\r\n   * @return Timeout\r\n   */\n  get tapToActivateTimeout() {\n    return this._renderer.tapToActivateTimeout;\n  }\n  _makeHTMLElement(target) {\n    // Get container\n    const container = this._htmlElementContainer;\n    // Init\n    const htmlElement = document.createElement(\"div\");\n    target.setPrivate(\"htmlElement\", htmlElement);\n    //htmlElement.tabIndex = this.tabindex;\n    htmlElement.style.position = \"absolute\";\n    htmlElement.style.overflow = \"auto\";\n    htmlElement.style.boxSizing = \"border-box\";\n    $utils.setInteractive(htmlElement, target.get(\"interactive\", false));\n    // Translate events\n    if (target.events.isEnabled(\"click\")) {\n      $utils.setInteractive(htmlElement, true);\n      this._disposers.push($utils.addEventListener(htmlElement, \"click\", ev => {\n        const downEvent = this._renderer.getEvent(ev);\n        target.events.dispatch(\"click\", {\n          type: \"click\",\n          originalEvent: downEvent.event,\n          point: downEvent.point,\n          simulated: false,\n          target: target\n        });\n      }));\n    }\n    this._positionHTMLElement(target);\n    container.append(htmlElement);\n    $array.pushOne(this._htmlEnabledContainers, target);\n    return htmlElement;\n  }\n  _positionHTMLElements() {\n    $array.each(this._htmlEnabledContainers, target => {\n      this._positionHTMLElement(target);\n    });\n  }\n  _positionHTMLElement(target) {\n    const htmlElement = target.getPrivate(\"htmlElement\");\n    if (htmlElement) {\n      // Translate settings\n      const visualSettings = [\"paddingTop\", \"paddingRight\", \"paddingBottom\", \"paddingLeft\", \"minWidth\", \"minHeight\", \"maxWidth\", \"maxHeight\"];\n      $array.each(visualSettings, setting => {\n        const value = target.get(setting);\n        if (value) {\n          htmlElement.style[setting] = value + \"px\";\n        } else {\n          htmlElement.style[setting] = \"\";\n        }\n      });\n      // Init and reset scale / rotation\n      const scale = target.compositeScale() || 1;\n      const rotation = target.compositeRotation() || 0;\n      htmlElement.style.transform = \"\";\n      htmlElement.style.transformOrigin = \"\";\n      // Deal with opacity\n      const opacity = target.compositeOpacity();\n      setTimeout(() => {\n        htmlElement.style.opacity = opacity + \"\";\n      }, 10);\n      const visible = target.isVisibleDeep();\n      if (visible) {\n        htmlElement.style.display = \"block\";\n      }\n      // Deal with position\n      // const bounds = target.globalBounds();\n      // htmlElement.style.top = (bounds.top) + \"px\";\n      // htmlElement.style.left = (bounds.left) + \"px\";\n      let pos = {\n        x: target.x() + target.get(\"dx\", 0),\n        y: target.y() + target.get(\"dy\", 0)\n      };\n      if (target.parent) {\n        pos = target.parent.toGlobal(pos);\n      }\n      htmlElement.style.top = pos.y + \"px\";\n      htmlElement.style.left = pos.x + \"px\";\n      // Use width/height if those are set\n      const width = target.get(\"width\");\n      const height = target.get(\"height\");\n      let w = 0;\n      let h = 0;\n      if (width) {\n        w = target.width();\n      }\n      if (height) {\n        h = target.height();\n      }\n      if (!width || !height) {\n        htmlElement.style.position = \"fixed\";\n        htmlElement.style.width = \"\";\n        htmlElement.style.height = \"\";\n        const bbox = htmlElement.getBoundingClientRect();\n        htmlElement.style.position = \"absolute\";\n        if (!width) w = bbox.width;\n        if (!height) h = bbox.height;\n        let lw = w / scale;\n        let lh = h / scale;\n        let cx = target.get(\"centerX\", 0);\n        let cy = target.get(\"centerY\", 0);\n        let ll = 0;\n        let lr = 0;\n        let lt = 0;\n        let lb = 0;\n        if (cx instanceof Percent) {\n          ll = -cx.value * lw;\n          lr = (1 - cx.value) * lw;\n        } else {\n          ll = -cx;\n          lr = lw - cx;\n        }\n        if (cy instanceof Percent) {\n          lt = -cy.value * lh;\n          lb = (1 - cy.value) * lh;\n        } else {\n          lt = -cy;\n          lb = lh - cy;\n        }\n        target._localBounds = {\n          left: ll,\n          right: lr,\n          top: lt,\n          bottom: lb\n        };\n        let previousBounds = target._adjustedLocalBounds;\n        let newBounds = target._display.getAdjustedBounds(target._localBounds);\n        target._adjustedLocalBounds = newBounds;\n        // compare each value of the bounds\n        if (previousBounds.left !== newBounds.left || previousBounds.right !== newBounds.right || previousBounds.top !== newBounds.top || previousBounds.bottom !== newBounds.bottom) {\n          target.markDirtyBounds();\n        }\n      }\n      if (w > 0) {\n        htmlElement.style.minWidth = w + \"px\";\n      }\n      if (h > 0) {\n        htmlElement.style.minHeight = h + \"px\";\n      }\n      // Hide or show\n      if (!visible || opacity == 0) {\n        htmlElement.style.display = \"none\";\n      }\n      // Center position\n      const x = target.get(\"centerX\", 0);\n      const originX = isPercent(x) ? x.percent + \"%\" : x + \"px\";\n      const y = target.get(\"centerY\", 0);\n      const originY = isPercent(y) ? y.percent + \"%\" : y + \"px\";\n      if (x || y) {\n        htmlElement.style.transform = \"translate(-\" + originX + \", -\" + originY + \")\" + htmlElement.style.transform;\n      }\n      // Deal with scale\n      if (scale != 1) {\n        htmlElement.style.transform += \"scale(\" + scale + \")\";\n      }\n      if (rotation != 0) {\n        htmlElement.style.transform += \" rotate(\" + rotation + \"deg)\";\n      }\n      if (htmlElement.style.transform != \"\") {\n        htmlElement.style.transformOrigin = originX + \" \" + originY;\n        //htmlElement.style.transformOrigin = \"0% 0%\";\n      }\n    }\n  }\n\n  _setHTMLContent(target, html) {\n    let htmlElement = target.getPrivate(\"htmlElement\");\n    if (!htmlElement) {\n      htmlElement = this._makeHTMLElement(target);\n    }\n    if (htmlElement.innerHTML != html) {\n      htmlElement.innerHTML = html;\n    }\n  }\n  _removeHTMLContent(target) {\n    let htmlElement = target.getPrivate(\"htmlElement\");\n    if (htmlElement) {\n      this._htmlElementContainer.removeChild(htmlElement);\n      target.removePrivate(\"htmlElement\");\n    }\n    $array.remove(this._htmlEnabledContainers, target);\n  }\n}","map":{"version":3,"names":["AnimationState","Container","Text","HorizontalLayout","VerticalLayout","GridLayout","Disposer","ResizeSensor","InterfaceColors","Graphics","Rectangle","Tooltip","NumberFormatter","DateFormatter","DurationFormatter","Language","EventDispatcher","DefaultTheme","CanvasRenderer","p100","percent","isPercent","Percent","color","populateString","registry","$order","$array","$object","$utils","$type","en","rAF","fps","callback","requestAnimationFrame","setTimeout","Root","constructor","id","settings","arguments","length","undefined","isReal","Object","defineProperty","new","Error","_settings","accessible","_a11yD","useSafeResolution","resolution","getSafeResolution","_renderer","dom","HTMLElement","document","getElementById","each","rootElements","root","interfaceColors","inner","createElement","style","position","width","height","appendChild","tooltipContainerBounds","_tooltipContainerSettings","_inner","_updateComputedStyles","push","_init","moveDOM","childNodes","_initResizeSensor","resize","_handleLogo","_logo","w","offsetWidth","h","offsetHeight","hide","show","_showBranding","logo","tooltipContainer","children","interactive","interactiveChildren","setStateOnChildren","paddingTop","paddingRight","paddingBottom","paddingLeft","scale","y","centerY","tooltipText","tooltipX","cursorOverStyle","background","fill","fillOpacity","tooltipY","tooltip","pointerOrientation","label","setAll","fontSize","get","stroke","strokeOpacity","set","events","on","window","open","states","create","m","strokeWidth","svgPath","a","_getRealSize","getBoundingClientRect","_getCalculatedSize","rect","calculateSize","focusable","setAttribute","tabindex","ariaLabel","role","renderer","size","Math","floor","realWidth","realHeight","rootContainer","visible","_rootContainer","_defaultThemes","container","view","htmlElementContainer","_htmlElementContainer","className","pointerEvents","overflow","readerAlertElement","clip","_readerAlertElement","focusElementContainer","top","left","setInteractive","_focusElementContainer","tooltipElementContainer","_tooltipElementContainer","supports","_disposers","addEventListener","ev","eventKey","getEventKey","_isShift","shiftKey","focusedSprite","_focusedSprite","announceText","readerAlert","downEvent","getEvent","MouseEvent","dispatch","type","originalEvent","event","point","simulated","target","key","blur","dragOffsetX","dragOffsetY","preventDefault","isDragging","_keyboardDragPoint","x","clientX","clientY","isEnabled","dragPoint","moveEvent","upEvent","group","items","_tabindexes","filter","item","getPrivate","isVisibleDeep","index","indexOf","lastIndex","focus","_focusNext","_startTicker","setThemes","_addTooltip","_hasLicense","_resizeSensorDisposer","dispose","autoResize","setPrivate","_render","render","_display","_focusElementDirty","_updateCurrentFocus","_runTickers","currentTime","_tickers","f","_runAnimations","running","keepIf","_animations","animation","state","_runAnimation","Stopped","Playing","_isDirtyAnimation","_runDirties","allParents","_isDirtyParents","keys","_dirtyParents","forEach","parent","isDisposed","uid","_prepareChildren","_updateChildren","objects","_dirty","entity","_beforeChanged","_changed","_clearDirty","_isDirty","depths","bounds","_dirtyBounds","depth","_positionHTMLElements","sort","compare","_updateBounds","dirtyPositions","_dirtyPositions","sprite","_updatePosition","_afterChanged","_renderFrame","_updateTick","timestamp","_checkComputedStyles","animationDone","resetImageArray","_runTicker","now","animationTime","done","_ticker","_paused","_runTickerNow","timeout","endTime","performance","updateTick","value","_addDirtyEntity","_addDirtyParent","_addDirtyBounds","_addDirtyPosition","_addAnimation","_markDirty","_markDirtyRedraw","once","eachFrame","removeFirst","markDirtyGlobal","walkChildren","child","markDirty","markDirtyBounds","_isDisposed","horizontalLayout","verticalLayout","removeElement","remove","text","innerHTML","stripTags","themes","_applyThemes","tooltipContainerSettings","isMeasured","layer","layerMargin","_tooltip","_registerTabindexOrder","pushOne","_invalidateTabindexes","_unregisterTabindexOrder","b","aindex","bindex","groups","_makeFocusElement","_moveFocusElement","_decorateFocusElement","_positionFocusElement","focusElement","removeAttribute","ariaLive","ariaChecked","ariaCurrent","ariaSelected","ariaOrientation","ariaValueNow","ariaValueMin","ariaValueMax","ariaValueText","ariaControls","isHidden","getAttribute","tabIndex","disposers","_handleFocus","_handleBlur","_removeFocusElement","removeChild","_hideFocusElement","display","next","insertBefore","append","globalBounds","right","bottom","padding","focusPadding","abs","_getSpriteByFocusElement","found","eachContinue","_index","focused","el","direction","focusableElements","Array","from","querySelectorAll","join","targetElement","updateTooltip","_getText","tooltipElement","_makeTooltipElement","removePrivate","_removeTooltipElement","parentElement","_invalidateAccessibility","documentPointToRoot","scaleWidth","scaleHeight","rootPointToDocument","addDisposer","disposer","styles","getComputedStyle","fontHash","val","isString","match","changed","_fontHash","_invalidateLabelBounds","i","licenses","_licenseApplied","debugGhostView","tapToActivate","tapToActivateTimeout","_makeHTMLElement","htmlElement","boxSizing","_positionHTMLElement","_htmlEnabledContainers","visualSettings","setting","compositeScale","rotation","compositeRotation","transform","transformOrigin","opacity","compositeOpacity","pos","toGlobal","bbox","lw","lh","cx","cy","ll","lr","lt","lb","_localBounds","previousBounds","_adjustedLocalBounds","newBounds","getAdjustedBounds","minWidth","minHeight","originX","originY","_setHTMLContent","html","_removeHTMLContent"],"sources":["C:\\Users\\Moham\\Downloads\\Github projects\\Digital-Portfolio-main\\Frontend\\node_modules\\src\\.internal\\core\\Root.ts"],"sourcesContent":["import type { IAnimation } from \"./util/Animation\";\nimport type { Entity } from \"./util/Entity\";\nimport type { Sprite } from \"./render/Sprite\";\nimport type { Theme } from \"./Theme\";\nimport type { IPoint } from \"./util/IPoint\";\nimport type { IRenderer, IPointerEvent } from \"./render/backend/Renderer\";\nimport type { Timezone } from \"./util/Timezone\";\n\nimport { AnimationState } from \"./util/Animation\";\nimport { Container } from \"./render/Container\";\nimport { Text } from \"./render/Text\";\nimport { HorizontalLayout } from \"./render/HorizontalLayout\";\nimport { VerticalLayout } from \"./render/VerticalLayout\";\nimport { GridLayout } from \"./render/GridLayout\";\nimport { IDisposer, Disposer } from \"./util/Disposer\";\nimport { ResizeSensor } from \"./util/ResizeSensor\";\nimport { InterfaceColors } from \"./util/InterfaceColors\";\nimport { Graphics } from \"./render/Graphics\";\nimport { Rectangle } from \"./render/Rectangle\";\nimport { Tooltip } from \"./render/Tooltip\";\nimport { NumberFormatter } from \"./util/NumberFormatter\";\nimport { DateFormatter } from \"./util/DateFormatter\";\nimport { DurationFormatter } from \"./util/DurationFormatter\";\nimport { ILocale, Language } from \"./util/Language\";\nimport { Events, EventDispatcher } from \"./util/EventDispatcher\";\nimport { DefaultTheme } from \"../themes/DefaultTheme\";\nimport { CanvasRenderer } from \"./render/backend/CanvasRenderer\";\nimport { p100, percent, isPercent, Percent } from \"./util/Percent\";\nimport { color } from \"./util/Color\";\nimport { populateString } from \"./util/PopulateString\";\nimport { registry } from \"./Registry\";\n\nimport * as $order from \"./util/Order\";\nimport * as $array from \"./util/Array\";\nimport * as $object from \"./util/Object\";\nimport * as $utils from \"./util/Utils\";\nimport * as $type from \"./util/Type\";\n\n\nimport en from \"../../locales/en\";\n\n\nfunction rAF(fps: number | undefined, callback: (currentTime: number) => void): void {\n\tif (fps == null) {\n\t\trequestAnimationFrame(callback);\n\n\t} else {\n\t\tsetTimeout(() => {\n\t\t\trequestAnimationFrame(callback);\n\t\t}, 1000 / fps);\n\t}\n}\n\n\n/**\n * @ignore\n */\ninterface IParent extends Entity {\n\t_prepareChildren(): void;\n\t_updateChildren(): void;\n}\n\ninterface IBounds extends Entity {\n\tdepth(): number;\n\t_updateBounds(): void;\n}\n\n\nexport interface ISize {\n\twidth: number,\n\theight: number,\n}\n\n\nexport interface IRootEvents {\n\tframestarted: {\n\t\ttimestamp: number;\n\t};\n\tframeended: {\n\t\ttimestamp: number;\n\t};\n}\n\n\nexport interface IRootSettings {\n\n\t/**\n\t * Indicates whether chart should use \"safe\" resolution on some memory-limiting\n\t * platforms such as Safari.\n\t *\n\t * @default true\n\t */\n\tuseSafeResolution?: boolean;\n\n\t/**\n\t * Allows defining margins around chart area for tooltips to go outside the\n\t * chart itself.\n\t *\n\t * @since 5.2.24\n\t */\n\ttooltipContainerBounds?: { top: number, left: number, right: number, bottom: number };\n\n\t/**\n\t * Set to `false` to disable all accessibility features.\n\t *\n\t * NOTE: once disabled, accessibility cannot be re-enabled on a live `Root` object.\n\t *\n\t * @default true\n\t * @since 5.3.0\n\t */\n\taccessible?: boolean;\n\n\t/**\n\t * If set to `true`, the parent inner `<div>` element will become a focusable\n\t * element.\n\t *\n\t * @since 5.3.17\n\t * @default false\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/#Accessibility_of_Root_element} for more info\n\t */\n\tfocusable?: boolean;\n\n\t/**\n\t * Distance between focused element and its highlight square in pixels.\n\t *\n\t * @since 5.6.0\n\t * @default 2\n\t */\n\tfocusPadding?: number;\n\n\t/**\n\t * If set to some string, it will be used as inner `<div>` ARIA-LABEL.\n\t *\n\t * Should be used in conjuction with `focusable`.\n\t *\n\t * @since 5.3.17\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/#Accessibility_of_Root_element} for more info\n\t */\n\tariaLabel?: string;\n\n\t/**\n\t * Allows setting a \"role\" for the inner `<div>`.\n\t *\n\t * @since 5.3.17\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/#Accessibility_of_Root_element} for more info\n\t */\n\trole?: string;\n\n\t/**\n\t * Allows for specifying a custom width / height for the chart.\n\t *\n\t * This function will be called automatically when the chart is resized.\n\t */\n\tcalculateSize?: (dimensions: DOMRect) => ISize;\n}\n\n\n// TODO implement Disposer\n/**\n * Root element of the chart.\n *\n * @see {@link https://www.amcharts.com/docs/v5/getting-started/#Root_element} for more info\n */\nexport class Root implements IDisposer {\n\n\t/**\n\t * A reference to original chart container (div element).\n\t */\n\tpublic dom: HTMLElement;\n\tpublic _inner: HTMLElement;\n\n\tprotected _settings: IRootSettings;\n\tprotected _isDirty: boolean = false;\n\tprotected _isDirtyParents: boolean = false;\n\tprotected _isDirtyAnimation: boolean = false;\n\tprotected _dirty: { [id: number]: Entity } = {};\n\tprotected _dirtyParents: { [id: number]: IParent } = {};\n\tprotected _dirtyBounds: { [id: number]: IBounds } = {};\n\tprotected _dirtyPositions: { [id: number]: Sprite } = {};\n\n\tprotected _ticker: ((currentTime: number) => void) | null = null;\n\tprotected _tickers: Array<(currentTime: number) => void> = [];\n\n\tprotected _updateTick: boolean = true;\n\n\t/**\n\t * Root's event dispatcher.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\n\t */\n\tpublic events: EventDispatcher<Events<this, IRootEvents>> = new EventDispatcher();\n\n\t/**\n\t * @ignore\n\t * @todo needs description\n\t */\n\tpublic animationTime: number | null = null;\n\n\tprivate _animations: Array<IAnimation> = [];\n\n\tpublic _renderer: IRenderer;\n\n\tpublic _rootContainer!: Container;\n\n\t/**\n\t * Main content container.\n\t */\n\tpublic container!: Container;\n\n\t/**\n\t * A [[Container]] used to display tooltips in.\n\t */\n\tpublic tooltipContainer!: Container\n\tprotected _tooltipContainerSettings!: { top: number, left: number, right: number, bottom: number };\n\n\tpublic _tooltip!: Tooltip;\n\n\t// Locale-related\n\n\t/**\n\t * @ignore\n\t */\n\tpublic language: Language = Language.new(this, {});\n\n\t/**\n\t * Locale used by the chart.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/}\n\t */\n\tpublic locale: ILocale = en;\n\n\t// Date-time related\n\n\t/**\n\t * Use UTC when formatting date/time.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#utc-and-time-zones} for more info\n\t */\n\tpublic utc: boolean = false;\n\n\t/**\n\t * If set, will format date/time in specific time zone.\n\t *\n\t * The value should be named time zone, e.g.:\n\t * `\"America/Vancouver\"`, `\"Australia/Sydney\"`, `\"UTC\"`.\n\t *\n\t * NOTE: Using time zone feature may noticeable affect performance of the\n\t * chart, especially with large data sets, since every single date will need\n\t * to be recalculated.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#time-zone} for more info\n\t * @since 5.1.0\n\t */\n\tpublic timezone?: Timezone;\n\n\t/**\n\t * The maximum FPS that the Root will run at.\n\t *\n\t * If `undefined` it will run at the highest FPS.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Performance} for more info\n\t */\n\tpublic fps: number | undefined;\n\n\t/**\n\t * Number formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\n\t */\n\tpublic numberFormatter: NumberFormatter = NumberFormatter.new(this, {});\n\n\t/**\n\t * Date/time formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\n\t */\n\tpublic dateFormatter: DateFormatter = DateFormatter.new(this, {});\n\n\t/**\n\t * Duration formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\n\t */\n\tpublic durationFormatter: DurationFormatter = DurationFormatter.new(this, {});\n\n\n\t// Accessibility\n\n\t/**\n\t * Global tab index for using for the whole chart\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\n\t */\n\tpublic tabindex: number = 0;\n\n\t//@todo maybe make this better\n\tprotected _tabindexes: Sprite[] = [];\n\n\tprotected _a11yD: boolean = false;\n\tprotected _focusElementDirty: boolean = false;\n\tprotected _focusElementContainer: HTMLDivElement | undefined;\n\tprotected _focusedSprite: Sprite | undefined;\n\tprotected _isShift: boolean | undefined;\n\tprotected _keyboardDragPoint: IPoint | undefined;\n\tprotected _tooltipElementContainer: HTMLDivElement | undefined;\n\tprotected _readerAlertElement: HTMLDivElement | undefined;\n\n\tpublic _logo?: Container;\n\n\tpublic _tooltipDiv: HTMLDivElement | undefined;\n\n\t/**\n\t * Used for dynamically-created CSS and JavaScript with strict source policies.\n\t */\n\tpublic nonce?: string;\n\n\t/**\n\t * Special color set to be used for various controls.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Interface_colors} for more info\n\t */\n\tpublic interfaceColors: InterfaceColors;\n\n\t/**\n\t * An instance of vertical layout object that can be used to set `layout` setting\n\t * of a [[Container]].\n\t *\n\t * @default VerticalLayout.new()\n\t */\n\tpublic verticalLayout: VerticalLayout = VerticalLayout.new(this, {});\n\n\t/**\n\t * An instance of horizontal layout object that can be used to set `layout` setting\n\t * of a [[Container]].\n\t *\n\t * @default HorizontalLayout.new()\n\t */\n\tpublic horizontalLayout: VerticalLayout = HorizontalLayout.new(this, {});\n\n\t/**\n\t * An instance of grid layout object that can be used to set `layout` setting\n\t * of a [[Container]].\n\t *\n\t * @default VerticalLayout.new()\n\t */\n\tpublic gridLayout: VerticalLayout = GridLayout.new(this, {});\n\n\tpublic _paused: boolean = false;\n\n\t/**\n\t * Indicates whether chart should resized automatically when parent container\n\t * width and/or height changes.\n\t *\n\t * If disabled (`autoResize = false`) you can make the chart resize manually\n\t * by calling root element's `resize()` method.\n\t */\n\tpublic autoResize: boolean = true;\n\n\tprotected _fontHash: string = \"\";\n\n\tprotected _isDisposed: boolean = false;\n\tprotected _disposers: Array<IDisposer> = [];\n\n\tprotected _resizeSensorDisposer?: IDisposer;\n\n\tpublic _tooltips: Array<Tooltip> = [];\n\n\tprotected _htmlElementContainer: HTMLDivElement | undefined;\n\tprotected _htmlEnabledContainers: Container[] = [];\n\n\tprotected constructor(id: string | HTMLElement, settings: IRootSettings = {}, isReal: boolean) {\n\n\t\tif (!isReal) {\n\t\t\tthrow new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\n\t\t}\n\n\t\tthis._settings = settings;\n\n\t\tif (settings.accessible == false) {\n\t\t\tthis._a11yD = true;\n\t\t}\n\n\t\tif (settings.useSafeResolution == null) {\n\t\t\tsettings.useSafeResolution = true;\n\t\t}\n\n\t\tlet resolution;\n\n\t\tif (settings.useSafeResolution) {\n\t\t\tresolution = $utils.getSafeResolution();\n\t\t}\n\n\t\tthis._renderer = new CanvasRenderer(resolution);\n\n\t\tlet dom: HTMLElement | null;\n\n\t\tif (id instanceof HTMLElement) {\n\t\t\tdom = id;\n\t\t}\n\t\telse {\n\t\t\tdom = document.getElementById(id);\n\t\t}\n\n\t\t$array.each(registry.rootElements, (root) => {\n\t\t\tif (root.dom === dom) {\n\t\t\t\tthrow new Error(\"You cannot have multiple Roots on the same DOM node\");\n\t\t\t}\n\t\t});\n\n\t\tthis.interfaceColors = InterfaceColors.new(this, {});\n\n\t\tif (dom === null) {\n\t\t\tthrow new Error(\"Could not find HTML element with id `\" + id + \"`\");\n\t\t}\n\n\t\tthis.dom = dom;\n\n\t\tlet inner: HTMLDivElement = document.createElement(\"div\");\n\t\tinner.style.position = \"relative\";\n\t\tinner.style.width = \"100%\";\n\t\tinner.style.height = \"100%\";\n\t\tdom.appendChild(inner);\n\n\t\tconst tooltipContainerBounds = settings.tooltipContainerBounds;\n\t\tif (tooltipContainerBounds) {\n\t\t\tthis._tooltipContainerSettings = tooltipContainerBounds;\n\t\t}\n\n\t\tthis._inner = inner;\n\n\t\tthis._updateComputedStyles();\n\n\t\tregistry.rootElements.push(this);\n\t}\n\n\n\tpublic static new(id: string | HTMLElement, settings?: IRootSettings): Root {\n\t\tconst root = new Root(id, settings, true);\n\t\troot._init();\n\t\treturn root;\n\t}\n\n\tpublic moveDOM(id: string | HTMLElement): void {\n\t\tlet dom: HTMLElement | null;\n\n\t\tif (id instanceof HTMLElement) {\n\t\t\tdom = id;\n\t\t}\n\t\telse {\n\t\t\tdom = document.getElementById(id);\n\t\t}\n\n\t\tif (dom) {\n\t\t\twhile (this.dom.childNodes.length > 0) {\n\t\t\t\tdom.appendChild(this.dom.childNodes[0]);\n\t\t\t}\n\t\t\tthis.dom = dom;\n\t\t\tthis._initResizeSensor();\n\t\t\tthis.resize();\n\t\t}\n\n\t}\n\n\n\tprotected _handleLogo(): void {\n\t\tif (this._logo) {\n\t\t\tconst w = this.dom.offsetWidth;\n\t\t\tconst h = this.dom.offsetHeight;\n\t\t\tif ((w <= 150) || (h <= 60)) {\n\t\t\t\tthis._logo.hide();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._logo.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _showBranding(): void {\n\t\tif (!this._logo) {\n\t\t\tconst logo = this.tooltipContainer.children.push(Container.new(this, {\n\t\t\t\tinteractive: true,\n\t\t\t\tinteractiveChildren: false,\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tsetStateOnChildren: true,\n\t\t\t\tpaddingTop: 9,\n\t\t\t\tpaddingRight: 9,\n\t\t\t\tpaddingBottom: 9,\n\t\t\t\tpaddingLeft: 9,\n\t\t\t\tscale: .6,\n\t\t\t\ty: percent(100),\n\t\t\t\tcenterY: p100,\n\t\t\t\ttooltipText: \"Created using amCharts 5\",\n\t\t\t\ttooltipX: p100,\n\t\t\t\tcursorOverStyle: \"pointer\",\n\t\t\t\tbackground: Rectangle.new(this, {\n\t\t\t\t\tfill: color(0x474758),\n\t\t\t\t\tfillOpacity: 0,\n\t\t\t\t\ttooltipY: 5\n\t\t\t\t})\n\t\t\t}));\n\n\t\t\tconst tooltip = Tooltip.new(this, {\n\t\t\t\tpointerOrientation: \"horizontal\",\n\t\t\t\tpaddingTop: 4,\n\t\t\t\tpaddingRight: 7,\n\t\t\t\tpaddingBottom: 4,\n\t\t\t\tpaddingLeft: 7\n\t\t\t});\n\t\t\ttooltip.label.setAll({\n\t\t\t\tfontSize: 12\n\t\t\t});\n\t\t\ttooltip.get(\"background\")!.setAll({\n\t\t\t\tfill: this.interfaceColors.get(\"background\"),\n\t\t\t\tstroke: this.interfaceColors.get(\"grid\"),\n\t\t\t\tstrokeOpacity: 0.3\n\t\t\t})\n\t\t\tlogo.set(\"tooltip\", tooltip);\n\n\t\t\tlogo.events.on(\"click\", () => {\n\t\t\t\twindow.open(\"https://www.amcharts.com/\", \"_blank\");\n\t\t\t});\n\n\t\t\tlogo.states.create(\"hover\", {});\n\n\t\t\tconst m = logo.children.push(Graphics.new(this, {\n\t\t\t\tstroke: color(0xcccccc),\n\t\t\t\tstrokeWidth: 3,\n\t\t\t\tsvgPath: \"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6\"\n\t\t\t}));\n\n\t\t\tm.states.create(\"hover\", { stroke: color(0x3CABFF) });\n\n\t\t\tconst a = logo.children.push(Graphics.new(this, {\n\t\t\t\tstroke: color(0x888888),\n\t\t\t\tstrokeWidth: 3,\n\t\t\t\tsvgPath: \"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0\"\n\t\t\t}));\n\n\t\t\ta.states.create(\"hover\", { stroke: color(0x474758) });\n\n\t\t\t//logo.set(\"tooltip\", this._tooltip);\n\t\t\t//logo.setPrivate(\"tooltipTarget\", logo.get(\"background\"));\n\t\t\tthis._logo = logo;\n\n\t\t\tthis._handleLogo();\n\t\t}\n\t}\n\n\tprotected _getRealSize(): DOMRect {\n\t\treturn this.dom.getBoundingClientRect();\n\t}\n\n\tprotected _getCalculatedSize(rect: DOMRect): ISize {\n\t\tif (this._settings.calculateSize) {\n\t\t\treturn this._settings.calculateSize(rect);\n\n\t\t} else {\n\t\t\treturn {\n\t\t\t\twidth: rect.width,\n\t\t\t\theight: rect.height,\n\t\t\t};\n\t\t}\n\t}\n\n\tprotected _init(): void {\n\n\t\tconst settings = this._settings;\n\t\tif (settings.accessible !== false) {\n\t\t\tif (settings.focusable) {\n\t\t\t\tthis._inner.setAttribute(\"focusable\", \"true\");\n\t\t\t\tthis._inner.setAttribute(\"tabindex\", this.tabindex + \"\");\n\t\t\t}\n\n\t\t\tif (settings.ariaLabel) {\n\t\t\t\tthis._inner.setAttribute(\"aria-label\", settings.ariaLabel);\n\t\t\t}\n\n\t\t\tif (settings.role) {\n\t\t\t\tthis._inner.setAttribute(\"role\", settings.role);\n\t\t\t}\n\t\t}\n\n\t\tconst renderer = this._renderer;\n\n\t\tconst rect = this._getRealSize();\n\t\tconst size = this._getCalculatedSize(rect);\n\n\t\tconst width = Math.floor(size.width);\n\t\tconst height = Math.floor(size.height);\n\n\t\tconst realWidth = Math.floor(rect.width);\n\t\tconst realHeight = Math.floor(rect.height);\n\n\t\tconst rootContainer = Container.new(this, {\n\t\t\tvisible: true,\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t});\n\t\tthis._rootContainer = rootContainer;\n\t\tthis._rootContainer._defaultThemes.push(DefaultTheme.new(this));\n\n\t\tconst container = rootContainer.children.push(Container.new(this, { visible: true, width: p100, height: p100 }));\n\t\tthis.container = container;\n\n\t\trenderer.resize(realWidth, realHeight, width, height);\n\n\t\t//@todo: better appendChild - refer\n\t\tthis._inner.appendChild(renderer.view);\n\n\t\t// TODO: TMP TMP TMP for testing only, remove\n\t\t//renderer.debugGhostView = true;\n\n\t\tthis._initResizeSensor();\n\n\t\t// HTML content holder\n\t\tconst htmlElementContainer = document.createElement(\"div\");\n\t\tthis._htmlElementContainer = htmlElementContainer;\n\t\thtmlElementContainer.className = \"am5-html-container\";\n\t\thtmlElementContainer.style.position = \"absolute\";\n\t\thtmlElementContainer.style.pointerEvents = \"none\";\n\t\tif (!this._tooltipContainerSettings) {\n\t\t\thtmlElementContainer.style.overflow = \"hidden\";\n\t\t}\n\t\tthis._inner.appendChild(htmlElementContainer);\n\n\t\tif (this._a11yD !== true) {\n\n\t\t\t// Create element which is used to make announcements to screen reader\n\t\t\tconst readerAlertElement = document.createElement(\"div\");\n\t\t\treaderAlertElement.className = \"am5-reader-container\";\n\t\t\treaderAlertElement.setAttribute(\"role\", \"alert\");\n\t\t\t// readerAlertElement.style.zIndex = \"-100000\";\n\t\t\t// readerAlertElement.style.opacity = \"0\";\n\t\t\t// readerAlertElement.style.top = \"0\";\n\t\t\treaderAlertElement.style.position = \"absolute\";\n\t\t\treaderAlertElement.style.width = \"1px\";\n\t\t\treaderAlertElement.style.height = \"1px\";\n\t\t\treaderAlertElement.style.overflow = \"hidden\";\n\t\t\treaderAlertElement.style.clip = \"rect(1px, 1px, 1px, 1px)\";\n\t\t\tthis._readerAlertElement = readerAlertElement;\n\t\t\tthis._inner.appendChild(this._readerAlertElement);\n\n\t\t\tconst focusElementContainer = document.createElement(\"div\");\n\t\t\tfocusElementContainer.className = \"am5-focus-container\";\n\t\t\tfocusElementContainer.style.position = \"absolute\";\n\t\t\tfocusElementContainer.style.pointerEvents = \"none\";\n\t\t\tfocusElementContainer.style.top = \"0px\";\n\t\t\tfocusElementContainer.style.left = \"0px\";\n\t\t\tfocusElementContainer.style.overflow = \"hidden\";\n\t\t\tfocusElementContainer.style.width = width + \"px\";\n\t\t\tfocusElementContainer.style.height = height + \"px\";\n\n\t\t\tfocusElementContainer.setAttribute(\"role\", \"graphics-document\");\n\n\t\t\t$utils.setInteractive(focusElementContainer, false);\n\t\t\tthis._focusElementContainer = focusElementContainer;\n\t\t\tthis._inner.appendChild(this._focusElementContainer);\n\n\t\t\tconst tooltipElementContainer = document.createElement(\"div\");\n\t\t\tthis._tooltipElementContainer = tooltipElementContainer;\n\t\t\ttooltipElementContainer.className = \"am5-tooltip-container\";\n\t\t\tthis._inner.appendChild(tooltipElementContainer);\n\n\t\t\t// Add keyboard events for accessibility, e.g. simulating drag with arrow\n\t\t\t// keys and click with ENTER\n\t\t\tif ($utils.supports(\"keyboardevents\")) {\n\n\t\t\t\tthis._disposers.push($utils.addEventListener(window, \"keydown\", (ev: KeyboardEvent) => {\n\t\t\t\t\tconst eventKey = $utils.getEventKey(ev);\n\t\t\t\t\tif (eventKey == \"Shift\") {\n\t\t\t\t\t\tthis._isShift = true;\n\t\t\t\t\t}\n\t\t\t\t\telse if (eventKey == \"Tab\") {\n\t\t\t\t\t\tthis._isShift = ev.shiftKey;\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tthis._disposers.push($utils.addEventListener(window, \"keyup\", (ev: KeyboardEvent) => {\n\t\t\t\t\tconst eventKey = $utils.getEventKey(ev);\n\t\t\t\t\tif (eventKey == \"Shift\") {\n\t\t\t\t\t\tthis._isShift = false;\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tthis._disposers.push($utils.addEventListener(focusElementContainer, \"click\", () => {\n\t\t\t\t\t// Some screen readers convert ENTER (and some SPACE) press whil on\n\t\t\t\t\t// focused element to a \"click\" event, preventing actual \"keydown\"\n\t\t\t\t\t// event from firing. We're using this \"click\" event to still\n\t\t\t\t\t// generate internal click events.\n\t\t\t\t\tconst focusedSprite = this._focusedSprite;\n\t\t\t\t\tif (focusedSprite) {\n\t\t\t\t\t\tconst announceText = focusedSprite.get(\"clickAnnounceText\", \"\");\n\t\t\t\t\t\tif (announceText !== \"\") {\n\t\t\t\t\t\t\tthis.readerAlert(announceText);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst downEvent = renderer.getEvent(new MouseEvent(\"click\"));\n\t\t\t\t\t\tfocusedSprite.events.dispatch(\"click\", {\n\t\t\t\t\t\t\ttype: \"click\",\n\t\t\t\t\t\t\toriginalEvent: downEvent.event,\n\t\t\t\t\t\t\tpoint: downEvent.point,\n\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tthis._disposers.push($utils.addEventListener(focusElementContainer, \"keydown\", (ev: KeyboardEvent) => {\n\t\t\t\t\tconst focusedSprite = this._focusedSprite;\n\t\t\t\t\tif (focusedSprite) {\n\t\t\t\t\t\tif (ev.key == \"Escape\") {\n\t\t\t\t\t\t\t// ESC pressed - lose current focus\n\t\t\t\t\t\t\t$utils.blur();\n\t\t\t\t\t\t\tthis._focusedSprite = undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet dragOffsetX = 0;\n\t\t\t\t\t\tlet dragOffsetY = 0;\n\t\t\t\t\t\t// TODO: figure out if using bogus MouseEvent is fine, or it will\n\t\t\t\t\t\t// fail on some platforms\n\t\t\t\t\t\tconst eventKey = $utils.getEventKey(ev);\n\t\t\t\t\t\tswitch (eventKey) {\n\t\t\t\t\t\t\tcase \"Enter\":\n\t\t\t\t\t\t\tcase \" \":\n\t\t\t\t\t\t\t\tconst announceText = focusedSprite.get(\"clickAnnounceText\", \"\");\n\t\t\t\t\t\t\t\tif (announceText !== \"\") {\n\t\t\t\t\t\t\t\t\tthis.readerAlert(announceText);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (eventKey == \" \" && focusedSprite.get(\"role\") != \"checkbox\") {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\t\t\tconst downEvent = renderer.getEvent(new MouseEvent(\"mouse\"));\n\t\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"click\", {\n\t\t\t\t\t\t\t\t\ttype: \"click\",\n\t\t\t\t\t\t\t\t\toriginalEvent: downEvent.event,\n\t\t\t\t\t\t\t\t\tpoint: downEvent.point,\n\t\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\tcase \"ArrowLeft\":\n\t\t\t\t\t\t\t\tdragOffsetX = -6;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"ArrowRight\":\n\t\t\t\t\t\t\t\tdragOffsetX = 6;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"ArrowUp\":\n\t\t\t\t\t\t\t\tdragOffsetY = -6;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"ArrowDown\":\n\t\t\t\t\t\t\t\tdragOffsetY = 6;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (dragOffsetX != 0 || dragOffsetY != 0) {\n\t\t\t\t\t\t\tev.preventDefault();\n\n\t\t\t\t\t\t\tif (!focusedSprite.isDragging()) {\n\t\t\t\t\t\t\t\t// Start dragging\n\t\t\t\t\t\t\t\tthis._keyboardDragPoint = {\n\t\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst downEvent = renderer.getEvent(new MouseEvent(\"mousedown\", {\n\t\t\t\t\t\t\t\t\tclientX: 0,\n\t\t\t\t\t\t\t\t\tclientY: 0\n\t\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\t\tdownEvent.point = {\n\t\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tif (focusedSprite.events.isEnabled(\"pointerdown\")) {\n\t\t\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"pointerdown\", {\n\t\t\t\t\t\t\t\t\t\ttype: \"pointerdown\",\n\t\t\t\t\t\t\t\t\t\toriginalEvent: downEvent.event,\n\t\t\t\t\t\t\t\t\t\tpoint: downEvent.point,\n\t\t\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Move focus marker\n\t\t\t\t\t\t\t\t//this._positionFocusElement(focusedSprite);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Move incrementally\n\t\t\t\t\t\t\tconst dragPoint = this._keyboardDragPoint!;\n\t\t\t\t\t\t\tdragPoint.x += dragOffsetX;\n\t\t\t\t\t\t\tdragPoint.y += dragOffsetY;\n\t\t\t\t\t\t\tconst moveEvent = renderer.getEvent(new MouseEvent(\"mousemove\", {\n\t\t\t\t\t\t\t\tclientX: dragPoint.x,\n\t\t\t\t\t\t\t\tclientY: dragPoint.y\n\t\t\t\t\t\t\t}), false);\n\n\t\t\t\t\t\t\tif (focusedSprite.events.isEnabled(\"globalpointermove\")) {\n\t\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"globalpointermove\", {\n\t\t\t\t\t\t\t\t\ttype: \"globalpointermove\",\n\t\t\t\t\t\t\t\t\toriginalEvent: moveEvent.event,\n\t\t\t\t\t\t\t\t\tpoint: moveEvent.point,\n\t\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tthis._disposers.push($utils.addEventListener(focusElementContainer, \"keyup\", (ev: KeyboardEvent) => {\n\t\t\t\t\tif (this._focusedSprite) {\n\t\t\t\t\t\tconst focusedSprite = this._focusedSprite;\n\t\t\t\t\t\tconst eventKey = $utils.getEventKey(ev);\n\t\t\t\t\t\tswitch (eventKey) {\n\t\t\t\t\t\t\tcase \"ArrowLeft\":\n\t\t\t\t\t\t\tcase \"ArrowRight\":\n\t\t\t\t\t\t\tcase \"ArrowUp\":\n\t\t\t\t\t\t\tcase \"ArrowDown\":\n\t\t\t\t\t\t\t\tif (focusedSprite.isDragging()) {\n\t\t\t\t\t\t\t\t\t// Simulate drag stop\n\t\t\t\t\t\t\t\t\tconst dragPoint = this._keyboardDragPoint!;\n\t\t\t\t\t\t\t\t\tconst upEvent = renderer.getEvent(new MouseEvent(\"mouseup\", {\n\t\t\t\t\t\t\t\t\t\tclientX: dragPoint.x,\n\t\t\t\t\t\t\t\t\t\tclientY: dragPoint.y\n\t\t\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\t\t\tif (focusedSprite.events.isEnabled(\"globalpointerup\")) {\n\t\t\t\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"globalpointerup\", {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"globalpointerup\",\n\t\t\t\t\t\t\t\t\t\t\toriginalEvent: upEvent.event,\n\t\t\t\t\t\t\t\t\t\t\tpoint: upEvent.point,\n\t\t\t\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//this._positionFocusElement(focusedSprite);\n\t\t\t\t\t\t\t\t\tthis._keyboardDragPoint = undefined;\n\t\t\t\t\t\t\t\t\t// @todo dispatch mouseup event instead of calling dragStop?\n\t\t\t\t\t\t\t\t\t// this._dispatchEvent(\"globalpointerup\", target, upEvent);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if (focusedSprite.get(\"focusableGroup\")) {\n\t\t\t\t\t\t\t\t\t// Find next item in focusable group\n\t\t\t\t\t\t\t\t\tconst group = focusedSprite.get(\"focusableGroup\");\n\t\t\t\t\t\t\t\t\tconst items = this._tabindexes.filter((item) => {\n\t\t\t\t\t\t\t\t\t\treturn item.get(\"focusableGroup\") == group && item.getPrivate(\"focusable\") !== false && item.isVisibleDeep() ? true : false;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tlet index = items.indexOf(focusedSprite);\n\t\t\t\t\t\t\t\t\tconst lastIndex = items.length - 1;\n\t\t\t\t\t\t\t\t\tindex += (eventKey == \"ArrowRight\" || eventKey == \"ArrowDown\") ? 1 : -1;\n\t\t\t\t\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\t\t\t\t\tindex = lastIndex;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (index > lastIndex) {\n\t\t\t\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t$utils.focus(items[index].getPrivate(\"focusElement\")!.dom);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Tab\":\n\t\t\t\t\t\t\t\tconst group = focusedSprite.get(\"focusableGroup\");\n\t\t\t\t\t\t\t\tif (group && this._isShift) {\n\t\t\t\t\t\t\t\t\tthis._focusNext(focusedSprite.getPrivate(\"focusElement\")!.dom, -1, group);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\n\t\tthis._startTicker();\n\t\tthis.setThemes([]);\n\n\t\tthis._addTooltip();\n\n\t\tif (!this._hasLicense()) {\n\t\t\tthis._showBranding();\n\t\t}\n\t}\n\n\tprivate _initResizeSensor(): void {\n\t\tif (this._resizeSensorDisposer) {\n\t\t\tthis._resizeSensorDisposer.dispose();\n\t\t}\n\t\tthis._resizeSensorDisposer = new ResizeSensor(this.dom, () => {\n\t\t\tif (this.autoResize) {\n\t\t\t\tthis.resize();\n\t\t\t}\n\t\t});\n\t\tthis._disposers.push(this._resizeSensorDisposer);\n\t}\n\n\t/**\n\t * If automatic resizing of char is disabled (`root.autoResize = false`), it\n\t * can be resized manually by calling this method.\n\t */\n\tpublic resize(): void {\n\t\tconst rect = this._getRealSize();\n\t\tconst size = this._getCalculatedSize(rect);\n\t\tconst w = Math.floor(size.width);\n\t\tconst h = Math.floor(size.height);\n\n\t\tif (w > 0 && h > 0) {\n\t\t\tconst realWidth = Math.floor(rect.width);\n\t\t\tconst realHeight = Math.floor(rect.height);\n\n\t\t\tconst htmlElementContainer = this._htmlElementContainer!;\n\t\t\thtmlElementContainer.style.width = w + \"px\";\n\t\t\thtmlElementContainer.style.height = h + \"px\";\n\n\t\t\tif (this._a11yD !== true) {\n\t\t\t\tconst focusElementContainer = this._focusElementContainer!;\n\t\t\t\tfocusElementContainer.style.width = w + \"px\";\n\t\t\t\tfocusElementContainer.style.height = h + \"px\";\n\t\t\t}\n\n\t\t\tthis._renderer.resize(realWidth, realHeight, w, h);\n\n\t\t\tconst rootContainer = this._rootContainer;\n\n\t\t\trootContainer.setPrivate(\"width\", w);\n\t\t\trootContainer.setPrivate(\"height\", h);\n\t\t\tthis._render();\n\t\t\tthis._handleLogo();\n\t\t}\n\t}\n\n\tprivate _render() {\n\t\tthis._renderer.render(this._rootContainer._display);\n\n\t\tif (this._focusElementDirty) {\n\t\t\tthis._updateCurrentFocus();\n\t\t\tthis._focusElementDirty = false;\n\t\t}\n\t}\n\n\tprivate _runTickers(currentTime: number) {\n\t\t$array.each(this._tickers, (f) => {\n\t\t\tf(currentTime);\n\t\t});\n\t}\n\n\tprivate _runAnimations(currentTime: number): boolean {\n\t\tlet running = 0;\n\n\t\t$array.keepIf(this._animations, (animation) => {\n\t\t\tconst state = animation._runAnimation(currentTime);\n\n\t\t\tif (state === AnimationState.Stopped) {\n\t\t\t\treturn false;\n\n\t\t\t} else if (state === AnimationState.Playing) {\n\t\t\t\t++running;\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\tthis._isDirtyAnimation = false;\n\n\t\treturn running === 0;\n\t}\n\n\tprivate _runDirties() {\n\t\t//console.log(\"tick **************************************************************\");\n\t\tlet allParents: { [id: number]: IParent } = {};\n\n\t\twhile (this._isDirtyParents) {\n\t\t\t// This must be before calling _prepareChildren\n\t\t\tthis._isDirtyParents = false;\n\n\t\t\t$object.keys(this._dirtyParents).forEach((key) => {\n\t\t\t\tconst parent = this._dirtyParents[key];\n\n\t\t\t\tdelete this._dirtyParents[key];\n\n\t\t\t\tif (!parent.isDisposed()) {\n\t\t\t\t\tallParents[parent.uid] = parent;\n\t\t\t\t\tparent._prepareChildren();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$object.keys(allParents).forEach((key) => {\n\t\t\tallParents[key]._updateChildren();\n\t\t});\n\n\n\t\tconst objects: Array<Entity> = [];\n\n\t\t//\t\tconsole.log(\"_beforeChanged\")\n\t\t$object.keys(this._dirty).forEach((key) => {\n\t\t\tconst entity = this._dirty[key];\n\n\t\t\tif (entity.isDisposed()) {\n\t\t\t\tdelete this._dirty[entity.uid];\n\n\t\t\t} else {\n\t\t\t\tobjects.push(entity);\n\t\t\t\tentity._beforeChanged();\n\t\t\t}\n\t\t});\n\n\t\t//\t\tconsole.log(\"_changed\")\n\t\tobjects.forEach((entity) => {\n\t\t\tentity._changed();\n\t\t\tdelete this._dirty[entity.uid];\n\t\t\tentity._clearDirty();\n\t\t});\n\n\t\tthis._isDirty = false;\n\n\t\tconst depths: { [id: number]: number } = {};\n\t\tconst bounds: Array<IBounds> = [];\n\n\t\t$object.keys(this._dirtyBounds).forEach((key) => {\n\t\t\tconst entity = this._dirtyBounds[key];\n\n\t\t\tdelete this._dirtyBounds[key];\n\n\t\t\tif (!entity.isDisposed()) {\n\t\t\t\tdepths[entity.uid] = entity.depth();\n\t\t\t\tbounds.push(entity);\n\t\t\t}\n\t\t});\n\n\t\tthis._positionHTMLElements();\n\n\t\t// High depth -> low depth\n\t\tbounds.sort((x, y) => {\n\t\t\treturn $order.compare(depths[y.uid], depths[x.uid]);\n\t\t});\n\n\t\t//\t\tconsole.log(\"_updateBounds\")\n\t\tbounds.forEach((entity) => {\n\t\t\tentity._updateBounds();\n\t\t});\n\n\t\t//\t\tconsole.log(\"_updatePosition\")\n\t\tconst dirtyPositions = this._dirtyPositions;\n\t\t$object.keys(dirtyPositions).forEach((key) => {\n\t\t\tconst sprite = dirtyPositions[key];\n\n\t\t\tdelete dirtyPositions[key];\n\n\t\t\tif (!sprite.isDisposed()) {\n\t\t\t\tsprite._updatePosition();\n\t\t\t}\n\t\t});\n\n\t\t//\t\tconsole.log(\"_afterChanged\")\n\t\tobjects.forEach((entity) => {\n\t\t\tentity._afterChanged();\n\t\t});\n\t}\n\n\tprivate _renderFrame(currentTime: number): boolean {\n\t\tif (this._updateTick) {\n\t\t\tif (this.events.isEnabled(\"framestarted\")) {\n\t\t\t\tthis.events.dispatch(\"framestarted\", {\n\t\t\t\t\ttype: \"framestarted\",\n\t\t\t\t\ttarget: this,\n\t\t\t\t\ttimestamp: currentTime,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._checkComputedStyles();\n\t\t\tthis._runTickers(currentTime);\n\n\t\t\tconst animationDone = this._runAnimations(currentTime);\n\n\t\t\tthis._runDirties();\n\t\t\tthis._render();\n\t\t\tthis._renderer.resetImageArray();\n\t\t\tthis._positionHTMLElements();\n\n\t\t\tif (this.events.isEnabled(\"frameended\")) {\n\t\t\t\tthis.events.dispatch(\"frameended\", {\n\t\t\t\t\ttype: \"frameended\",\n\t\t\t\t\ttarget: this,\n\t\t\t\t\ttimestamp: currentTime,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this._tickers.length === 0 &&\n\t\t\t\tanimationDone &&\n\t\t\t\t!this._isDirtyAnimation &&\n\t\t\t\t!this._isDirty;\n\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic _runTicker(currentTime: number, now?: boolean) {\n\t\tif (!this.isDisposed()) {\n\t\t\tthis.animationTime = currentTime;\n\n\t\t\tconst done = this._renderFrame(currentTime);\n\n\t\t\t// No more work to do\n\t\t\tif (done) {\n\t\t\t\tthis._ticker = null;\n\t\t\t\tthis.animationTime = null;\n\n\t\t\t} else {\n\t\t\t\tif (!this._paused) {\n\t\t\t\t\tif (now) {\n\t\t\t\t\t\tthis._ticker!\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\trAF(this.fps, this._ticker!);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _runTickerNow(timeout: number = 10000) {\n\t\tif (!this.isDisposed()) {\n\t\t\tconst endTime = performance.now() + timeout;\n\n\t\t\tfor (; ;) {\n\t\t\t\tconst currentTime = performance.now();\n\n\t\t\t\tif (currentTime >= endTime) {\n\t\t\t\t\tthis.animationTime = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tthis.animationTime = currentTime;\n\n\t\t\t\tconst done = this._renderFrame(currentTime);\n\n\t\t\t\tif (done) {\n\t\t\t\t\tthis.animationTime = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _startTicker() {\n\t\tif (this._ticker === null) {\n\t\t\tthis.animationTime = null;\n\n\t\t\tthis._ticker = (currentTime) => {\n\t\t\t\tthis._runTicker(currentTime);\n\t\t\t};\n\n\t\t\trAF(this.fps, this._ticker!);\n\t\t}\n\t}\n\n\t/**\n\t * Returns whether the root is updating or not.\n\t */\n\tpublic get updateTick(): boolean {\n\t\treturn this._updateTick;\n\t}\n\n\t/**\n\t * Enables or disables the root updating.\n\t */\n\tpublic set updateTick(value: boolean) {\n\t\tthis._updateTick = value;\n\n\t\tif (value) {\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addDirtyEntity(entity: Entity) {\n\t\tthis._isDirty = true;\n\n\t\tif (this._dirty[entity.uid] === undefined) {\n\t\t\tthis._dirty[entity.uid] = entity;\n\t\t}\n\n\t\tthis._startTicker();\n\t}\n\n\tpublic _addDirtyParent(parent: IParent) {\n\t\tthis._isDirty = true;\n\t\tthis._isDirtyParents = true;\n\n\t\tif (this._dirtyParents[parent.uid] === undefined) {\n\t\t\tthis._dirtyParents[parent.uid] = parent;\n\t\t}\n\n\t\tthis._startTicker();\n\t}\n\n\tpublic _addDirtyBounds(entity: IBounds) {\n\t\tthis._isDirty = true;\n\n\t\tif (this._dirtyBounds[entity.uid] === undefined) {\n\t\t\tthis._dirtyBounds[entity.uid] = entity;\n\t\t}\n\n\t\tthis._startTicker();\n\t}\n\n\tpublic _addDirtyPosition(sprite: Sprite) {\n\t\tthis._isDirty = true;\n\n\t\tif (this._dirtyPositions[sprite.uid] === undefined) {\n\t\t\tthis._dirtyPositions[sprite.uid] = sprite;\n\t\t}\n\n\t\tthis._startTicker();\n\t}\n\n\tpublic _addAnimation(animation: IAnimation) {\n\t\tthis._isDirtyAnimation = true;\n\n\t\t// TODO use numeric id instead\n\t\tif (this._animations.indexOf(animation) === -1) {\n\t\t\tthis._animations.push(animation);\n\t\t}\n\n\t\tthis._startTicker();\n\t}\n\n\tpublic _markDirty() {\n\t\tthis._isDirty = true;\n\t}\n\n\tpublic _markDirtyRedraw() {\n\t\tthis.events.once(\"frameended\", () => {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._startTicker();\n\t\t})\n\t}\n\n\tpublic eachFrame(f: (currentTime: number) => void): IDisposer {\n\t\tthis._tickers.push(f);\n\t\tthis._startTicker();\n\n\t\treturn new Disposer(() => {\n\t\t\t$array.removeFirst(this._tickers, f);\n\t\t});\n\t}\n\n\tpublic markDirtyGlobal(container?: Container): void {\n\t\tif (!container) {\n\t\t\tcontainer = this.container;\n\t\t}\n\t\tcontainer.walkChildren((child) => {\n\t\t\tif (child instanceof Container) {\n\t\t\t\tthis.markDirtyGlobal(child);\n\t\t\t}\n\t\t\tchild.markDirty();\n\t\t\tchild.markDirtyBounds();\n\t\t});\n\t}\n\n\t/**\n\t * Returns width of the target container, in pixels.\n\t *\n\t * @return Width\n\t */\n\tpublic width(): number {\n\t\t// TODO make this more efficient, maybe just return the renderer's width ?\n\t\treturn Math.floor(this._getCalculatedSize(this._getRealSize()).width);\n\t}\n\n\t/**\n\t * Returns height of the target container, in pixels.\n\t *\n\t * @return Height\n\t */\n\tpublic height(): number {\n\t\t// TODO make this more efficient, maybe just return the renderer's height ?\n\t\treturn Math.floor(this._getCalculatedSize(this._getRealSize()).height);\n\t}\n\n\t/**\n\t * Disposes root and all the content in it.\n\t */\n\tpublic dispose(): void {\n\t\tif (!this._isDisposed) {\n\t\t\tthis._isDisposed = true;\n\n\t\t\tthis._rootContainer.dispose();\n\t\t\tthis._renderer.dispose();\n\t\t\tthis.horizontalLayout.dispose();\n\t\t\tthis.verticalLayout.dispose();\n\t\t\tthis.interfaceColors.dispose();\n\n\t\t\t$array.each(this._disposers, (x) => {\n\t\t\t\tx.dispose();\n\t\t\t});\n\n\t\t\tif (this._inner) {\n\t\t\t\t$utils.removeElement(this._inner);\n\t\t\t}\n\n\t\t\t$array.remove(registry.rootElements, this);\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` if root element is disposed.\n\t *\n\t * @return Disposed?\n\t */\n\tpublic isDisposed(): boolean {\n\t\treturn this._isDisposed;\n\t}\n\n\t/**\n\t * Triggers screen reader read out a message.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\n\t * @param  text  Alert text\n\t */\n\tpublic readerAlert(text: string): void {\n\t\tif (this._a11yD !== true) {\n\t\t\tthis._readerAlertElement!.innerHTML = $utils.stripTags(text);\n\t\t}\n\t}\n\n\t/**\n\t * Sets themes to be used for the chart.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\n\t * @param  themes  A list of themes\n\t */\n\tpublic setThemes(themes: Array<Theme>): void {\n\t\tthis._rootContainer.set(\"themes\", themes);\n\n\t\t// otherwise new themes are not applied\n\t\tconst tooltipContainer = this.tooltipContainer;\n\t\tif (tooltipContainer) {\n\t\t\ttooltipContainer._applyThemes();\n\t\t}\n\n\t\t// @todo review this\n\t\tconst interfaceColors = this.interfaceColors;\n\t\tif (interfaceColors) {\n\t\t\tinterfaceColors._applyThemes();\n\t\t}\n\n\n\t}\n\n\tprotected _addTooltip() {\n\t\tif (!this.tooltipContainer) {\n\t\t\tconst tooltipContainerSettings = this._tooltipContainerSettings;\n\t\t\tconst tooltipContainer = this._rootContainer.children.push(Container.new(this, {\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tisMeasured: false,\n\t\t\t\twidth: p100,\n\t\t\t\theight: p100,\n\t\t\t\tlayer: tooltipContainerSettings ? 35 : 30,\n\t\t\t\tlayerMargin: tooltipContainerSettings ? tooltipContainerSettings : undefined\n\t\t\t}));\n\t\t\tthis.tooltipContainer = tooltipContainer;\n\n\t\t\tconst tooltip = Tooltip.new(this, {});\n\t\t\tthis.container.set(\"tooltip\", tooltip);\n\t\t\ttooltip.hide(0);\n\t\t\tthis._tooltip = tooltip;\n\t\t}\n\t}\n\n\t/**\n\t * Accesibility\n\t */\n\n\tpublic _registerTabindexOrder(target: Sprite): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (target.get(\"focusable\")) {\n\t\t\t$array.pushOne(this._tabindexes, target);\n\t\t}\n\t\telse {\n\t\t\t$array.remove(this._tabindexes, target);\n\t\t}\n\t\tthis._invalidateTabindexes();\n\t}\n\n\tpublic _unregisterTabindexOrder(target: Sprite): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\t$array.remove(this._tabindexes, target);\n\t\tthis._invalidateTabindexes();\n\t}\n\n\tpublic _invalidateTabindexes(): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._tabindexes.sort((a: Sprite, b: Sprite) => {\n\t\t\tconst aindex = a.get(\"tabindexOrder\", 0);\n\t\t\tconst bindex = b.get(\"tabindexOrder\", 0);\n\t\t\tif (aindex == bindex) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\telse if (aindex > bindex) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t});\n\n\t\tconst groups: Array<string | number> = [];\n\t\t$array.each(this._tabindexes, (item, index) => {\n\t\t\tif (!item.getPrivate(\"focusElement\")) {\n\t\t\t\tthis._makeFocusElement(index, item);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._moveFocusElement(index, item);\n\t\t\t}\n\t\t\tconst group = item.get(\"focusableGroup\");\n\t\t\tif (group && item.getPrivate(\"focusable\") !== false) {\n\t\t\t\tif (groups.indexOf(group) !== -1) {\n\t\t\t\t\t// Non-first element in the group, make it not directly focusable\n\t\t\t\t\titem.getPrivate(\"focusElement\")!.dom.setAttribute(\"tabindex\", \"-1\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tgroups.push(group);\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\n\t}\n\n\tpublic _updateCurrentFocus(): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._focusedSprite) {\n\t\t\tthis._decorateFocusElement(this._focusedSprite);\n\t\t\tthis._positionFocusElement(this._focusedSprite);\n\t\t}\n\t}\n\n\tpublic _decorateFocusElement(target: Sprite, focusElement?: HTMLDivElement): void {\n\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Decorate with proper accessibility attributes\n\t\tif (!focusElement) {\n\t\t\tfocusElement = target.getPrivate(\"focusElement\")!.dom;\n\t\t}\n\n\t\tif (!focusElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst role = target.get(\"role\");\n\t\tif (role) {\n\t\t\tfocusElement.setAttribute(\"role\", role);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"role\");\n\t\t}\n\n\t\tconst ariaLabel = target.get(\"ariaLabel\");\n\t\tif (ariaLabel) {\n\t\t\tconst label = populateString(target, ariaLabel);\n\t\t\tfocusElement.setAttribute(\"aria-label\", label);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-label\");\n\t\t}\n\n\t\tconst ariaLive = target.get(\"ariaLive\");\n\t\tif (ariaLive) {\n\t\t\tfocusElement.setAttribute(\"aria-live\", ariaLive);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-live\");\n\t\t}\n\n\t\tconst ariaChecked = target.get(\"ariaChecked\");\n\t\tif (ariaChecked != null && role && [\"checkbox\", \"option\", \"radio\", \"menuitemcheckbox\", \"menuitemradio\", \"treeitem\"].indexOf(role) !== -1) {\n\t\t\tfocusElement.setAttribute(\"aria-checked\", ariaChecked ? \"true\" : \"false\");\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-checked\");\n\t\t}\n\n\t\tconst ariaCurrent = target.get(\"ariaCurrent\");\n\t\tif (ariaCurrent != null) {\n\t\t\tfocusElement.setAttribute(\"aria-current\", ariaCurrent);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-current\");\n\t\t}\n\n\t\tconst ariaSelected = target.get(\"ariaSelected\");\n\t\tif (ariaSelected != null && role && [\"gridcell\", \"option\", \"row\", \"tab\", \"columnheader\", \"rowheader\", \"treeitem\"].indexOf(role) !== -1) {\n\t\t\tfocusElement.setAttribute(\"aria-selected\", ariaSelected ? \"true\" : \"false\");\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-selected\");\n\t\t}\n\n\t\tif (target.get(\"ariaHidden\")) {\n\t\t\tfocusElement.setAttribute(\"aria-hidden\", \"true\");\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-hidden\");\n\t\t}\n\n\t\tconst ariaOrientation = target.get(\"ariaOrientation\");\n\t\tif (ariaOrientation) {\n\t\t\tfocusElement.setAttribute(\"aria-orientation\", ariaOrientation);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-orientation\");\n\t\t}\n\n\t\tconst ariaValueNow = target.get(\"ariaValueNow\");\n\t\tif (ariaValueNow) {\n\t\t\tfocusElement.setAttribute(\"aria-valuenow\", ariaValueNow);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuenow\");\n\t\t}\n\n\t\tconst ariaValueMin = target.get(\"ariaValueMin\");\n\t\tif (ariaValueMin) {\n\t\t\tfocusElement.setAttribute(\"aria-valuemin\", ariaValueMin);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuemin\");\n\t\t}\n\n\t\tconst ariaValueMax = target.get(\"ariaValueMax\");\n\t\tif (ariaValueMax) {\n\t\t\tfocusElement.setAttribute(\"aria-valuemax\", ariaValueMax);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuemax\");\n\t\t}\n\n\t\tconst ariaValueText = target.get(\"ariaValueText\");\n\t\tif (ariaValueText) {\n\t\t\tfocusElement.setAttribute(\"aria-valuetext\", ariaValueText);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuetext\");\n\t\t}\n\n\t\tconst ariaControls = target.get(\"ariaControls\");\n\t\tif (ariaControls) {\n\t\t\tfocusElement.setAttribute(\"aria-controls\", ariaControls);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-controls\");\n\t\t}\n\n\t\tif (target.get(\"visible\") && target.get(\"opacity\") !== 0 && target.get(\"role\") != \"tooltip\" && !target.isHidden() && target.getPrivate(\"focusable\") !== false) {\n\t\t\tif (focusElement.getAttribute(\"tabindex\") != \"-1\") {\n\t\t\t\tfocusElement.setAttribute(\"tabindex\", \"\" + this.tabindex);\n\t\t\t}\n\t\t\tfocusElement.removeAttribute(\"aria-hidden\");\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"tabindex\");\n\t\t\tfocusElement.setAttribute(\"aria-hidden\", \"true\");\n\t\t}\n\t}\n\n\tpublic _makeFocusElement(index: number, target: Sprite): void {\n\n\t\tif (target.getPrivate(\"focusElement\") || this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Init\n\t\tconst focusElement = document.createElement(\"div\");\n\t\tif (target.get(\"role\") != \"tooltip\") {\n\t\t\tfocusElement.tabIndex = this.tabindex;\n\t\t}\n\t\tfocusElement.style.position = \"absolute\";\n\t\t$utils.setInteractive(focusElement, false);\n\n\t\tconst disposers: Array<IDisposer> = [];\n\n\t\ttarget.setPrivate(\"focusElement\", {\n\t\t\tdom: focusElement,\n\t\t\tdisposers,\n\t\t});\n\n\t\tthis._decorateFocusElement(target);\n\n\t\tdisposers.push($utils.addEventListener(focusElement, \"focus\", (ev: FocusEvent) => {\n\t\t\tthis._handleFocus(ev);\n\t\t}));\n\n\t\tdisposers.push($utils.addEventListener(focusElement, \"blur\", (ev: FocusEvent) => {\n\t\t\tthis._handleBlur(ev);\n\t\t}));\n\n\t\tthis._moveFocusElement(index, target);\n\n\t}\n\n\tpublic _removeFocusElement(target: Sprite): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\t$array.remove(this._tabindexes, target);\n\t\tconst focusElement = target.getPrivate(\"focusElement\");\n\t\tif (focusElement) {\n\t\t\tconst container = this._focusElementContainer!;\n\t\t\tcontainer.removeChild(focusElement.dom);\n\t\t\t$array.each(focusElement.disposers, (x) => {\n\t\t\t\tx.dispose();\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic _hideFocusElement(target: Sprite): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focusElement = target.getPrivate(\"focusElement\")!;\n\t\tfocusElement.dom.style.display = \"none\";\n\t}\n\n\tprotected _moveFocusElement(index: number, target: Sprite): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get container\n\t\tconst container = this._focusElementContainer!;\n\t\tconst focusElement = target.getPrivate(\"focusElement\")!.dom;\n\n\t\tif (focusElement === this._focusElementContainer!.children[index]) {\n\t\t\t// Nothing to do\n\t\t\treturn;\n\t\t}\n\n\t\tconst next = this._focusElementContainer!.children[index + 1];\n\t\tif (next) {\n\t\t\tcontainer.insertBefore(focusElement, next);\n\t\t}\n\t\telse {\n\t\t\tcontainer.append(focusElement);\n\t\t}\n\t}\n\n\tprotected _positionFocusElement(target: Sprite): void {\n\t\tif (this._a11yD == true || target == undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst bounds = target.globalBounds();\n\n\t\tlet width = bounds.right == bounds.left ? target.width() : bounds.right - bounds.left;\n\t\tlet height = bounds.top == bounds.bottom ? target.height() : bounds.bottom - bounds.top;\n\n\t\tconst padding = this._settings.focusPadding !== undefined ? this._settings.focusPadding : 2;\n\n\t\tlet x = bounds.left - padding;\n\t\tlet y = bounds.top - padding;\n\n\t\tif (width < 0) {\n\t\t\tx += width;\n\t\t\twidth = Math.abs(width);\n\t\t}\n\n\t\tif (height < 0) {\n\t\t\ty += height;\n\t\t\theight = Math.abs(height);\n\t\t}\n\n\t\tconst focusElement = target.getPrivate(\"focusElement\")!.dom;\n\t\tfocusElement.style.top = y + \"px\";\n\t\tfocusElement.style.left = x + \"px\";\n\t\tfocusElement.style.width = (width + padding * 2) + \"px\";\n\t\tfocusElement.style.height = (height + padding * 2) + \"px\";\n\n\t}\n\n\tprotected _getSpriteByFocusElement(target: any): Sprite | undefined {\n\t\tlet found: Sprite | undefined;\n\t\t$array.eachContinue(this._tabindexes, (item, _index) => {\n\t\t\tif (item.getPrivate(\"focusElement\")!.dom === target) {\n\t\t\t\tfound = item;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\treturn found;\n\t}\n\n\tprotected _handleFocus(ev: FocusEvent): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get element\n\t\t//const focused = this._tabindexes[index];\n\t\tconst focused = this._getSpriteByFocusElement(ev.target);\n\n\t\tif (!focused) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Jump over hidden elements\n\t\tif (!focused.isVisibleDeep()) {\n\t\t\tthis._focusNext(<HTMLDivElement>ev.target, this._isShift ? -1 : 1);\n\t\t\treturn;\n\t\t}\n\n\t\t// Size and position\n\t\tthis._positionFocusElement(focused);\n\t\t//this._decorateFocusElement(focused);\n\n\t\tthis._focusedSprite = focused;\n\n\t\tif (focused.events.isEnabled(\"focus\")) {\n\t\t\tfocused.events.dispatch(\"focus\", {\n\t\t\t\ttype: \"focus\",\n\t\t\t\toriginalEvent: ev,\n\t\t\t\ttarget: focused\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _focusNext(el: HTMLDivElement, direction: 1 | -1, group?: string | number): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focusableElements = Array.from(document.querySelectorAll([\n\t\t\t'a[href]',\n\t\t\t'area[href]',\n\t\t\t'button:not([disabled])',\n\t\t\t'details',\n\t\t\t'input:not([disabled])',\n\t\t\t'iframe:not([disabled])',\n\t\t\t'select:not([disabled])',\n\t\t\t'textarea:not([disabled])',\n\t\t\t'[contentEditable=\"\"]',\n\t\t\t'[contentEditable=\"true\"]',\n\t\t\t'[contentEditable=\"TRUE\"]',\n\t\t\t'[tabindex]:not([tabindex^=\"-\"])',\n\t\t\t//':not([disabled])'\n\t\t].join(',')));\n\n\t\tlet index = focusableElements.indexOf(el) + direction;\n\n\t\tif (index < 0) {\n\t\t\tindex = focusableElements.length - 1;\n\t\t}\n\t\telse if (index >= focusableElements.length) {\n\t\t\tindex = 0;\n\t\t}\n\n\t\tconst targetElement = (<HTMLDivElement>focusableElements[index]);\n\n\t\tif (group && direction == -1) {\n\t\t\tconst target = this._getSpriteByFocusElement(targetElement);\n\t\t\tif (target && target.get(\"focusableGroup\") == group) {\n\t\t\t\tthis._focusNext(targetElement, direction);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\ttargetElement.focus();\n\t}\n\n\tprotected _handleBlur(ev: FocusEvent): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focused = this._focusedSprite;\n\t\tif (focused && !focused.isDisposed() && focused.events.isEnabled(\"blur\")) {\n\t\t\tfocused.events.dispatch(\"blur\", {\n\t\t\t\ttype: \"blur\",\n\t\t\t\toriginalEvent: ev,\n\t\t\t\ttarget: focused\n\t\t\t});\n\t\t}\n\t\tthis._focusedSprite = undefined;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateTooltip(target: Text): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst text = $utils.stripTags(target._getText());\n\t\tlet tooltipElement = target.getPrivate(\"tooltipElement\");\n\t\tif (target.get(\"role\") == \"tooltip\" && text != \"\") {\n\t\t\tif (!tooltipElement) {\n\t\t\t\ttooltipElement = this._makeTooltipElement(target);\n\t\t\t}\n\t\t\tif (tooltipElement.innerHTML != text) {\n\t\t\t\ttooltipElement.innerHTML = text!;\n\t\t\t}\n\t\t\ttooltipElement.setAttribute(\"aria-hidden\", target.isVisibleDeep() ? \"false\" : \"true\");\n\t\t}\n\t\telse if (tooltipElement) {\n\t\t\ttooltipElement.remove();\n\t\t\ttarget.removePrivate(\"tooltipElement\");\n\t\t}\n\t}\n\n\tpublic _makeTooltipElement(target: Text): HTMLDivElement {\n\t\tconst container = this._tooltipElementContainer!;\n\t\tconst tooltipElement = document.createElement(\"div\");\n\t\ttooltipElement.style.position = \"absolute\";\n\t\ttooltipElement.style.width = \"1px\";\n\t\ttooltipElement.style.height = \"1px\";\n\t\ttooltipElement.style.overflow = \"hidden\";\n\t\ttooltipElement.style.clip = \"rect(1px, 1px, 1px, 1px)\";\n\n\t\t$utils.setInteractive(tooltipElement, false);\n\n\t\tthis._decorateFocusElement(target, tooltipElement);\n\t\tcontainer.append(tooltipElement);\n\t\ttarget.setPrivate(\"tooltipElement\", tooltipElement);\n\n\t\treturn tooltipElement;\n\t}\n\n\tpublic _removeTooltipElement(target: Text): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\t\tconst tooltipElement = target.getPrivate(\"tooltipElement\");\n\t\tif (tooltipElement) {\n\t\t\tconst parent = tooltipElement.parentElement;\n\t\t\tif (parent) {\n\t\t\t\tparent.removeChild(tooltipElement);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _invalidateAccessibility(target: Sprite): void {\n\t\tif (this._a11yD == true) {\n\t\t\treturn;\n\t\t}\n\t\tthis._focusElementDirty = true;\n\t\tconst focusElement = target.getPrivate(\"focusElement\");\n\t\tif (target.get(\"focusable\")) {\n\t\t\tif (focusElement) {\n\t\t\t\tthis._decorateFocusElement(target);\n\t\t\t\tthis._positionFocusElement(target);\n\t\t\t}\n\t\t\t// else {\n\t\t\t// \tthis._renderer._makeFocusElement(0, this);\n\t\t\t// }\n\t\t}\n\t\telse if (focusElement) {\n\t\t\tthis._removeFocusElement(target);\n\t\t}\n\t\t//this.updateCurrentFocus();\n\t}\n\n\t/**\n\t * Returns `true` if `target` is currently focused.\n\t *\n\t * @param   target  Target\n\t * @return          Focused?\n\t */\n\tpublic focused(target: Sprite): boolean {\n\t\treturn this._focusedSprite === target;\n\t}\n\n\t/**\n\t * Converts document coordinates to coordinates withing root element.\n\t *\n\t * @param   point  Document point\n\t * @return         Root point\n\t */\n\tpublic documentPointToRoot(point: IPoint): IPoint {\n\t\tconst rect = this._getRealSize();\n\t\tconst size = this._getCalculatedSize(rect);\n\n\t\tconst scaleWidth = size.width / rect.width;\n\t\tconst scaleHeight = size.height / rect.height;\n\n\t\treturn {\n\t\t\tx: (point.x - rect.left) * scaleWidth,\n\t\t\ty: (point.y - rect.top) * scaleHeight,\n\t\t};\n\t}\n\n\t/**\n\t * Converts root coordinates to document\n\t *\n\t * @param   point  Document point\n\t * @return         Root point\n\t */\n\tpublic rootPointToDocument(point: IPoint): IPoint {\n\t\tconst rect = this._getRealSize();\n\t\tconst size = this._getCalculatedSize(rect);\n\n\t\tconst scaleWidth = size.width / rect.width;\n\t\tconst scaleHeight = size.height / rect.height;\n\n\t\treturn {\n\t\t\tx: (point.x / scaleWidth) + rect.left,\n\t\t\ty: (point.y / scaleHeight) + rect.top\n\t\t};\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic addDisposer<T extends IDisposer>(disposer: T): T {\n\t\tthis._disposers.push(disposer);\n\t\treturn disposer;\n\t}\n\n\tprotected _updateComputedStyles(): boolean {\n\t\tconst styles = window.getComputedStyle(this.dom);\n\t\tlet fontHash = \"\";\n\t\t$object.each(styles, (key, val) => {\n\t\t\tif ($type.isString(key) && key.match(/^font/)) {\n\t\t\t\tfontHash += val;\n\t\t\t}\n\t\t})\n\t\tconst changed = fontHash != this._fontHash;\n\t\tif (changed) {\n\t\t\tthis._fontHash = fontHash;\n\t\t}\n\t\treturn changed;\n\t}\n\n\tprotected _checkComputedStyles(): void {\n\t\tif (this._updateComputedStyles()) {\n\t\t\tthis._invalidateLabelBounds(this.container);\n\t\t}\n\t}\n\n\tprotected _invalidateLabelBounds(target: Sprite): void {\n\t\tif (target instanceof Container) {\n\t\t\ttarget.children.each((child) => {\n\t\t\t\tthis._invalidateLabelBounds(child);\n\t\t\t});\n\t\t}\n\t\telse if (target instanceof Text) {\n\t\t\ttarget.markDirtyBounds();\n\t\t}\n\t}\n\n\t/**\n\t * To all the clever heads out there. Yes, we did not make any attempts to\n\t * scramble this.\n\t *\n\t * This is a part of a tool meant for our users to manage their commercial\n\t * licenses for removal of amCharts branding from charts.\n\t *\n\t * The only legit way to do so is to purchase a commercial license for amCharts:\n\t * https://www.amcharts.com/online-store/\n\t *\n\t * Removing or altering this code, or disabling amCharts branding in any other\n\t * way is against the license and thus illegal.\n\t */\n\tprotected _hasLicense(): boolean {\n\t\tfor (let i = 0; i < registry.licenses.length; i++) {\n\t\t\tif (registry.licenses[i].match(/^AM5C.{5,}/i)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic _licenseApplied(): void {\n\t\tif (this._logo) {\n\t\t\tthis._logo.set(\"forceHidden\", true);\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic get debugGhostView(): boolean {\n\t\treturn this._renderer.debugGhostView;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic set debugGhostView(value: boolean) {\n\t\tthis._renderer.debugGhostView = value;\n\t}\n\n\t/**\n\t * Set this to `true` if you need chart to require first a tap onto it before\n\t * touch gesture related functionality like zoom/pan is turned on.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\n\t * @default false\n\t * @since 5.2.9\n\t * @param  value  Needs a tap to activate touch functions\n\t */\n\tpublic set tapToActivate(value: boolean) {\n\t\tthis._renderer.tapToActivate = value;\n\t}\n\n\t/**\n\t * @return Needs a tap to activate touch functions\n\t */\n\tpublic get tapToActivate(): boolean {\n\t\treturn this._renderer.tapToActivate;\n\t}\n\n\t/**\n\t * If `tapToActivate` is set to `true`, this setting will determine number\n\t * of milliseconds the chart will stay \"active\", before releasing the\n\t * controls back to the page.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\n\t * @default 3000\n\t * @since 5.2.9\n\t * @param  value  Timeout\n\t */\n\tpublic set tapToActivateTimeout(value: number) {\n\t\tthis._renderer.tapToActivateTimeout = value;\n\t}\n\n\t/**\n\t * @return Timeout\n\t */\n\tpublic get tapToActivateTimeout(): number {\n\t\treturn this._renderer.tapToActivateTimeout;\n\t}\n\n\tpublic _makeHTMLElement(target: Container): HTMLDivElement {\n\n\t\t// Get container\n\t\tconst container = this._htmlElementContainer!;\n\n\t\t// Init\n\t\tconst htmlElement = document.createElement(\"div\");\n\t\ttarget.setPrivate(\"htmlElement\", htmlElement);\n\n\t\t//htmlElement.tabIndex = this.tabindex;\n\t\thtmlElement.style.position = \"absolute\";\n\t\thtmlElement.style.overflow = \"auto\";\n\t\thtmlElement.style.boxSizing = \"border-box\";\n\t\t$utils.setInteractive(htmlElement, target.get(\"interactive\", false));\n\n\t\t// Translate events\n\t\tif (target.events.isEnabled(\"click\")) {\n\t\t\t$utils.setInteractive(htmlElement, true);\n\t\t\tthis._disposers.push($utils.addEventListener<PointerEvent | MouseEvent>(htmlElement, \"click\", (ev: IPointerEvent) => {\n\t\t\t\tconst downEvent = this._renderer.getEvent(ev);\n\t\t\t\ttarget.events.dispatch(\"click\", {\n\t\t\t\t\ttype: \"click\",\n\t\t\t\t\toriginalEvent: downEvent.event,\n\t\t\t\t\tpoint: downEvent.point,\n\t\t\t\t\tsimulated: false,\n\t\t\t\t\ttarget: target\n\t\t\t\t});\n\t\t\t}));\n\t\t}\n\n\t\tthis._positionHTMLElement(target);\n\n\t\tcontainer.append(htmlElement);\n\n\t\t$array.pushOne(this._htmlEnabledContainers, target);\n\n\t\treturn htmlElement;\n\t}\n\n\tpublic _positionHTMLElements(): void {\n\t\t$array.each(this._htmlEnabledContainers, (target) => {\n\t\t\tthis._positionHTMLElement(target);\n\t\t});\n\t}\n\n\tpublic _positionHTMLElement(target: Container): void {\n\t\tconst htmlElement = target.getPrivate(\"htmlElement\");\n\t\tif (htmlElement) {\n\n\t\t\t// Translate settings\n\t\t\tconst visualSettings = [\"paddingTop\", \"paddingRight\", \"paddingBottom\", \"paddingLeft\", \"minWidth\", \"minHeight\", \"maxWidth\", \"maxHeight\"];\n\t\t\t$array.each(visualSettings, (setting: any) => {\n\t\t\t\tconst value = target.get(setting);\n\t\t\t\tif (value) {\n\t\t\t\t\thtmlElement.style[setting] = value + \"px\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\thtmlElement.style[setting] = \"\";\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Init and reset scale / rotation\n\t\t\tconst scale = target.compositeScale() || 1;\n\t\t\tconst rotation = target.compositeRotation() || 0;\n\t\t\thtmlElement.style.transform = \"\";\n\t\t\thtmlElement.style.transformOrigin = \"\";\n\n\t\t\t// Deal with opacity\n\t\t\tconst opacity = target.compositeOpacity();\n\t\t\tsetTimeout(() => {\n\t\t\t\thtmlElement.style.opacity = opacity + \"\";\n\t\t\t}, 10);\n\n\t\t\tconst visible = target.isVisibleDeep();\n\t\t\tif (visible) {\n\t\t\t\thtmlElement.style.display = \"block\";\n\t\t\t}\n\n\t\t\t// Deal with position\n\t\t\t// const bounds = target.globalBounds();\n\t\t\t// htmlElement.style.top = (bounds.top) + \"px\";\n\t\t\t// htmlElement.style.left = (bounds.left) + \"px\";\n\t\t\tlet pos = {\n\t\t\t\tx: target.x() + target.get(\"dx\", 0),\n\t\t\t\ty: target.y() + target.get(\"dy\", 0)\n\t\t\t}\n\t\t\tif (target.parent) {\n\t\t\t\tpos = target.parent.toGlobal(pos)\n\t\t\t}\n\t\t\thtmlElement.style.top = pos.y + \"px\";\n\t\t\thtmlElement.style.left = pos.x + \"px\";\n\n\t\t\t// Use width/height if those are set\n\t\t\tconst width = target.get(\"width\");\n\t\t\tconst height = target.get(\"height\");\n\n\t\t\tlet w: number = 0;\n\t\t\tlet h: number = 0;\n\n\t\t\tif (width) {\n\t\t\t\tw = target.width();\n\t\t\t}\n\n\t\t\tif (height) {\n\t\t\t\th = target.height();\n\t\t\t}\n\n\n\t\t\tif (!width || !height) {\n\t\t\t\thtmlElement.style.position = \"fixed\";\n\t\t\t\thtmlElement.style.width = \"\";\n\t\t\t\thtmlElement.style.height = \"\";\n\t\t\t\tconst bbox = htmlElement.getBoundingClientRect();\n\t\t\t\thtmlElement.style.position = \"absolute\";\n\t\t\t\tif (!width) w = bbox.width;\n\t\t\t\tif (!height) h = bbox.height;\n\n\t\t\t\tlet lw = w / scale;\n\t\t\t\tlet lh = h / scale;\n\n\t\t\t\tlet cx = target.get(\"centerX\", 0);\n\t\t\t\tlet cy = target.get(\"centerY\", 0);\n\n\t\t\t\tlet ll = 0;\n\t\t\t\tlet lr = 0;\n\t\t\t\tlet lt = 0;\n\t\t\t\tlet lb = 0;\n\n\t\t\t\tif (cx instanceof Percent) {\n\t\t\t\t\tll = -cx.value * lw;\n\t\t\t\t\tlr = (1 - cx.value) * lw;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tll = -cx;\n\t\t\t\t\tlr = lw - cx;\n\t\t\t\t}\n\n\t\t\t\tif (cy instanceof Percent) {\n\t\t\t\t\tlt = -cy.value * lh;\n\t\t\t\t\tlb = (1 - cy.value) * lh;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlt = -cy;\n\t\t\t\t\tlb = lh - cy;\n\t\t\t\t}\n\n\t\t\t\ttarget._localBounds = { left: ll, right: lr, top: lt, bottom: lb };\n\n\t\t\t\tlet previousBounds = target._adjustedLocalBounds;\n\t\t\t\tlet newBounds = target._display.getAdjustedBounds(target._localBounds);\n\t\t\t\ttarget._adjustedLocalBounds = newBounds;\n\n\t\t\t\t// compare each value of the bounds\n\t\t\t\tif (previousBounds.left !== newBounds.left || previousBounds.right !== newBounds.right || previousBounds.top !== newBounds.top || previousBounds.bottom !== newBounds.bottom) {\n\t\t\t\t\ttarget.markDirtyBounds();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (w > 0) {\n\t\t\t\thtmlElement.style.minWidth = (w) + \"px\";\n\t\t\t}\n\t\t\tif (h > 0) {\n\t\t\t\thtmlElement.style.minHeight = (h) + \"px\";\n\t\t\t}\n\n\t\t\t// Hide or show\n\t\t\tif (!visible || opacity == 0) {\n\t\t\t\thtmlElement.style.display = \"none\";\n\t\t\t}\n\n\t\t\t// Center position\n\t\t\tconst x = target.get(\"centerX\", 0);\n\t\t\tconst originX = isPercent(x) ? (x as Percent).percent + \"%\" : x + \"px\";\n\t\t\tconst y = target.get(\"centerY\", 0);\n\t\t\tconst originY = isPercent(y) ? (y as Percent).percent + \"%\" : y + \"px\";\n\n\t\t\tif (x || y) {\n\t\t\t\thtmlElement.style.transform = \"translate(-\" + originX + \", -\" + originY + \")\" + htmlElement.style.transform;\n\t\t\t}\n\n\t\t\t// Deal with scale\n\t\t\tif (scale != 1) {\n\t\t\t\thtmlElement.style.transform += \"scale(\" + scale + \")\";\n\t\t\t}\n\n\t\t\tif (rotation != 0) {\n\t\t\t\thtmlElement.style.transform += \" rotate(\" + rotation + \"deg)\";\n\t\t\t}\n\n\t\t\tif (htmlElement.style.transform != \"\") {\n\t\t\t\thtmlElement.style.transformOrigin = originX + \" \" + originY;\n\t\t\t\t//htmlElement.style.transformOrigin = \"0% 0%\";\n\t\t\t}\n\n\n\t\t}\n\t}\n\n\tpublic _setHTMLContent(target: Container, html: string): void {\n\t\tlet htmlElement = target.getPrivate(\"htmlElement\");\n\t\tif (!htmlElement) {\n\t\t\thtmlElement = this._makeHTMLElement(target);\n\t\t}\n\t\tif (htmlElement.innerHTML != html) {\n\t\t\thtmlElement.innerHTML = html;\n\t\t}\n\t}\n\n\tpublic _removeHTMLContent(target: Container): void {\n\t\tlet htmlElement = target.getPrivate(\"htmlElement\");\n\t\tif (htmlElement) {\n\t\t\tthis._htmlElementContainer!.removeChild(htmlElement);\n\t\t\ttarget.removePrivate(\"htmlElement\");\n\t\t}\n\t\t$array.remove(this._htmlEnabledContainers, target);\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}